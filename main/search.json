[{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/CODE_OF_CONDUCT.html","id":"our-pledge","dir":"","previous_headings":"","what":"Our Pledge","title":"Contributor Covenant Code of Conduct","text":"members, contributors, leaders pledge make participation community harassment-free experience everyone, regardless age, body size, visible invisible disability, ethnicity, sex characteristics, gender identity expression, level experience, education, socio-economic status, nationality, personal appearance, race, caste, color, religion, sexual identity orientation. pledge act interact ways contribute open, welcoming, diverse, inclusive, healthy community.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CODE_OF_CONDUCT.html","id":"our-standards","dir":"","previous_headings":"","what":"Our Standards","title":"Contributor Covenant Code of Conduct","text":"Examples behavior contributes positive environment community include: Demonstrating empathy kindness toward people respectful differing opinions, viewpoints, experiences Giving gracefully accepting constructive feedback Accepting responsibility apologizing affected mistakes, learning experience Focusing best just us individuals, overall community Examples unacceptable behavior include: use sexualized language imagery, sexual attention advances kind Trolling, insulting derogatory comments, personal political attacks Public private harassment Publishing others‚Äô private information, physical email address, without explicit permission conduct reasonably considered inappropriate professional setting","code":""},{"path":"https://genentech.github.io/psborrow2/main/CODE_OF_CONDUCT.html","id":"enforcement-responsibilities","dir":"","previous_headings":"","what":"Enforcement Responsibilities","title":"Contributor Covenant Code of Conduct","text":"Community leaders responsible clarifying enforcing standards acceptable behavior take appropriate fair corrective action response behavior deem inappropriate, threatening, offensive, harmful. Community leaders right responsibility remove, edit, reject comments, commits, code, wiki edits, issues, contributions aligned Code Conduct, communicate reasons moderation decisions appropriate.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CODE_OF_CONDUCT.html","id":"scope","dir":"","previous_headings":"","what":"Scope","title":"Contributor Covenant Code of Conduct","text":"Code Conduct applies within community spaces, also applies individual officially representing community public spaces. Examples representing community include using official e-mail address, posting via official social media account, acting appointed representative online offline event.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CODE_OF_CONDUCT.html","id":"enforcement","dir":"","previous_headings":"","what":"Enforcement","title":"Contributor Covenant Code of Conduct","text":"Instances abusive, harassing, otherwise unacceptable behavior may reported community leaders responsible enforcement [INSERT CONTACT METHOD]. complaints reviewed investigated promptly fairly. community leaders obligated respect privacy security reporter incident.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CODE_OF_CONDUCT.html","id":"enforcement-guidelines","dir":"","previous_headings":"","what":"Enforcement Guidelines","title":"Contributor Covenant Code of Conduct","text":"Community leaders follow Community Impact Guidelines determining consequences action deem violation Code Conduct:","code":""},{"path":"https://genentech.github.io/psborrow2/main/CODE_OF_CONDUCT.html","id":"id_1-correction","dir":"","previous_headings":"Enforcement Guidelines","what":"1. Correction","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Use inappropriate language behavior deemed unprofessional unwelcome community. Consequence: private, written warning community leaders, providing clarity around nature violation explanation behavior inappropriate. public apology may requested.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CODE_OF_CONDUCT.html","id":"id_2-warning","dir":"","previous_headings":"Enforcement Guidelines","what":"2. Warning","title":"Contributor Covenant Code of Conduct","text":"Community Impact: violation single incident series actions. Consequence: warning consequences continued behavior. interaction people involved, including unsolicited interaction enforcing Code Conduct, specified period time. includes avoiding interactions community spaces well external channels like social media. Violating terms may lead temporary permanent ban.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CODE_OF_CONDUCT.html","id":"id_3-temporary-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"3. Temporary Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: serious violation community standards, including sustained inappropriate behavior. Consequence: temporary ban sort interaction public communication community specified period time. public private interaction people involved, including unsolicited interaction enforcing Code Conduct, allowed period. Violating terms may lead permanent ban.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CODE_OF_CONDUCT.html","id":"id_4-permanent-ban","dir":"","previous_headings":"Enforcement Guidelines","what":"4. Permanent Ban","title":"Contributor Covenant Code of Conduct","text":"Community Impact: Demonstrating pattern violation community standards, including sustained inappropriate behavior, harassment individual, aggression toward disparagement classes individuals. Consequence: permanent ban sort public interaction within community.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CODE_OF_CONDUCT.html","id":"attribution","dir":"","previous_headings":"","what":"Attribution","title":"Contributor Covenant Code of Conduct","text":"Code Conduct adapted Contributor Covenant, version 2.1, available https://www.contributor-covenant.org/version/2/1/code_of_conduct.html. Community Impact Guidelines inspired Mozilla‚Äôs code conduct enforcement ladder. answers common questions code conduct, see FAQ https://www.contributor-covenant.org/faq. Translations available https://www.contributor-covenant.org/translations.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contribution Guidelines","title":"Contribution Guidelines","text":"First , thank taking time contribute! ‚úåÔ∏è üéâ love input regardless size, content scope - whether issue, feature request, bug-fix documentation enhancement. Thanks üôè rock ü§ò","code":""},{"path":"https://genentech.github.io/psborrow2/main/CONTRIBUTING.html","id":"table-of-contents","dir":"","previous_headings":"","what":"Table of contents","title":"Contribution Guidelines","text":"üë∂ Getting started üìî Code Conduct üóÉ License üêõ report bug? üí° request change? üö© submit change? üëó Style guide üßê Recognition model ‚ùì questions","code":""},{"path":"https://genentech.github.io/psborrow2/main/CONTRIBUTING.html","id":"getting-started","dir":"","previous_headings":"","what":"Getting started","title":"Contribution Guidelines","text":"introduction, please read documentation usually includes ‚ÄúGetting started‚Äù article. Please also see articles.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CONTRIBUTING.html","id":"code-of-conduct","dir":"","previous_headings":"","what":"Code of Conduct","title":"Contribution Guidelines","text":"project governed Code Conduct. participating, expected follow rules outlined .","code":""},{"path":"https://genentech.github.io/psborrow2/main/CONTRIBUTING.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Contribution Guidelines","text":"code changes license covers project.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CONTRIBUTING.html","id":"how-to-report-a-bug","dir":"","previous_headings":"","what":"How to report a bug?","title":"Contribution Guidelines","text":"use GitHub track issues, feature requests well bugs. opening new issue please double-check ‚Äôs already reported (don‚Äôt worry duplicate - manage). already - -vote ‚¨ÜÔ∏è. look faster! kindly ask write good issue minimal reproducible example demonstrates problem. also great know local environment (R session info) well. find template issues opening bug ticket. speed fixing process lot! üìà.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CONTRIBUTING.html","id":"how-to-request-the-change","dir":"","previous_headings":"","what":"How to request the change?","title":"Contribution Guidelines","text":"notice missing feature idea enhance existing functionalities - please let us know creating new issue. opening new issue please double-check ‚Äôs already reported (don‚Äôt worry occurs duplicate - manage). already - -vote ‚¨ÜÔ∏è. look faster! Please elaborate ‚Äú?‚Äù - ‚Äôs context, ‚Äôs benefit . find template opening feature request ticket. help us prioritize submit meaningful changes.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/CONTRIBUTING.html","id":"github-flow","dir":"","previous_headings":"How to submit a change?","what":"GitHub Flow","title":"Contribution Guidelines","text":"following GitHub Flow collaborate repository. order submit changes please following: Open branch Please see branch naming convention . don‚Äôt write access please fork first. Make changes. Make sure code passes checks well documented tested decrease existing test coverage üí™. Create PR(s) Please link issue make good change description. Include development assumptions necessary. Give details reviewer efficiently check changes. Address review comments Please apply changes necessary. disagree reviewer - please explain . approved - merge PR(s) delete branch","code":""},{"path":"https://genentech.github.io/psborrow2/main/CONTRIBUTING.html","id":"branching-convention","dir":"","previous_headings":"How to submit a change?","what":"Branching convention","title":"Contribution Guidelines","text":"case working task inside one specific repository, please name branch <issue_id>_<short_description> lowercase. Multiple words description divided underscore (_). E.g. 15_fix_spelling_error case try solve spelling mistake mentioned issue number 15. case working task one repository affects multiple repositories, please always name branches: <issue_id>_<issue_repo>_<short description> lowercase. Multiple words description divided underscore (_). E.g. 15_abc_fix_spelling_error case try solve spelling mistake inside xyz closes issue 15 inside abc.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CONTRIBUTING.html","id":"monorepo-and-stageddependencies","dir":"","previous_headings":"How to submit a change?","what":"monorepo and staged.dependencies","title":"Contribution Guidelines","text":"Sometimes might need change upstream dependent package(s) able submit meaningful change. using staged.dependencies functionality simulate monorepo behavior. configuration already staged_dependencies.yaml file. just need name feature branches identically. exception branch naming convention described . Please read package manual details.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/CONTRIBUTING.html","id":"r--package-versions","dir":"","previous_headings":"How to submit a change? > Recommended development environment & tools","what":"R & package versions","title":"Contribution Guidelines","text":"continuously test packages newest R version well given package dependencies. recommend set-working environment way. can find details given GitHub Action execution log - step prints session info. find bugs older version dependencies - please create appropriate bug ticket.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CONTRIBUTING.html","id":"pre-commit","dir":"","previous_headings":"How to submit a change? > Recommended development environment & tools","what":"pre-commit","title":"Contribution Guidelines","text":"highly recommend pre-commit tool combined R hooks pre-commit execute checks prior committing pushing. configuration already .pre-commit-config.yaml file. Please, follow installation guide official pre-commit page GitHub readme page R hooks.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CONTRIBUTING.html","id":"style-guide","dir":"","previous_headings":"","what":"Style guide","title":"Contribution Guidelines","text":"repository follows standard tidyverse style guide ‚Äôs checked lintr. slight modifications default settings available .lintr file. Although allows flexibility - recommend sticking style existing code. Please note style also lintr check place validate code.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CONTRIBUTING.html","id":"recognition-model","dir":"","previous_headings":"","what":"Recognition model","title":"Contribution Guidelines","text":"contribution highly welcomed appreciated. contribution data already GitHub repository insights feature, introduced objective rules recognize significant contribution became package author: Minimum 5% lines code authored (determined git blame query) top 5 contributors terms number commits lines added lines removed. package maintainer also reserves rights manually adjust criteria recognize contributions.","code":""},{"path":"https://genentech.github.io/psborrow2/main/CONTRIBUTING.html","id":"any-questions","dir":"","previous_headings":"","what":"Any questions","title":"Contribution Guidelines","text":"questions regarding contribution - please reach repository maintainer!","code":""},{"path":"https://genentech.github.io/psborrow2/main/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"Apache License","title":"Apache License","text":"Version 2.0, January 2004 <http://www.apache.org/licenses/>","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/LICENSE.html","id":"id_1-definitions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"1. Definitions","title":"Apache License","text":"‚ÄúLicense‚Äù shall mean terms conditions use, reproduction, distribution defined Sections 1 9 document. ‚ÄúLicensor‚Äù shall mean copyright owner entity authorized copyright owner granting License. ‚ÄúLegal Entity‚Äù shall mean union acting entity entities control, controlled , common control entity. purposes definition, ‚Äúcontrol‚Äù means () power, direct indirect, cause direction management entity, whether contract otherwise, (ii) ownership fifty percent (50%) outstanding shares, (iii) beneficial ownership entity. ‚Äú‚Äù (‚Äú‚Äù) shall mean individual Legal Entity exercising permissions granted License. ‚ÄúSource‚Äù form shall mean preferred form making modifications, including limited software source code, documentation source, configuration files. ‚ÄúObject‚Äù form shall mean form resulting mechanical transformation translation Source form, including limited compiled object code, generated documentation, conversions media types. ‚ÄúWork‚Äù shall mean work authorship, whether Source Object form, made available License, indicated copyright notice included attached work (example provided Appendix ). ‚ÄúDerivative Works‚Äù shall mean work, whether Source Object form, based (derived ) Work editorial revisions, annotations, elaborations, modifications represent, whole, original work authorship. purposes License, Derivative Works shall include works remain separable , merely link (bind name) interfaces , Work Derivative Works thereof. ‚ÄúContribution‚Äù shall mean work authorship, including original version Work modifications additions Work Derivative Works thereof, intentionally submitted Licensor inclusion Work copyright owner individual Legal Entity authorized submit behalf copyright owner. purposes definition, ‚Äúsubmitted‚Äù means form electronic, verbal, written communication sent Licensor representatives, including limited communication electronic mailing lists, source code control systems, issue tracking systems managed , behalf , Licensor purpose discussing improving Work, excluding communication conspicuously marked otherwise designated writing copyright owner ‚ÄúContribution.‚Äù ‚ÄúContributor‚Äù shall mean Licensor individual Legal Entity behalf Contribution received Licensor subsequently incorporated within Work.","code":""},{"path":"https://genentech.github.io/psborrow2/main/LICENSE.html","id":"id_2-grant-of-copyright-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"2. Grant of Copyright License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable copyright license reproduce, prepare Derivative Works , publicly display, publicly perform, sublicense, distribute Work Derivative Works Source Object form.","code":""},{"path":"https://genentech.github.io/psborrow2/main/LICENSE.html","id":"id_3-grant-of-patent-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"3. Grant of Patent License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable (except stated section) patent license make, made, use, offer sell, sell, import, otherwise transfer Work, license applies patent claims licensable Contributor necessarily infringed Contribution(s) alone combination Contribution(s) Work Contribution(s) submitted. institute patent litigation entity (including cross-claim counterclaim lawsuit) alleging Work Contribution incorporated within Work constitutes direct contributory patent infringement, patent licenses granted License Work shall terminate date litigation filed.","code":""},{"path":"https://genentech.github.io/psborrow2/main/LICENSE.html","id":"id_4-redistribution","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"4. Redistribution","title":"Apache License","text":"may reproduce distribute copies Work Derivative Works thereof medium, without modifications, Source Object form, provided meet following conditions: () must give recipients Work Derivative Works copy License; (b) must cause modified files carry prominent notices stating changed files; (c) must retain, Source form Derivative Works distribute, copyright, patent, trademark, attribution notices Source form Work, excluding notices pertain part Derivative Works; (d) Work includes ‚ÄúNOTICE‚Äù text file part distribution, Derivative Works distribute must include readable copy attribution notices contained within NOTICE file, excluding notices pertain part Derivative Works, least one following places: within NOTICE text file distributed part Derivative Works; within Source form documentation, provided along Derivative Works; , within display generated Derivative Works, wherever third-party notices normally appear. contents NOTICE file informational purposes modify License. may add attribution notices within Derivative Works distribute, alongside addendum NOTICE text Work, provided additional attribution notices construed modifying License. may add copyright statement modifications may provide additional different license terms conditions use, reproduction, distribution modifications, Derivative Works whole, provided use, reproduction, distribution Work otherwise complies conditions stated License.","code":""},{"path":"https://genentech.github.io/psborrow2/main/LICENSE.html","id":"id_5-submission-of-contributions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"5. Submission of Contributions","title":"Apache License","text":"Unless explicitly state otherwise, Contribution intentionally submitted inclusion Work Licensor shall terms conditions License, without additional terms conditions. Notwithstanding , nothing herein shall supersede modify terms separate license agreement may executed Licensor regarding Contributions.","code":""},{"path":"https://genentech.github.io/psborrow2/main/LICENSE.html","id":"id_6-trademarks","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"6. Trademarks","title":"Apache License","text":"License grant permission use trade names, trademarks, service marks, product names Licensor, except required reasonable customary use describing origin Work reproducing content NOTICE file.","code":""},{"path":"https://genentech.github.io/psborrow2/main/LICENSE.html","id":"id_7-disclaimer-of-warranty","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"7. Disclaimer of Warranty","title":"Apache License","text":"Unless required applicable law agreed writing, Licensor provides Work (Contributor provides Contributions) ‚Äú‚Äù BASIS, WITHOUT WARRANTIES CONDITIONS KIND, either express implied, including, without limitation, warranties conditions TITLE, NON-INFRINGEMENT, MERCHANTABILITY, FITNESS PARTICULAR PURPOSE. solely responsible determining appropriateness using redistributing Work assume risks associated exercise permissions License.","code":""},{"path":"https://genentech.github.io/psborrow2/main/LICENSE.html","id":"id_8-limitation-of-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"8. Limitation of Liability","title":"Apache License","text":"event legal theory, whether tort (including negligence), contract, otherwise, unless required applicable law (deliberate grossly negligent acts) agreed writing, shall Contributor liable damages, including direct, indirect, special, incidental, consequential damages character arising result License use inability use Work (including limited damages loss goodwill, work stoppage, computer failure malfunction, commercial damages losses), even Contributor advised possibility damages.","code":""},{"path":"https://genentech.github.io/psborrow2/main/LICENSE.html","id":"id_9-accepting-warranty-or-additional-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"9. Accepting Warranty or Additional Liability","title":"Apache License","text":"redistributing Work Derivative Works thereof, may choose offer, charge fee , acceptance support, warranty, indemnity, liability obligations /rights consistent License. However, accepting obligations, may act behalf sole responsibility, behalf Contributor, agree indemnify, defend, hold Contributor harmless liability incurred , claims asserted , Contributor reason accepting warranty additional liability. END TERMS CONDITIONS","code":""},{"path":"https://genentech.github.io/psborrow2/main/LICENSE.html","id":"appendix-how-to-apply-the-apache-license-to-your-work","dir":"","previous_headings":"","what":"APPENDIX: How to apply the Apache License to your work","title":"Apache License","text":"apply Apache License work, attach following boilerplate notice, fields enclosed brackets [] replaced identifying information. (Don‚Äôt include brackets!) text enclosed appropriate comment syntax file format. also recommend file class name description purpose included ‚Äúprinted page‚Äù copyright notice easier identification within third-party archives.","code":"Copyright [yyyy] [name of copyright owner]  Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at    http://www.apache.org/licenses/LICENSE-2.0  Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License."},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"before-you-start","dir":"Articles","previous_headings":"","what":"Before you start","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"psborrows2 package relies Stan model fitting, specifically via CmdStan cmdstanr tools. haven‚Äôt used CmdStan ‚Äôll need install R package external program. information can found cmdstanr vignette. short version : Now ‚Äôre ready start psborrow2.","code":"# Install the cmdstanr package install.packages(\"cmdstanr\", repos = c(\"https://mc-stan.org/r-packages/\", getOption(\"repos\"))) library(cmdstanr)  # Install the external CmdStan program check_cmdstan_toolchain() install_cmdstan(cores = 2) library(psborrow2)"},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"creating-an-analysis-object","dir":"Articles","previous_headings":"","what":"Creating an analysis object","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"BDB analysis psborrow2, need create object class Analysis contains information needed build model compile MCMC sampler using Stan. create Analysis object, call function create_analysis_obj(). Let‚Äôs look four required arguments function evaluate one---time.","code":"create_analysis_obj(   data_matrix,   outcome,   borrowing,   treatment )"},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"required-elements","dir":"Articles","previous_headings":"Creating an analysis object > 1. data_matrix","what":"Required elements","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"data_matrix input one-row-per-patient numeric matrix analysis. column names matrix fixed, names columns specified outcome, treatment, borrowing sections. two columns required analyses: flag denoting receipt experimental intervention (1) (0) flag denoting whether patient part external data source (1) internal trial (0)","code":""},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"time-to-event","dir":"Articles","previous_headings":"Creating an analysis object > 1. data_matrix > Required elements","what":"Time-to-event","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"outcome time--event, two additional columns needed: duration follow-patient flag denoting whether patient censored (1) (0)","code":""},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"binary-endpoints","dir":"Articles","previous_headings":"Creating an analysis object > 1. data_matrix > Required elements","what":"Binary endpoints","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"outcome binary, one additional column needed: flag denoting whether patient event interest (1) (0)","code":""},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"covariates","dir":"Articles","previous_headings":"Creating an analysis object > 1. data_matrix > Required elements","what":"Covariates","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"Covariates may also included BDB analyses. included data matrix plan adjust . Note numeric matrices supported. See Example data creating matrix data.frame. Note missing data currently allowed, values must non-missing.","code":""},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"example-data","dir":"Articles","previous_headings":"Creating an analysis object > 1. data_matrix","what":"Example data","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"using example dataset stored psborrow2 (example_matrix). starting data frame tibble, can easily create suitable matrix psborrow2 helper function create_data_matrix().","code":""},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"creating-a-data-matrix-with-create_data_matrix","dir":"Articles","previous_headings":"Creating an analysis object > 1. data_matrix > Example data","what":"Creating a data matrix with create_data_matrix()","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"","code":"# Start with data.frame diabetic_df <- survival::diabetic  # For demonstration purposes, let some patients be external controls diabetic_df$external <- ifelse(diabetic_df$trt == 0 & diabetic_df$id > 1000, 1, 0)  # Create the censor flag diabetic_df$cens <- ifelse(diabetic_df$status == 0, 1, 0)  diabetes_matrix <- create_data_matrix(   diabetic_df,   outcome = c(\"time\", \"cens\"),   trt_flag_col = \"trt\",   ext_flag_col = \"external\",   covariates = ~ age + laser + risk ) # Call `add_covariates()` with `covariates =  c(\"age\", \"laserargon\", \"risk\") `  head(diabetes_matrix) #    time cens trt external age laserargon risk # 1 46.23    1   0        0  28          1    9 # 2 46.23    1   1        0  28          1    9 # 3 42.50    1   1        0  12          0    8 # 4 31.30    0   0        0  12          0    6 # 5 42.27    1   1        0   9          0   11 # 6 42.27    1   0        0   9          0   11"},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"psborrow2-example-matrix","dir":"Articles","previous_headings":"Creating an analysis object > 1. data_matrix > Example data","what":"psborrow2 example matrix","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"Let‚Äôs look first rows example matrix: column definitions : ext, 0/1, flag external controls trt, 0/1, flag treatment arm cov1, 0/1, baseline covariate cov2, 0/1, baseline covariate time, positive numeric, survival time cnsr, 0/1, censoring indicator resp, 0/1, indicator binary response outcome","code":"head(example_matrix) #      id ext trt cov4 cov3 cov2 cov1       time status cnsr resp # [1,]  1   0   0    1    1    1    0  2.4226411      1    0    1 # [2,]  2   0   0    1    1    0    1 50.0000000      0    1    1 # [3,]  3   0   0    0    0    0    1  0.9674372      1    0    1 # [4,]  4   0   0    1    1    0    1 14.5774738      1    0    1 # [5,]  5   0   0    1    1    0    0 50.0000000      0    1    0 # [6,]  6   0   0    1    1    0    1 50.0000000      0    1    0"},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"outcome","dir":"Articles","previous_headings":"Creating an analysis object","what":"2. outcome","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"psborrow2 currently supports three outcomes: Time--event exponential distribution (constant hazard), created exp_surv_dist() Time--event Weibull distribution proportional hazards parametrization, created weib_ph_surv_dist() Binary endpoints Bernoulli distribution using logistic regression, created logistic_bin_outcome() select outcome distribution want, need specify prior distribution baseline event rate, baseline_prior. case, baseline_prior log hazard rate (binary endpoints represents log odds instead). Let‚Äôs assume prior knowledge event rate, ‚Äôll specify uninformative prior: normal_prior(0, 1000). example, let‚Äôs conduct time--event analysis using exponential distribution.","code":"outcome <- exp_surv_dist(   time_var = \"time\",   cens_var = \"cnsr\",   baseline_prior = normal_prior(0, 1000) ) outcome # Outcome object with class ExponentialSurvDist  #  # Outcome variables: # time_var cens_var  #   \"time\"   \"cnsr\"  #  # Baseline prior: # Normal Distribution # Parameters: #  Stan  R    Value #  mu    mean    0  #  sigma sd   1000"},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"borrowing","dir":"Articles","previous_headings":"Creating an analysis object","what":"3. borrowing","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"psborrow2 supports three different borrowing methods specified method argument borrowing_details() (see code example call ): ‚Äúborrowing‚Äù: internal trial comparison without external data ‚ÄúFull borrowing‚Äù: pooling external internal control arms ‚ÄúBDB‚Äù: Bayesian dynamic borrowing column name external control column flag matrix also required passed ext_flag_col. Finally, BDB , hyperprior distribution commensurability parameter must specified. hyperprior determines (along comparability outcomes internal external controls) much borrowing external control group performed. Example hyperpriors include largely uninformative inverse gamma distributions e.g., gamma_prior(alpha = .001, beta = .001) well informative distributions e.g., gamma_prior(alpha = 1, beta = .001), though distribution positive real line can used. Distributions density higher values (.e., higher precision) lead borrowing. ‚Äôll choose uninformative gamma prior example. Note: Prior distributions outlined greater detail separate vignette, see vignette('prior_distributions', package = 'psborrow2').","code":"borrowing <- borrowing_details(   method = \"BDB\",   ext_flag_col = \"ext\",   tau_prior = gamma_prior(0.001, 0.001) ) borrowing # Borrowing object using BDB  #  # External control flag: ext  #  # Commensurability parameter prior: # Gamma Distribution # Parameters: #  Stan  R     Value #  alpha shape 0.001 #  beta  rate  0.001 # Constraints: <lower=0>"},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"treatment","dir":"Articles","previous_headings":"Creating an analysis object","what":"3. treatment","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"Finally, treatment details outlined treatment_details(). , first specify column treatment flag trt_flag_col. addition, need specify prior effect estimate, trt_prior. ‚Äôll use another uninformative normal distribution prior treatment effect:","code":"treatment <- treatment_details(   trt_flag_col = \"trt\",   trt_prior = normal_prior(0, 1000) ) treatment # Treatment object #  # Treatment flag column: trt  #  # Treatment effect prior: # Normal Distribution # Parameters: #  Stan  R    Value #  mu    mean    0  #  sigma sd   1000"},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"application","dir":"Articles","previous_headings":"Creating an analysis object","what":"Application","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"Now thought inputs create_analysis_obj(), let‚Äôs create analysis object: Stan model compiled successfully informed us ready begin sampling.","code":"anls_obj <- create_analysis_obj(   data_matrix = example_matrix,   outcome = outcome,   borrowing = borrowing,   treatment = treatment ) # Inputs look good. # Stan program compiled successfully! # Ready to go! Now call `mcmc_sample()`."},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"sampling-from-an-analysis-object","dir":"Articles","previous_headings":"","what":"Sampling from an analysis object","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"can take draws posterior distribution using function mcmc_sample(). function takes input Analysis object arguments (data argument) passed CmdStanModel objects. Note running may take minutes.","code":"results <- mcmc_sample(anls_obj,   iter_warmup = 2000,   iter_sampling = 50000,   chains = 4,   seed = 112233 ) # Running MCMC with 4 sequential chains... #  # Chain 1 finished in 17.6 seconds. # Chain 2 finished in 18.8 seconds. # Chain 3 finished in 19.2 seconds. # Chain 4 finished in 16.2 seconds. #  # All 4 chains finished successfully. # Mean chain execution time: 18.0 seconds. # Total execution time: 72.2 seconds."},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"summarizing-results","dir":"Articles","previous_headings":"","what":"Summarizing results","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"CmdStanMCMC object, results several methods outlined cmdstanr website. instance, can see see summary posterior distribution samples results$summary(): summary includes information several parameter estimates BDB model. may immediately clear parameters Stan model refer , psborrow2 function returns variable dictionary analysis object help interpret parameters: can also capture draws calling results$draws(), returns object class draws. draws objects common many MCMC sampling software packages allow us leverage packages posterior bayesplot. psborrow2 also function rename variables draws objects interpretable, rename_draws_covariates(). function uses variable_dictionary labels. Let‚Äôs use make results easier interpret:","code":"results$summary() # # A tibble: 6 √ó 10 #   variable      mean    median     sd    mad          q5       q95  rhat ess_b‚Ä¶¬π #   <chr>        <dbl>     <dbl>  <dbl>  <dbl>       <dbl>     <dbl> <dbl>   <dbl> # 1 lp__     -1618.    -1618.    1.50   1.29   -1621.      -1616.     1.00  71635. # 2 beta_trt    -0.156    -0.159 0.199  0.199     -0.480       0.176  1.00  89655. # 3 tau          1.21      0.507 1.91   0.693      0.00441     4.74   1.00  81335. # 4 alpha[1]    -3.36     -3.35  0.162  0.162     -3.63       -3.10   1.00  88895. # 5 alpha[2]    -2.40     -2.40  0.0554 0.0553    -2.49       -2.31   1.00 130460. # 6 HR_trt       0.873     0.853 0.177  0.168      0.619       1.19   1.00  89655. # # ‚Ä¶ with 1 more variable: ess_tail <dbl>, and abbreviated variable name # #   ¬π‚Äãess_bulk variable_dictionary(anls_obj) #   Stan_variable                        Description # 1           tau         commensurability parameter # 2      alpha[1] baseline log hazard rate, internal # 3      alpha[2] baseline log hazard rate, external # 4      beta_trt                   treatment log HR # 5        HR_trt                       treatment HR draws <- results$draws() print(draws) # # A draws_array: 50000 iterations, 4 chains, and 6 variables # , , variable = lp__ #  #          chain # iteration     1     2     3     4 #         1 -1616 -1620 -1617 -1617 #         2 -1618 -1623 -1620 -1616 #         3 -1619 -1618 -1619 -1617 #         4 -1619 -1616 -1618 -1618 #         5 -1619 -1618 -1618 -1619 #  # , , variable = beta_trt #  #          chain # iteration     1     2        3       4 #         1 -0.30 -0.44 -0.00048 -0.1973 #         2 -0.21 -0.29  0.16970 -0.1398 #         3 -0.17 -0.26 -0.52943 -0.0031 #         4 -0.32 -0.12 -0.43633 -0.2337 #         5 -0.23 -0.17 -0.43633  0.0925 #  # , , variable = tau #  #          chain # iteration      1     2     3     4 #         1 1.0410 0.650 0.048 2.445 #         2 2.4501 1.638 0.029 0.437 #         3 1.3336 3.267 2.406 1.552 #         4 0.0046 0.495 1.529 0.142 #         5 0.0108 0.064 1.529 0.044 #  # , , variable = alpha[1] #  #          chain # iteration    1    2    3    4 #         1 -3.3 -3.3 -3.5 -3.4 #         2 -3.3 -3.2 -3.6 -3.3 #         3 -3.3 -3.3 -3.0 -3.4 #         4 -3.3 -3.4 -3.1 -3.5 #         5 -3.2 -3.5 -3.1 -3.4 #  # # ... with 49995 more iterations, and 2 more variables draws <- rename_draws_covariates(draws, anls_obj) summary(draws) # # A tibble: 6 √ó 10 #   variable           mean   median     sd    mad       q5      q95  rhat ess_b‚Ä¶¬π #   <chr>             <dbl>    <dbl>  <dbl>  <dbl>    <dbl>    <dbl> <dbl>   <dbl> # 1 lp__           -1.62e+3 -1.62e+3 1.50   1.29   -1.62e+3 -1.62e+3  1.00  71635. # 2 treatment log‚Ä¶ -1.56e-1 -1.59e-1 0.199  0.199  -4.80e-1  1.76e-1  1.00  89655. # 3 commensurabil‚Ä¶  1.21e+0  5.07e-1 1.91   0.693   4.41e-3  4.74e+0  1.00  81335. # 4 baseline log ‚Ä¶ -3.36e+0 -3.35e+0 0.162  0.162  -3.63e+0 -3.10e+0  1.00  88895. # 5 baseline log ‚Ä¶ -2.40e+0 -2.40e+0 0.0554 0.0553 -2.49e+0 -2.31e+0  1.00 130460. # 6 treatment HR    8.73e-1  8.53e-1 0.177  0.168   6.19e-1  1.19e+0  1.00  89655. # # ‚Ä¶ with 1 more variable: ess_tail <dbl>, and abbreviated variable name # #   ¬π‚Äãess_bulk"},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"using-bayesplot","dir":"Articles","previous_headings":"Summarizing results","what":"Using bayesplot","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"draws objects bayesplot package, can create many useful visual summary plots. can visualize marginal posterior distribution variable interested plotting histograms draws function mcmc_hist(). Let‚Äôs Hazard ratio treatment effect commensurability parameter, tau.  can see plots help us understand diagnose problems MCMC sampler, trace rank plots:  Many functions outlined bayesplot vignettes.","code":"library(bayesplot) mcmc_hist(draws, c(\"treatment HR\", \"commensurability parameter\")) color_scheme_set(\"mix-blue-pink\")  mcmc_trace(   draws[1:5000, 1:2, ], # Using a subset of draws only   pars = c(\"treatment HR\", \"commensurability parameter\"),   n_warmup = 1000 )"},{"path":"https://genentech.github.io/psborrow2/main/articles/dataset.html","id":"using-posterior","dir":"Articles","previous_headings":"Summarizing results","what":"Using posterior","title":"Conduct a hybrid control analysis on a dataset using BDB","text":"draws objects also supported posterior package, provides many tools analyzing MCMC draw data. instance, can use summarize_draws() function derive 80% credible intervals parameters: Another useful application posterior package evaluation Monte Carlo standard error quantiles variable interest: posterior contains many helpful functions, outlined vignettes.","code":"library(posterior) summarize_draws(draws, ~ quantile(.x, probs = c(0.1, 0.9))) # # A tibble: 6 √ó 3 #   variable                                `10%`     `90%` #   <chr>                                   <dbl>     <dbl> # 1 lp__                               -1620.     -1616.    # 2 treatment log HR                      -0.409      0.101 # 3 commensurability parameter             0.0177     3.21  # 4 baseline log hazard rate, internal    -3.57      -3.15  # 5 baseline log hazard rate, external    -2.47      -2.33  # 6 treatment HR                           0.664      1.11 vm <- extract_variable_matrix(draws, \"treatment HR\") mcse_quantile(x = vm, probs = c(0.1, 0.5, 0.9)) # mcse_q10 mcse_q50 mcse_q90  # 0.000653 0.000654 0.001220"},{"path":"https://genentech.github.io/psborrow2/main/articles/prior_distributions.html","id":"specifying-prior-distributions","dir":"Articles","previous_headings":"","what":"Specifying prior distributions","title":"Specifying prior distributions","text":"psborrow2 creates fully-parametrized Bayesian models, proper prior distributions parameters must specified. Prior distributions needed several parameters, depending analysis: beta coefficients (e.g.¬†log hazard ratios log odds ratios) coefficients, passed add_covariates() ancillary parameters outcome distributions, shape parameter Weibull survival distribution, passed weib_ph_surv_dist() log effect estimates (e.g.¬†hazard ratios odds ratios) primary contrast treatments, passed treatment_details() baseline outcome rates odds, passed borrowing_details() hyperprior commensurability parameter Bayesian dynamic borrowing (BDB), passed borrowing_details() See documentation functions information.","code":""},{"path":"https://genentech.github.io/psborrow2/main/articles/prior_distributions.html","id":"types-of-prior-distributions","dir":"Articles","previous_headings":"","what":"Types of prior distributions","title":"Specifying prior distributions","text":"currently supported prior distributions created constructors : bernoulli_prior(theta) beta_prior(alpha, beta) cauchy_prior(mu, sigma) exponential_prior(beta) gamma_prior(alpha, beta) normal_prior(mu, sigma) poisson_prior(lambda) uniform_prior(alpha, beta) example, can create uninformative normal distribution specifying normal prior centered around 0 large standard deviation: See documentation respective functions additional information.","code":"uninformative_normal <- normal_prior(0, 10000) uninformative_normal # Normal Distribution # Parameters: #  Stan  R    Value #  mu    mean     0 #  sigma sd   10000"},{"path":"https://genentech.github.io/psborrow2/main/articles/prior_distributions.html","id":"visualizing-prior-distributions","dir":"Articles","previous_headings":"","what":"Visualizing prior distributions","title":"Specifying prior distributions","text":"may sometimes find useful visualize prior distributions. scenarios, can call plot() prior object visualize distribution:  plot() chooses default axes , can change make differences obvious. Let‚Äôs compare conservative gamma(0.001, 0.001) hyperprior distribution commensurability parameter tau aggressive gamma(1, 0.001) distribution greater density higher values tau (lead borrowing BDB analysis):","code":"plot(uninformative_normal) conservative_tau <- gamma_prior(0.001, 0.001) aggressive_tau <- gamma_prior(1, 0.001) plot(aggressive_tau, xlim = c(0, 2000), col = \"blue\", ylim = c(0, 1e-03)) plot(conservative_tau, xlim = c(0, 2000), col = \"red\", add = TRUE)"},{"path":"https://genentech.github.io/psborrow2/main/articles/propensity_scores.html","id":"propensity-score-calculation","dir":"Articles","previous_headings":"","what":"Propensity Score Calculation","title":"Incorporating propensity scores analysis in psborrow2","text":"Propensity scores probabilities observation belongs one group another, setting internal external patients. PS models fitted based baseline covariates confounders outcome internal/external group. simplest approach calculating PS logistic generalized linear model. First, let‚Äôs load demo data psborrow2. Let‚Äôs now fit logistic generalized linear model add PS additional covariate. calculated PS can included covariate analysis object, ‚Äúcovariate adjustment‚Äù PS approach:","code":"my_data <- example_surv head(my_data) #>   trt ext eventtime status censor cov1 cov2      cov3 #> 1   0   1 24.000000      0      1    0    7 13.551859 #> 2   1   0 24.000000      0      1    1    6  7.517466 #> 3   0   1  9.468386      1      0    0    7  4.884504 #> 4   0   0  8.841009      1      0    0    7  5.631334 #> 5   0   0 13.559467      1      0    1   12  8.312818 #> 6   1   0 24.000000      0      1    0   12 13.539768 ps_model <- glm(ext ~ cov1 + cov2 + cov3, data = my_data, family = binomial) ps <- predict(ps_model, type = \"response\") my_data$ps <- ps head(my_data) #>   trt ext eventtime status censor cov1 cov2      cov3        ps #> 1   0   1 24.000000      0      1    0    7 13.551859 0.4694384 #> 2   1   0 24.000000      0      1    1    6  7.517466 0.4005745 #> 3   0   1  9.468386      1      0    0    7  4.884504 0.4192069 #> 4   0   0  8.841009      1      0    0    7  5.631334 0.4234848 #> 5   0   0 13.559467      1      0    1   12  8.312818 0.5332824 #> 6   1   0 24.000000      0      1    0   12 13.539768 0.5765787 data_mat <- create_data_matrix(   my_data,   covariates = c(\"cov1\", \"cov2\", \"cov3\", \"ps\"),   ext_flag_col = \"ext\",   outcome = c(\"eventtime\", \"censor\"),   trt_flag_col = \"trt\" ) #> Call `add_covariates()` with `covariates =  c(\"cov1\", \"cov2\", \"cov3\", \"ps\") `  analysis_object <- create_analysis_obj(   data_matrix = data_mat,   covariates = add_covariates(c(\"cov1\", \"cov2\", \"cov3\", \"ps\"),     priors = normal_prior(0, 100)   ),   borrowing = borrowing_details(\"BDB\",     ext_flag_col = \"ext\",     tau_prior = gamma_prior(0.1, 0.1)   ),   treatment = treatment_details(\"trt\", normal_prior(0, 100)),   outcome = weib_ph_surv_dist(\"eventtime\", \"censor\",     shape_prior = exponential_prior(1),     baseline_prior = normal_prior(0, 1000)   ) ) #> Inputs look good. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`."},{"path":"https://genentech.github.io/psborrow2/main/articles/propensity_scores.html","id":"other-ps-analyses","dir":"Articles","previous_headings":"","what":"Other PS Analyses","title":"Incorporating propensity scores analysis in psborrow2","text":"complex PS analyses, can use one dedicated R packages.","code":""},{"path":"https://genentech.github.io/psborrow2/main/articles/propensity_scores.html","id":"psweight","dir":"Articles","previous_headings":"Other PS Analyses","what":"PSweight","title":"Incorporating propensity scores analysis in psborrow2","text":"PSweight package can calculate PS using model fitting approaches simple glm described . also provides summary statistics plots. example can use generalized boosted regression model (gbm): plot distributions shows good overlap scores groups.  PS values can copied data set analysis object can constructed . package can also trim data. Since reasonable overlap data, 5 patients trimmed. can used analysis creating suitable data matrix.","code":"library(PSweight) my_data2 <- example_surv psw_model <- SumStat(ext ~ cov1 + cov2 + cov3, data = my_data2, method = \"gbm\") summary(psw_model) #> unweighted result #>      Mean 0 Mean 1   SMD #> cov1  0.514  0.500 0.028 #> cov2  5.804  6.607 0.297 #> cov3  5.663  6.692 0.240 #>  #> overlap result #>      Mean 0 Mean 1   SMD #> cov1  0.503  0.498 0.009 #> cov2  6.313  6.327 0.005 #> cov3  6.298  6.229 0.016 plot(psw_model, type = \"density\") my_data2$ps <- psw_model$propensity[, 2] psw_trimmed <- PStrim(ext ~ cov1 + cov2 + cov3, data = my_data2, delta = 0.1) psw_trimmed #> Summary of the trimming: #>            0   1 #> trimmed    0   0 #> remained 358 242 create_data_matrix(   psw_trimmed$data,   covariates = c(\"cov1\", \"cov2\", \"cov3\", \"ps\"),   ext_flag_col = \"ext\",   outcome = c(\"eventtime\", \"censor\"),   trt_flag_col = \"trt\" ) #> Call `add_covariates()` with `covariates =  c(\"cov1\", \"cov2\", \"cov3\", \"ps\") `"},{"path":"https://genentech.github.io/psborrow2/main/articles/propensity_scores.html","id":"matchit","dir":"Articles","previous_headings":"Other PS Analyses","what":"MatchIt","title":"Incorporating propensity scores analysis in psborrow2","text":"variety matching methods, including PS matching implemented MatchIt package. described Getting Started vignette, can useful check imbalance matching. matching treated untreated select comparable control group, regardless whether internal external. Now can try 1:1 nearest matching approach.   Determining whether balance matching appropriate beyond scope vignette. can read MatchIt Assessing Balance vignette. Another useful package cobalt, provides tools assessing balance groups weighting matching. compatible many matching weighting packaes. See vignette details. However, happy results matching procedure, can extract data use psborrow2.","code":"library(MatchIt) # No matching; constructing a pre-match matchit object no_match <- matchit(trt ~ cov1 + cov2 + cov3,   data = example_surv,   method = NULL, distance = \"glm\" ) summary(no_match) #>  #> Call: #> matchit(formula = trt ~ cov1 + cov2 + cov3, data = example_surv,  #>     method = NULL, distance = \"glm\") #>  #> Summary of Balance for All Data: #>          Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean #> distance        0.4246        0.2877          0.8238     1.0491    0.2234 #> cov1            0.5350        0.4950          0.0802          .    0.0400 #> cov2            4.7400        6.8225         -0.9420     0.6640    0.1302 #> cov3            4.5484        6.8425         -0.6058     0.7777    0.1557 #>          eCDF Max #> distance   0.3350 #> cov1       0.0400 #> cov2       0.3100 #> cov3       0.2525 #>  #>  #> Sample Sizes: #>           Control Treated #> All           400     200 #> Matched       400     200 #> Unmatched       0       0 #> Discarded       0       0 match_11 <- matchit(trt ~ cov1 + cov2 + cov3,   data = example_surv,   method = \"nearest\", distance = \"glm\" ) summary(match_11) #>  #> Call: #> matchit(formula = trt ~ cov1 + cov2 + cov3, data = example_surv,  #>     method = \"nearest\", distance = \"glm\") #>  #> Summary of Balance for All Data: #>          Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean #> distance        0.4246        0.2877          0.8238     1.0491    0.2234 #> cov1            0.5350        0.4950          0.0802          .    0.0400 #> cov2            4.7400        6.8225         -0.9420     0.6640    0.1302 #> cov3            4.5484        6.8425         -0.6058     0.7777    0.1557 #>          eCDF Max #> distance   0.3350 #> cov1       0.0400 #> cov2       0.3100 #> cov3       0.2525 #>  #>  #> Summary of Balance for Matched Data: #>          Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean #> distance        0.4246        0.3979          0.1607     1.3369    0.0313 #> cov1            0.5350        0.5400         -0.0100          .    0.0050 #> cov2            4.7400        5.0450         -0.1380     1.2490    0.0203 #> cov3            4.5484        5.1457         -0.1577     0.8926    0.0444 #>          eCDF Max Std. Pair Dist. #> distance    0.125          0.1621 #> cov1        0.005          1.0325 #> cov2        0.100          0.2013 #> cov3        0.090          0.8468 #>  #> Sample Sizes: #>           Control Treated #> All           400     200 #> Matched       200     200 #> Unmatched     200       0 #> Discarded       0       0 plot(match_11, type = \"jitter\", interactive = FALSE) plot(match_11,   type = \"qq\", interactive = FALSE,   which.xs = c(\"cov1\", \"cov2\", \"cov3\") ) create_data_matrix(   data = example_surv[match_11$weights == 1, ],   covariates = c(\"cov1\", \"cov2\", \"cov3\"),   ext_flag_col = \"ext\",   outcome = c(\"eventtime\", \"censor\"),   trt_flag_col = \"trt\" ) #> Call `add_covariates()` with `covariates =  c(\"cov1\", \"cov2\", \"cov3\") `"},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/articles/psborrow2.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Getting started with `psborrow2`","text":"randomized controlled trial (RCT) comparing experimental control arms remains gold standard evaluating efficacy novel therapy, one may want leverage relevant existing external control data inform study outcome. External control data can help increase study power thereby shorten trial duration reduce number subjects needed. However, analysis external control data can also introduce bias. One method incorporating external control data mitigate bias Bayesian dynamic borrowing (BDB), external control data borrowed extent external RCT control arms similar outcomes (Viele et. al.¬†2014). Implementing BDB computationally involved requires Markov chain Monte Carlo (MCMC) sampling methods, turn may require knowledge MCMC sampling software. overcome technical barriers developed psborrow2 using cmdstanr, R package facilitates use MCMC sampling program Stan (via CMD Stan). psborrow2 two main goals: provide user-friendly interface applying BDB study results handles MCMC sampling behalf user facilitate simulation studies compare different borrowing parameters (e.g.¬†full borrowing, borrowing, BDB) trial BDB characteristics unified way Right now, psborrow2 supports time--event endpoints well binary endpoints.","code":""},{"path":"https://genentech.github.io/psborrow2/main/articles/psborrow2.html","id":"analyze-your-own-data","dir":"Articles","previous_headings":"","what":"Analyze your own data","title":"Getting started with `psborrow2`","text":"psborrow2 can implement BDB scenario wherein two-arm RCT supplemented external data control arm. Three arms required implement BDB psborrow2. : internal control arm within RCT external control arm using observational data experimental data another trial intervention/treatment population internal control arm internal experimental arm within RCT scenarios common drug development comparator arm novel therapy often standard care, data exists electronic health care records previous phase III registrational trials. Refer ‚Äúdataset‚Äù vignette information implement BDB analyses data: vignette('dataset', package = 'psborrow2')","code":""},{"path":"https://genentech.github.io/psborrow2/main/articles/psborrow2.html","id":"conduct-a-simulation-study","dir":"Articles","previous_headings":"","what":"Conduct a simulation study","title":"Getting started with `psborrow2`","text":"Refer ‚Äúsimulation study‚Äù vignette information create simulation study involving BDB innovative trial designs: vignette('simulation_study', package = 'psborrow2')","code":""},{"path":"https://genentech.github.io/psborrow2/main/articles/psborrow2.html","id":"additional-information","dir":"Articles","previous_headings":"","what":"Additional information","title":"Getting started with `psborrow2`","text":"psborrow2 successor psborrow. core functionality replicated psborrow2 longer reason prefer psborrow, cite posterity.","code":""},{"path":"https://genentech.github.io/psborrow2/main/articles/psborrow2.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Getting started with `psborrow2`","text":"Viele, K., Berry, S., Neuenschwander, B., Amzal, B., Chen, F., Enas, N., Hobbs, B., Ibrahim, J.G., Kinnersley, N., Lindborg, S., Micallef, S., Roychoudhury, S. Thompson, L. (2014), Use historical control data assessing treatment effects clinical trials. Pharmaceut. Statist., 13: 41‚Äì54.","code":""},{"path":"https://genentech.github.io/psborrow2/main/articles/simulation_study.html","id":"bringing-your-own-simulated-data","dir":"Articles","previous_headings":"","what":"Bringing your own simulated data","title":"Conduct a simulation study","text":"‚Äôll start showing conduct simulation study bring simulated data. execute simulation study data, need build object class Simulation using function create_simulation_obj(). Let‚Äôs look arguments create_simulation_obj() consider one--one :","code":"create_simulation_obj(   data_matrix_list,   outcome,   borrowing,   covariate,   treatment )"},{"path":"https://genentech.github.io/psborrow2/main/articles/simulation_study.html","id":"data_matrix_list","dir":"Articles","previous_headings":"Bringing your own simulated data","what":"data_matrix_list","title":"Conduct a simulation study","text":"data_matrix_list input data using simulation study using function sim_data_list(). Let‚Äôs simulate data together sake example. ‚Äôll use simsurv package generate survival data three scenarios: true hazard ratio (HR) treatment effect 0.6, 0.8, 1.0. Similarly ‚Äôll look three drift HR scenarios: 0.5, 1.0, 1.5.","code":""},{"path":"https://genentech.github.io/psborrow2/main/articles/simulation_study.html","id":"data_list","dir":"Articles","previous_headings":"Bringing your own simulated data > data_matrix_list","what":"data_list","title":"Conduct a simulation study","text":"Looking arguments sim_data_list(), first argument, data_list requires list lists matrices. list matrices represent different data generation scenario, difference true HR. Therefore, let‚Äôs create object data_list considers combinations true HRs 0.6, 0.8, 1.0 drift HRs 0.5, 1.0, 1.5. gives us 9 total scenarios, ‚Äôll simulate 20 datasets within scenario. can see, data_list list list matrices, correct format inputting sim_data_list(): lowest level matrices simulated data:","code":"library(simsurv) library(survival)  # Simulate a single matrix sim_single_matrix <- function(true_hr = 0.6,                               drift_hr = 1.0,                               n = 600) {   # Create a data frame with the subject IDs and treatment covariate   cov <- data.frame(     id = 1:n,     trt = rbinom(n, 1, 0.5)   )   cov$ext <- ifelse(cov$trt == 1L, 0L, rbinom(sum(cov$trt), 1, 0.5))    # Simulate the event times   dat <- simsurv(     lambdas = 0.1,     gammas = 1.5,     betas = c(       trt = log(true_hr),       ext = log(drift_hr)     ),     x = cov,     maxt = 5   )    dat$censor <- 1 - dat$status    # Merge the simulated event times onto covariate data frame   dat <- merge(cov, dat)    as.matrix(dat) }  # Set seed set.seed(112233)  # Create data list data_list <- list(   lapply(1:20, function(z) sim_single_matrix(true_hr = 0.6)),   lapply(1:20, function(z) sim_single_matrix(true_hr = 0.8)),   lapply(1:20, function(z) sim_single_matrix(true_hr = 1.0)),   lapply(1:20, function(z) sim_single_matrix(true_hr = 0.6, drift_hr = 1.5)),   lapply(1:20, function(z) sim_single_matrix(true_hr = 0.8, drift_hr = 1.5)),   lapply(1:20, function(z) sim_single_matrix(true_hr = 1.0, drift_hr = 1.5)),   lapply(1:20, function(z) sim_single_matrix(true_hr = 0.6, drift_hr = 0.5)),   lapply(1:20, function(z) sim_single_matrix(true_hr = 0.8, drift_hr = 0.5)),   lapply(1:20, function(z) sim_single_matrix(true_hr = 1.0, drift_hr = 0.5)) ) str(data_list) # List of 9 #  $ :List of 20 #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #  $ :List of 20 #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #  $ :List of 20 #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #  $ :List of 20 #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #  $ :List of 20 #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #  $ :List of 20 #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #  $ :List of 20 #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #  $ :List of 20 #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #  $ :List of 20 #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... #   ..$ : num [1:600, 1:6] 1 2 3 4 5 6 7 8 9 10 ... #   .. ..- attr(*, \"dimnames\")=List of 2 #   .. .. ..$ : NULL #   .. .. ..$ : chr [1:6] \"id\" \"trt\" \"ext\" \"eventtime\" ... head(data_list[[1]][[1]]) #      id trt ext eventtime status censor # [1,]  1   1   0  3.006226      1      0 # [2,]  2   1   0  5.000000      0      1 # [3,]  3   0   1  1.112636      1      0 # [4,]  4   0   0  5.000000      0      1 # [5,]  5   1   0  3.906986      1      0 # [6,]  6   0   1  5.000000      0      1"},{"path":"https://genentech.github.io/psborrow2/main/articles/simulation_study.html","id":"guide","dir":"Articles","previous_headings":"Bringing your own simulated data > data_matrix_list","what":"guide","title":"Conduct a simulation study","text":"order summarize results different parameters simulation study, psborrow2 needs know simulation parameters differ. purpose argument guide, data.frame distinguishes simulation study parameters. Three columns required guide, though many can provided. three required columns : true treatment effect (case HR) true drift effect (case HR). Drift effects >1 mean external control arm experiences greater hazard internal control arm. name column indexes data_list varied true HR took three values: 0.6, 0.8, 1.0. also varied drift HR took three values: 0.5, 1.0, 1.5. guide therefore nine rows represent nine scenarios. pass c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L) onto index clarify data_list[[1L]] corresponds settings first row, data_list[[2L]] second row, .","code":"guide <- data.frame(   trueHR = rep(c(0.6, 0.8, 1.0), 3),   driftHR = rep(c(1.0, 1.5, 0.5), each = 3),   index = 1L:9L )  guide #   trueHR driftHR index # 1    0.6     1.0     1 # 2    0.8     1.0     2 # 3    1.0     1.0     3 # 4    0.6     1.5     4 # 5    0.8     1.5     5 # 6    1.0     1.5     6 # 7    0.6     0.5     7 # 8    0.8     0.5     8 # 9    1.0     0.5     9"},{"path":"https://genentech.github.io/psborrow2/main/articles/simulation_study.html","id":"effect-drift-and-index","dir":"Articles","previous_headings":"Bringing your own simulated data > data_matrix_list","what":"effect, drift, and index","title":"Conduct a simulation study","text":"last three inputs sim_data_list(), effect, drift, index column names guide correspond true treatment effect, true drift effect, index data_list items, respectively. study, \"trueHR\", \"driftHR\", \"index\". Putting together, can create object class SimDataList:","code":"sdl <- sim_data_list(   data_list,   guide,   \"trueHR\",   \"driftHR\",   \"index\" )  sdl # SimDataList object with  9  different scenarios #   trueHR driftHR index n_datasets_per_param # 1    0.6     1.0     1                   20 # 2    0.8     1.0     2                   20 # 3    1.0     1.0     3                   20 # 4    0.6     1.5     4                   20 # 5    0.8     1.5     5                   20 # 6    1.0     1.5     6                   20 # 7    0.6     0.5     7                   20 # 8    0.8     0.5     8                   20 # 9    1.0     0.5     9                   20"},{"path":"https://genentech.github.io/psborrow2/main/articles/simulation_study.html","id":"outcome","dir":"Articles","previous_headings":"Bringing your own simulated data","what":"outcome","title":"Conduct a simulation study","text":"outcome pass information study outcomes. can pass either single Outcome class object (e.g., produced exp_surv_dist()), list Outcome class objects passed sim_outcome_list(). example, let‚Äôs just use single exponential distribution.","code":"out <- exp_surv_dist(   time_var = \"eventtime\",   cens_var = \"censor\",   baseline_prior = normal_prior(0, 1000) ) out # Outcome object with class ExponentialSurvDist  #  # Outcome variables: #    time_var    cens_var  # \"eventtime\"    \"censor\"  #  # Baseline prior: # Normal Distribution # Parameters: #  Stan  R    Value #  mu    mean    0  #  sigma sd   1000"},{"path":"https://genentech.github.io/psborrow2/main/articles/simulation_study.html","id":"borrowing","dir":"Articles","previous_headings":"Bringing your own simulated data","what":"borrowing","title":"Conduct a simulation study","text":"borrowing input information type borrowing want evaluate. can either single object class Borrowing list objects created sim_borrowing_list(). sake example, let‚Äôs assume interested comparing three borrowing scenarios: borrowing BDB, conservative prior BDB, aggressive prior create borrowing list sim_borrowing_list().","code":"sbl <- sim_borrowing_list(   list(     \"No borrowing\" = borrowing_details(\"No borrowing\", \"ext\"),     \"BDB, conservative prior\" = borrowing_details(\"BDB\", \"ext\", gamma_prior(0.001, 0.001)),     \"BDB, aggressive prior\" = borrowing_details(\"BDB\", \"ext\", gamma_prior(1.000, 0.001))   ) ) sbl # SimBorrowingList object with  3  different scenario(s) #        borrowing_scenario # 1            No borrowing # 2 BDB, conservative prior # 3   BDB, aggressive prior"},{"path":"https://genentech.github.io/psborrow2/main/articles/simulation_study.html","id":"covariate","dir":"Articles","previous_headings":"Bringing your own simulated data","what":"covariate","title":"Conduct a simulation study","text":"covariate information covariate adjustment details. can single instance class Covariates (add_covariates() list Covariates objects created sim_covariate_list() . also argument required create_simulation_obj. Let‚Äôs leave argument empty (.e., let‚Äôs adjust covariates).","code":""},{"path":"https://genentech.github.io/psborrow2/main/articles/simulation_study.html","id":"treatment","dir":"Articles","previous_headings":"Bringing your own simulated data","what":"treatment","title":"Conduct a simulation study","text":"treatment input treatment details simulation study. inputs, can single instance class (Treatment), list classes, created sim_treatment_list(). Let‚Äôs just use single instance:","code":"txd <- treatment_details(\"trt\", normal_prior(0, 1000))"},{"path":"https://genentech.github.io/psborrow2/main/articles/simulation_study.html","id":"create_simulation_obj","dir":"Articles","previous_headings":"Bringing your own simulated data","what":"create_simulation_obj()","title":"Conduct a simulation study","text":"Now relevant inputs create_simulation_obj(), let‚Äôs call function, generate compile Stan models ready sample behalf. Important: psborrow2 simulate Cartesian product unique list elements data_matrix_list, outcome, borrowing, covariate, treatment. data_matrix_list contains nine different study parameters therefore contains list length nine. borrowing three scenarios list length three. rest contain just one input (0 covariate, equivalent one scenario). means expect \\(9 \\times 3 = 27\\) combinations parameters. Let‚Äôs create simulation object class Simulation: get warning size simulation study, worried limiting MCMC samples example. can access guide see specific scenarios simulated show_guide():","code":"sim_obj <- create_simulation_obj(   data_matrix_list = sdl,   outcome = out,   borrowing = sbl,   treatment = txd ) sim_obj # Simulation object with  27  combinations and  540  analyses ready to sample.  This is a lot of combinations/analyses! Consider breaking the  study into different simulation objects. Or if you  prefer to use these combinations, call `mcmc_sample()` next. show_guide(sim_obj) #    trueHR driftHR index n_datasets_per_param outcome_scenario # 1     0.6     1.0     1                   20          default # 2     0.8     1.0     2                   20          default # 3     1.0     1.0     3                   20          default # 4     0.6     1.5     4                   20          default # 5     0.8     1.5     5                   20          default # 6     1.0     1.5     6                   20          default # 7     0.6     0.5     7                   20          default # 8     0.8     0.5     8                   20          default # 9     1.0     0.5     9                   20          default # 10    0.6     1.0     1                   20          default # 11    0.8     1.0     2                   20          default # 12    1.0     1.0     3                   20          default # 13    0.6     1.5     4                   20          default # 14    0.8     1.5     5                   20          default # 15    1.0     1.5     6                   20          default # 16    0.6     0.5     7                   20          default # 17    0.8     0.5     8                   20          default # 18    1.0     0.5     9                   20          default # 19    0.6     1.0     1                   20          default # 20    0.8     1.0     2                   20          default # 21    1.0     1.0     3                   20          default # 22    0.6     1.5     4                   20          default # 23    0.8     1.5     5                   20          default # 24    1.0     1.5     6                   20          default # 25    0.6     0.5     7                   20          default # 26    0.8     0.5     8                   20          default # 27    1.0     0.5     9                   20          default #         borrowing_scenario covariate_scenario treatment_scenario # 1             No borrowing      No adjustment            default # 2             No borrowing      No adjustment            default # 3             No borrowing      No adjustment            default # 4             No borrowing      No adjustment            default # 5             No borrowing      No adjustment            default # 6             No borrowing      No adjustment            default # 7             No borrowing      No adjustment            default # 8             No borrowing      No adjustment            default # 9             No borrowing      No adjustment            default # 10 BDB, conservative prior      No adjustment            default # 11 BDB, conservative prior      No adjustment            default # 12 BDB, conservative prior      No adjustment            default # 13 BDB, conservative prior      No adjustment            default # 14 BDB, conservative prior      No adjustment            default # 15 BDB, conservative prior      No adjustment            default # 16 BDB, conservative prior      No adjustment            default # 17 BDB, conservative prior      No adjustment            default # 18 BDB, conservative prior      No adjustment            default # 19   BDB, aggressive prior      No adjustment            default # 20   BDB, aggressive prior      No adjustment            default # 21   BDB, aggressive prior      No adjustment            default # 22   BDB, aggressive prior      No adjustment            default # 23   BDB, aggressive prior      No adjustment            default # 24   BDB, aggressive prior      No adjustment            default # 25   BDB, aggressive prior      No adjustment            default # 26   BDB, aggressive prior      No adjustment            default # 27   BDB, aggressive prior      No adjustment            default"},{"path":"https://genentech.github.io/psborrow2/main/articles/simulation_study.html","id":"mcmc_sample","dir":"Articles","previous_headings":"Bringing your own simulated data","what":"mcmc_sample()","title":"Conduct a simulation study","text":"Now ‚Äôve created simulation object, ‚Äôre ready call mcmc_sample() generate draws model. now, stick default inputs. Note unlike analysis single dataset, mcmc_sample() return CmdStanModel object applied simulation study object. Instead, returns class unique simulation study results: MCMCSimulationResult. Note one important additional argument mcmc_sample() simulation objects: posterior_quantiles. numeric vector length 2 specifies quantiles null coverage true coverage. instance, 95% credible coverage estimated posterior_quantiles = c(0.025, 0.975), default argument. evaluation took 7.6 minutes. Let‚Äôs look performance simulation study extracting data.frame summarizes results, get_results(): Let‚Äôs quickly visualize results using ggplot2:","code":"results <- mcmc_sample(   sim_obj,   iter_warmup = 400,   iter_sampling = 1000,   chains = 1L,   seed = 112233 ) results_df <- get_results(results) head(results_df) #   trueHR driftHR index n_datasets_per_param outcome_scenario borrowing_scenario # 1    0.6     1.0     1                   20          default       No borrowing # 2    0.8     1.0     2                   20          default       No borrowing # 3    1.0     1.0     3                   20          default       No borrowing # 4    0.6     1.5     4                   20          default       No borrowing # 5    0.8     1.5     5                   20          default       No borrowing # 6    1.0     1.5     6                   20          default       No borrowing #   covariate_scenario treatment_scenario   mse_mean   bias_mean null_coverage # 1      No adjustment            default 0.01135933 0.030999363          0.05 # 2      No adjustment            default 0.02445432 0.051906414          0.70 # 3      No adjustment            default 0.02643635 0.026549183          1.00 # 4      No adjustment            default 0.01034652 0.001293679          0.00 # 5      No adjustment            default 0.02356386 0.040341639          0.70 # 6      No adjustment            default 0.02964010 0.060640982          1.00 #   true_coverage # 1          1.00 # 2          1.00 # 3          1.00 # 4          0.95 # 5          0.95 # 6          1.00"},{"path":"https://genentech.github.io/psborrow2/main/articles/simulation_study.html","id":"summary-of-results","dir":"Articles","previous_headings":"Bringing your own simulated data","what":"Summary of results","title":"Conduct a simulation study","text":"example types visual summaries can provide simulation study results, let‚Äôs explore performance several select metrics:","code":""},{"path":"https://genentech.github.io/psborrow2/main/articles/simulation_study.html","id":"mse","dir":"Articles","previous_headings":"Bringing your own simulated data > Summary of results","what":"MSE","title":"Conduct a simulation study","text":"graph, clear impact aggressive borrowing depends greatly drift HR internal external controls.","code":"library(ggplot2) ggplot(results_df) +   geom_bar(aes(x = factor(trueHR), fill = borrowing_scenario, y = mse_mean), stat = \"identity\", position = \"dodge\") +   labs(     fill = \"Borrowing scenario\",     x = \"True HR\",     y = \"MSE (mean)\"   ) +   facet_wrap(~ paste0(\"drift HR = \", driftHR)) +   scale_fill_manual(values = c(\"#29339B\", \"#74A4BC\", \"#B6D6CC\"))"},{"path":"https://genentech.github.io/psborrow2/main/articles/simulation_study.html","id":"null-coverage","dir":"Articles","previous_headings":"Bringing your own simulated data > Summary of results","what":"Null coverage","title":"Conduct a simulation study","text":"Null coverage refers proportion specified credible intervals (case, 95% credible intervals) contain null effect (1.0). true hazard ratio 1.0, refers type II error proportion.  type II error proportion higher true hazard ratio 0.8 generally borrowing used. true hazard ratio equal 1.0, refers compliment type error proportion, can use derive type error:","code":"ggplot(results_df[results_df$trueHR != 1.0, ]) +   geom_bar(aes(x = factor(trueHR), fill = borrowing_scenario, y = null_coverage),     stat = \"identity\", position = \"dodge\"   ) +   labs(     fill = \"Borrowing scenario\",     x = \"True HR\",     y = \"Type II error\"   ) +   facet_wrap(~ paste0(\"drift HR = \", driftHR)) +   scale_fill_manual(values = c(\"#29339B\", \"#74A4BC\", \"#B6D6CC\")) ggplot(results_df[results_df$trueHR == 1.0, ]) +   geom_bar(aes(x = factor(driftHR), fill = borrowing_scenario, y = 1 - null_coverage),     stat = \"identity\", position = \"dodge\"   ) +   labs(     fill = \"Borrowing scenario\",     x = \"drift HR\",     y = \"Type I error\"   ) +   scale_fill_manual(values = c(\"#29339B\", \"#74A4BC\", \"#B6D6CC\"))"},{"path":"https://genentech.github.io/psborrow2/main/articles/simulation_study.html","id":"true-coverage","dir":"Articles","previous_headings":"Bringing your own simulated data > Summary of results","what":"True coverage","title":"Conduct a simulation study","text":"True coverage refers proportion simulations contain effect estimate interest.  looks like almost analyses captured effect estimate interest.","code":"ggplot(results_df) +   geom_bar(aes(x = factor(trueHR), fill = borrowing_scenario, y = true_coverage),     stat = \"identity\", position = \"dodge\"   ) +   labs(     fill = \"Borrowing scenario\",     x = \"True HR\",     y = \"True coverage\"   ) +   facet_wrap(~ paste0(\"drift HR = \", driftHR)) +   scale_fill_manual(values = c(\"#29339B\", \"#74A4BC\", \"#B6D6CC\"))"},{"path":"https://genentech.github.io/psborrow2/main/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Matt Secrest. Maintainer. Isaac Gravestock. Author. Craig Gower-Page. Contributor.","code":""},{"path":"https://genentech.github.io/psborrow2/main/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Gravestock (2022). psborrow2: Bayesian Dynamic Borrowing Simulation Study Analysis. R package version 0.0.0.9000.","code":"@Manual{,   title = {psborrow2: Bayesian Dynamic Borrowing Simulation Study and Analysis},   author = {Isaac Gravestock},   year = {2022},   note = {R package version 0.0.0.9000}, }"},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"Bayesian Dynamic Borrowing Simulation Study and Analysis","text":"psborrow2 package exists provide efficient framework users conduct Bayesian Dynamic Borrowing (BDB) analyses (information BDB, see Ibrahim et al., 2000; Hobbs et al., 2012; Schmidli et al., 2014; Lewis, et al., 2019). psborrow2 two main goals: First, facilitate simulation studies compare different borrowing parameters (e.g.¬†full borrowing, borrowing, BDB) trial BDB characteristics (e.g.¬†sample size, covariates) unified way; second, provide user-friendly interface applying BDB study results handles MCMC sampling behalf user. psborrow2 successor psborrow. Major updates psborrow2 include: New MCMC software (STAN) New user interface Additional functionality","code":""},{"path":"https://genentech.github.io/psborrow2/main/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Bayesian Dynamic Borrowing Simulation Study and Analysis","text":"psborrow2 currently development therefore used caution. can install development version via: Please note package requires cmdstanr installed.","code":"remotes::install_github(\"Genentech/psborrow2\")"},{"path":"https://genentech.github.io/psborrow2/main/reference/Analysis-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Analysis Class ‚Äî Analysis-class","title":"Analysis Class ‚Äî Analysis-class","text":"class defining Analysis details. Objects class Analysis created directly constructor create_analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/Analysis-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Analysis Class ‚Äî Analysis-class","text":"data_matrix matrix. data matrix, including covariates adjusted , relevant outcome variables, treatment arm external control arm flags. covariates Covariate. Object class Covariate output function covariate_details(). outcome Outcome. Object class Outcome output exp_surv_dist(), weib_ph_surv_dist(), logistic_bin_outcome(). borrowing Borrowing. Object class Borrowing output borrowing_details(). treatment Treatment. Object class Treatment output treatment_details(). model_string character. string contains full Stan model code compiled. model CmdStanModel. compiled Stan model output cmdstanr::cmdstan_model() ready_to_sample logical. object ready sample?","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/BernoulliPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"BernoulliPrior Class ‚Äî BernoulliPrior-class","title":"BernoulliPrior Class ‚Äî BernoulliPrior-class","text":"class defining bernoulli priors translated Stan code. Objects class BernoulliPrior created directly constructor bernoulli_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/BernoulliPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"BernoulliPrior Class ‚Äî BernoulliPrior-class","text":"stan_code character. Stan implementation prior, placeholders bernoulli stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (1). constraint character. Support prior distribution, \"<lower=0, upper=1>\". theta numeric. Probability ([0, 1]).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/BetaPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"BetaPrior Class ‚Äî BetaPrior-class","title":"BetaPrior Class ‚Äî BetaPrior-class","text":"class defining beta priors translated Stan code. Objects class BetaPrior created directly constructor beta_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/BetaPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"BetaPrior Class ‚Äî BetaPrior-class","text":"stan_code character. Stan implementation prior, placeholders beta stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (2). constraint character. Support prior distribution, \"<lower=0, upper=1>\". alpha numeric. Shape (>=0). beta numeric. Shape (>=0).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/BinaryOutcome-class.html","id":null,"dir":"Reference","previous_headings":"","what":"BinaryOutcome class ‚Äî BinaryOutcome-class","title":"BinaryOutcome class ‚Äî BinaryOutcome-class","text":"BinaryOutcome class","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/BinaryOutcome-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"BinaryOutcome class ‚Äî BinaryOutcome-class","text":"function_stan_code character. stan function code block containing text interpolate stan model. param_stan_code character. stan parameter code block containing text interpolate stan model. likelihood_stan_code character. stan model likelihood code block containing text interpolate stan model. n_param integer. Number ancillary parameters model estimate. param_priors list. Named list prior distributions ancillary parameters model. binary_var character. Variable used outcome BinaryOutcome objects. baseline_prior Prior. Object class Prior specifying prior distribution baseline outcome.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/Borrowing-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Borrowing Class ‚Äî Borrowing-class","title":"Borrowing Class ‚Äî Borrowing-class","text":"class defining borrowing details. Objects class Borrowing created directly constructor borrowing_details().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/Borrowing-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Borrowing Class ‚Äî Borrowing-class","text":"method character. type borrowing perform. must one : 'BDB', 'Full borrowing', 'borrowing'. See ?borrowing_details information. ext_flag_col character. name column data matrix corresponds external control flag (1/0 TRUE/FALSE). identifies patient belonging external control cohort. tau_prior Prior. Object class Prior defining hyperprior \"commensurability parameter\". See ?borrowing_details information.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/CauchyPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"CauchyPrior Class ‚Äî CauchyPrior-class","title":"CauchyPrior Class ‚Äî CauchyPrior-class","text":"class defining cauchy priors translated Stan code. Objects class CauchyPrior created directly constructor cauchy_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/CauchyPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"CauchyPrior Class ‚Äî CauchyPrior-class","text":"stan_code character. Stan implementation prior, placeholders cauchy stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (2). constraint character. Support prior distribution, (values allowed cauchy distribution). mu numeric. Location. sigma numeric. Scale (>0).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/Covariates-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Covariate Class ‚Äî Covariates-class","title":"Covariate Class ‚Äî Covariates-class","text":"class defining covariate details. Objects class Covariate created directly constructor add_covariates().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/Covariates-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Covariate Class ‚Äî Covariates-class","text":"covariates character. Names columns data matrix containing covariates adjusted outcome model. Note: external treatment flags go . priors. Either single object class Prior specifying prior distribution apply covariates named list distributions class Prior, one covariate","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/ExponentialPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"ExponentialPrior Class ‚Äî ExponentialPrior-class","title":"ExponentialPrior Class ‚Äî ExponentialPrior-class","text":"class defining exponential priors translated Stan code. Objects class ExponentialPrior created directly constructor exponential_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/ExponentialPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"ExponentialPrior Class ‚Äî ExponentialPrior-class","text":"stan_code character. Stan implementation prior, placeholders exponential Stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (1). constraint character. Support prior distribution, \"<lower=0>\". beta numeric. Inverse scale (>0).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/ExponentialSurvDist-class.html","id":null,"dir":"Reference","previous_headings":"","what":"ExponentialSurvDist Class ‚Äî ExponentialSurvDist-class","title":"ExponentialSurvDist Class ‚Äî ExponentialSurvDist-class","text":"class defining time--event survival analysis exponential survival distribution. Objects class ExponentialSurvDist created directly constructor exp_surv_dist().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/ExponentialSurvDist-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"ExponentialSurvDist Class ‚Äî ExponentialSurvDist-class","text":"function_stan_code character. stan function code block containing text interpolate stan model. Empty string ExponentialSurvDist. param_stan_code character. stan parameter code block containing text interpolate stan model. Empty string ExponentialSurvDist. likelihood_stan_code character. stan model likelihood code block containing text interpolate stan model. n_param integer. Number ancillary parameters model estimate (0). param_priors list. Named list prior distributions ancillary parameters model. Empty ExponentialSurvDist. time_var character. Variable used time TimeToEvent objects. cens_var character. Variable used censoring TimeToEvent objects. baseline_prior Prior. Object class Prior specifying prior distribution baseline outcome.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/GammaPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"GammaPrior Class ‚Äî GammaPrior-class","title":"GammaPrior Class ‚Äî GammaPrior-class","text":"class defining gamma priors translated Stan code. Objects class GammaPrior created directly constructor gamma_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/GammaPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"GammaPrior Class ‚Äî GammaPrior-class","text":"stan_code character. Stan implementation prior, placeholders gamma stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (2). constraint character. Support prior distribution, \"<lower=0>\". alpha numeric. Shape (>0). beta numeric. Inverse scale (>=0).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/LogisticBinaryOutcome-class.html","id":null,"dir":"Reference","previous_headings":"","what":"LogisticBinaryOutcome class ‚Äî LogisticBinaryOutcome-class","title":"LogisticBinaryOutcome class ‚Äî LogisticBinaryOutcome-class","text":"class defining logistic regression binary outcome translated Stan code. Objects class LogisticBinaryOutcome created directly constructor logistic_bin_outcome().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/LogisticBinaryOutcome-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"LogisticBinaryOutcome class ‚Äî LogisticBinaryOutcome-class","text":"function_stan_code character. stan function code block containing text interpolate stan model. Empty string LogisticBinaryOutcome. param_stan_code character. stan parameter code block containing text interpolate stan model. Empty string LogisticBinaryOutcome. likelihood_stan_code character. stan model likelihood code block containing text interpolate stan model. n_param integer. Number ancillary parameters model estimate (0). param_priors list. Named list prior distributions ancillary parameters model. Empty LogisticBinaryOutcome. binary_var character. Variable used outcome LogisticBinaryOutcome objects. baseline_prior Prior. Object class Prior specifying prior distribution baseline outcome.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/MCMCSimulationResult-class.html","id":null,"dir":"Reference","previous_headings":"","what":"MCMCSimulationResult Class ‚Äî MCMCSimulationResult-class","title":"MCMCSimulationResult Class ‚Äî MCMCSimulationResult-class","text":"class defining Simulation study results. Objects class MCMCSimulationResult created directly mcmc_sample().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/MCMCSimulationResult-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"MCMCSimulationResult Class ‚Äî MCMCSimulationResult-class","text":"results data.frame. results simulation study summarized data.frame cmd_stan_models list. List lists CmdStanmodels corresponding different parameters Simulation@guide different datasets Simulation@data_matrix_list.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/NormalPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"NormalPrior Class ‚Äî NormalPrior-class","title":"NormalPrior Class ‚Äî NormalPrior-class","text":"class defining normal priors translated Stan code. Objects class NormalPrior created directly constructor normal_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/NormalPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"NormalPrior Class ‚Äî NormalPrior-class","text":"stan_code character. Stan implementation prior, placeholders normal stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (2). constraint character. Support prior distribution, (values allowed normal distribution). mu numeric. Location. sigma numeric. Scale (>0).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/Outcome-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Outcome class ‚Äî Outcome-class","title":"Outcome class ‚Äî Outcome-class","text":"Outcome class","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/PoissonPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"PoissonPrior Class ‚Äî PoissonPrior-class","title":"PoissonPrior Class ‚Äî PoissonPrior-class","text":"class defining poisson priors translated Stan code. Objects class PoissonPrior created directly constructor poisson_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/PoissonPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"PoissonPrior Class ‚Äî PoissonPrior-class","text":"stan_code character. Stan implementation prior, placeholders poisson stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (1). constraint character. Support prior distribution, \"<lower=0>\". lambda numeric. Rate (>0).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/Prior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior Class ‚Äî Prior-class","title":"Prior Class ‚Äî Prior-class","text":"class defining priors translated Stan code. Objects class Prior created directly one specific prior class constructors.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/Prior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Prior Class ‚Äî Prior-class","text":"stan_code character. Stan implementation prior, placeholders parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters. constraint character. Support prior distribution expressed Stan constraint, e.g. \"<lower=0, upper=1>\".","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/SimBorrowingList-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimBorrowingList Class ‚Äî SimBorrowingList-class","title":"SimBorrowingList Class ‚Äî SimBorrowingList-class","text":"class borrowing details part simulation study. Objects class SimBorrowingList created directly constructor sim_borrowing_list().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimBorrowingList-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimBorrowingList Class ‚Äî SimBorrowingList-class","text":"borrowing_list named list object class Borrowing, one object parameter variation.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimCovariateList-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimCovariateList Class ‚Äî SimCovariateList-class","title":"SimCovariateList Class ‚Äî SimCovariateList-class","text":"class covariate details part simulation study. Objects class SimCovariateList created directly constructor sim_covariate_list().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimCovariateList-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimCovariateList Class ‚Äî SimCovariateList-class","text":"covariate_list named list object class Covariate, one object parameter variation.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimCovariates-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimCovariates Class ‚Äî SimCovariates-class","title":"SimCovariates Class ‚Äî SimCovariates-class","text":"class specifying covariate distributions covariance simulation studies.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimCovariates-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimCovariates Class ‚Äî SimCovariates-class","text":"covariates list. List covariate mean values probabilities generated bin_var() (class SimVarBin cont_var() (class SimVarCont). covariance_internal matrix. Covariance matrix binarization internal patients. covariance_external matrix. Covariance matrix binarization external patients.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimDataList-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimDataList Class ‚Äî SimDataList-class","title":"SimDataList Class ‚Äî SimDataList-class","text":"class defining generated data use part simulation study. Objects class SimDataList created directly constructor sim_data_list().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimDataList-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimDataList Class ‚Äî SimDataList-class","text":"data_list list lists matrices. lists highest level differ parameters used generate data. matrices lowest level different iterations data generation parameters. guide data.frame. guide contains information parameters differ highest level data_list. effect character. column guide corresponds true treatment effect estimate (hazard ratio odds ratio). drift character. column guide corresponds drift external internal control arms. drift >1 means external arm experiences greater effects. index character. column guide corresponds index parameter situations data_list.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimOutcomeList-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimOutcomeList Class ‚Äî SimOutcomeList-class","title":"SimOutcomeList Class ‚Äî SimOutcomeList-class","text":"class outcome details part simulation study. Objects class SimOutcomeList created directly constructor sim_outcome_list().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimOutcomeList-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimOutcomeList Class ‚Äî SimOutcomeList-class","text":"outcome_list named list object class Outcome, one object parameter variation.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimSampleSize-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimSampleSize Class ‚Äî SimSampleSize-class","title":"SimSampleSize Class ‚Äî SimSampleSize-class","text":"class creating matrices simulation studies containing flags specifying whether patient concurrent trial (ext = 0 concurrent trial, ext = 1 historical data) whether patient experimental therapy (trt = 0 experimental therapy, trt = 1 experimental therapy).","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimSampleSize-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimSampleSize Class ‚Äî SimSampleSize-class","text":"n_internal_control integer. Number patients simulated internal control arm. n_external_control integer. Number patients simulated external control arm. n_internal_experimental integer. Number patients simulated internal experimental arm. mat matrix. Matrix two columns, ext (flag external data source) trt (flag receiving experimental treatment)","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimTreatmentList-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimTreatmentList Class ‚Äî SimTreatmentList-class","title":"SimTreatmentList Class ‚Äî SimTreatmentList-class","text":"class treatment details part simulation study. Objects class SimTreatmentList created directly constructor sim_treatment_list().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimTreatmentList-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimTreatmentList Class ‚Äî SimTreatmentList-class","text":"treatment_list named list object class Treatment, one object parameter variation.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimVar-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimVar Class ‚Äî SimVar-class","title":"SimVar Class ‚Äî SimVar-class","text":"parent class defining covariates created simulation study calls add_covariates().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimVarBin-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimVarBin class ‚Äî SimVarBin-class","title":"SimVarBin class ‚Äî SimVarBin-class","text":"constructor making objects class SimVarBin. Objects class SimVarBin used hold proportions binary variables specified simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimVarBin-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimVarBin class ‚Äî SimVarBin-class","text":"prob_internal numeric. Proportion internal arms. prob_external numeric. Proportion external arm. mu_internal_before_bin numeric. Mean value covariate binarization internal arms. mu_external_before_bin numeric. Mean value covariate binarization external arm. printval_int numeric. Value print summarize internal arms. printval_ext numeric. Value print summarize external arm. type_string character. 'binary'","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/SimVarCont-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimVarCont class ‚Äî SimVarCont-class","title":"SimVarCont class ‚Äî SimVarCont-class","text":"constructor making objects class SimVarCont. Objects class SimVarCont used hold mean values continuous variables specified simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/SimVarCont-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimVarCont class ‚Äî SimVarCont-class","text":"mu_internal numeric. Mean covariate value internal arms. mu_external numeric. Mean covariate value external arm. printval_int numeric. Value print summarize internal arms. printval_ext numeric. Value print summarize external arm. type_string character. 'continuous'","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/Simulation-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulation Class ‚Äî Simulation-class","title":"Simulation Class ‚Äî Simulation-class","text":"class defining Simulation study details. Objects class Simulation created directly constructor create_simulation_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/Simulation-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Simulation Class ‚Äî Simulation-class","text":"data_matrix_list SimDataList. list lists data matrices created sim_data_list(). outcome SimOutcomeList. List Outcome objects created sim_outcome_list(). borrowing SimBorrowingList. List Borrowing objects created sim_borrowing_list(). covariate SimCovariateList NULL. List Covariate objects created sim_covariate_list() NULL (covariate adjustment). treatment SimTreatmentList. List Treatment objects created sim_treatment_list(). guide data.frame. Data.frame containing information combinations evaluated. n_combos integer. Number combinations parameters evaluated. n_analyses integer. Number analyses (combos x datasets performed). `analysis_obj_list` list. List analysis objects indexed according guide.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/TimeToEvent-class.html","id":null,"dir":"Reference","previous_headings":"","what":"TimeToEvent class ‚Äî TimeToEvent-class","title":"TimeToEvent class ‚Äî TimeToEvent-class","text":"TimeToEvent class","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/TimeToEvent-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"TimeToEvent class ‚Äî TimeToEvent-class","text":"function_stan_code character. stan function code block containing text interpolate stan model. param_stan_code character. stan parameter code block containing text interpolate stan model. likelihood_stan_code character. stan model likelihood code block containing text interpolate stan model. n_param integer. Number ancillary parameters model estimate. param_priors list. Named list prior distributions ancillary parameters model. time_var character. Variable used time TimeToEvent objects. cens_var character. Variable used censoring TimeToEvent objects. baseline_prior Prior. Object class Prior specifying prior distribution baseline outcome.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/Treatment-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Treatment Class ‚Äî Treatment-class","title":"Treatment Class ‚Äî Treatment-class","text":"class defining treatment details. Objects class Treatment created directly constructor treatment_details().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/Treatment-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Treatment Class ‚Äî Treatment-class","text":"trt_flag_col character. Character specifying name column model matrix corresponds treatment flag (1/0 TRUE/FALSE). identifies patients belonging experimental treatment arm. trt_prior Prior. Object class Prior specifying prior distribution log effect estimate (log hazard ratio time event endpoints log odds ratio binary endpoints).","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/UniformPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"UniformPrior Class ‚Äî UniformPrior-class","title":"UniformPrior Class ‚Äî UniformPrior-class","text":"class defining uniform priors translated Stan code. Objects class UniformPrior created directly constructor uniform_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/UniformPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"UniformPrior Class ‚Äî UniformPrior-class","text":"stan_code character. Stan implementation prior, placeholders uniform stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (2). constraint character. Support prior distribution, \"<lower=alpha, upper=beta>\". alpha numeric. Lower bound. beta numeric. Upper bound (>alpha).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/WeibullPHSurvDist-class.html","id":null,"dir":"Reference","previous_headings":"","what":"WeibullPHSurvDist Class ‚Äî WeibullPHSurvDist-class","title":"WeibullPHSurvDist Class ‚Äî WeibullPHSurvDist-class","text":"class defining time--event survival analysis Weibull proportional hazards survival distribution. Objects class WeibullPHSurvDist created directly constructor weib_ph_surv_dist().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/WeibullPHSurvDist-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"WeibullPHSurvDist Class ‚Äî WeibullPHSurvDist-class","text":"function_stan_code character. Stan function code block containing text interpolate Stan model. param_stan_code character. Stan parameter code block containing text interpolate Stan model. likelihood_stan_code character. Stan model likelihood code block containing text interpolate Stan model. n_param integer. Number ancillary parameters model estimate (1). param_priors list. Named list prior distributions ancillary parameters model. time_var character. Variable used time TimeToEvent objects. cens_var character. Variable used censoring TimeToEvent objects. baseline_prior Prior. Object class Prior specifying prior distribution baseline outcome.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/add_covariates.html","id":null,"dir":"Reference","previous_headings":"","what":"Add Covariates for Model Adjustment ‚Äî add_covariates","title":"Add Covariates for Model Adjustment ‚Äî add_covariates","text":"Specify column names adjustment variables model matrix prior distributions model parameters covariates (.e., betas)","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/add_covariates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add Covariates for Model Adjustment ‚Äî add_covariates","text":"","code":"add_covariates(covariates, priors)"},{"path":"https://genentech.github.io/psborrow2/main/reference/add_covariates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add Covariates for Model Adjustment ‚Äî add_covariates","text":"covariates character. Names columns data matrix containing covariates adjusted outcome model. Note: external treatment flags go . priors Either single object class Prior specifying prior distribution apply covariates named list distributions class Prior, one covariate","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/add_covariates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add Covariates for Model Adjustment ‚Äî add_covariates","text":"Object class Covariates.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/add_covariates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add Covariates for Model Adjustment ‚Äî add_covariates","text":"","code":"add_covariates(   covariates = c(\"a\", \"b\"),   priors = list(     \"a\" = normal_prior(0, 1),     \"b\" = normal_prior(0, 2)   ) ) #> Covariate object with priors for variables: #> a, b  #>  #> Prior for a: #> Normal Distribution #> Parameters: #>  Stan  R    Value #>  mu    mean 0     #>  sigma sd   1     #>  #> Prior for b: #> Normal Distribution #> Parameters: #>  Stan  R    Value #>  mu    mean 0     #>  sigma sd   2     #>"},{"path":"https://genentech.github.io/psborrow2/main/reference/bernoulli_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior bernoulli distribution ‚Äî bernoulli_prior","title":"Prior bernoulli distribution ‚Äî bernoulli_prior","text":"Prior bernoulli distribution","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/bernoulli_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior bernoulli distribution ‚Äî bernoulli_prior","text":"","code":"bernoulli_prior(theta)"},{"path":"https://genentech.github.io/psborrow2/main/reference/bernoulli_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior bernoulli distribution ‚Äî bernoulli_prior","text":"theta numeric. Probability ([0, 1]).","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/bernoulli_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior bernoulli distribution ‚Äî bernoulli_prior","text":"Object class BernoulliPrior.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/bernoulli_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior bernoulli distribution ‚Äî bernoulli_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/bernoulli-distribution.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/bernoulli_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior bernoulli distribution ‚Äî bernoulli_prior","text":"","code":"bp <- bernoulli_prior(0.23)"},{"path":"https://genentech.github.io/psborrow2/main/reference/beta_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior beta distribution ‚Äî beta_prior","title":"Prior beta distribution ‚Äî beta_prior","text":"Prior beta distribution","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/beta_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior beta distribution ‚Äî beta_prior","text":"","code":"beta_prior(alpha, beta)"},{"path":"https://genentech.github.io/psborrow2/main/reference/beta_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior beta distribution ‚Äî beta_prior","text":"alpha numeric. Shape (>=0). beta numeric. Shape (>=0).","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/beta_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior beta distribution ‚Äî beta_prior","text":"Object class BetaPrior","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/beta_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior beta distribution ‚Äî beta_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/beta-distribution.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/beta_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior beta distribution ‚Äî beta_prior","text":"","code":"bp <- beta_prior(9, 235)"},{"path":"https://genentech.github.io/psborrow2/main/reference/bin_var.html","id":null,"dir":"Reference","previous_headings":"","what":"Create binary covariate ‚Äî bin_var","title":"Create binary covariate ‚Äî bin_var","text":"Create object class SimVarBin hold proportions binary variables specified simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/bin_var.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create binary covariate ‚Äî bin_var","text":"","code":"bin_var(   prob_internal,   prob_external,   mu_internal_before_bin = 0,   mu_external_before_bin = 0 )"},{"path":"https://genentech.github.io/psborrow2/main/reference/bin_var.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create binary covariate ‚Äî bin_var","text":"prob_internal numeric. Proportion internal arms. prob_external numeric. Proportion external arm. mu_internal_before_bin numeric. Mean value covariate binarization internal arms. default 0. See details information. mu_external_before_bin numeric. Mean value covariate binarization external arm. default 0. See details information.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/bin_var.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create binary covariate ‚Äî bin_var","text":"function contains information necessary create binary covariates part simulation study. binary covariates created binarizing multivariate normal distributions achieve probabilities specified prob_internal prob_external. user may choose change default mean value variable prior binarization specifying mu_internal_before_bin mu_external_before_bin ensure correct scales used covariance matrix, though ultimate proportions depend prob_internal prob_external. default values mu_internal_before_bin mu_external_before_bin 0, recommended change without good reason.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/bin_var.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create binary covariate ‚Äî bin_var","text":"","code":"cv1 <- bin_var(0.50, 0.80) #> Loading required namespace: testthat cv2 <- bin_var(.95, .92)"},{"path":"https://genentech.github.io/psborrow2/main/reference/borrowing_details.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify Borrowing Model ‚Äî borrowing_details","title":"Specify Borrowing Model ‚Äî borrowing_details","text":"Specify type borrowing , Bayesian Dynamic Borrowing, set hyperprior commensurability parameter tau.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/borrowing_details.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify Borrowing Model ‚Äî borrowing_details","text":"","code":"borrowing_details(method, ext_flag_col, tau_prior = NULL)"},{"path":"https://genentech.github.io/psborrow2/main/reference/borrowing_details.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify Borrowing Model ‚Äî borrowing_details","text":"method character. type borrowing perform. must one : 'BDB', 'Full borrowing', 'borrowing'. See Details information. ext_flag_col character. name column data matrix corresponds external control flag (1/0 TRUE/FALSE). identifies patient belonging external control cohort. tau_prior Object class Prior defining hyperprior \"commensurability parameter\". See Details information.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/borrowing_details.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify Borrowing Model ‚Äî borrowing_details","text":"Object class Borrowing.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/borrowing_details.html","id":"method","dir":"Reference","previous_headings":"","what":"Method","title":"Specify Borrowing Model ‚Äî borrowing_details","text":"method argument specifies type borrowing implemented. currently three types borrowing supported: 'BDB' Bayesian Dynamic Borrowing. Bayesian Dynamic Borrowing, external control information borrowed extent outcomes (.e., log hazard rates log odds) similar external internal control populations. See Viele et. al. 2014. 'Full borrowing' pooling historical concurrent controls. distinction patients internal external control arms. ext_flag_col must still specified, used. 'borrowing' evaluating internal comparison, ignoring historical controls. Note method filter model matrix based values ext_flag_col. Though ultimate model specification 'Full borrowing' 'borrowing', available options facilitate comparison methods.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/borrowing_details.html","id":"external-control","dir":"Reference","previous_headings":"","what":"External Control","title":"Specify Borrowing Model ‚Äî borrowing_details","text":"ext_flag_col argument refers column data matrix contains flag indicating patient external control cohort. column used 'Full borrowing', must still specified.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/borrowing_details.html","id":"tau-prior","dir":"Reference","previous_headings":"","what":"Tau Prior","title":"Specify Borrowing Model ‚Äî borrowing_details","text":"tau_prior argument specifies hyperprior precision parameter commonly referred commensurability parameter. See Viele et. al. 2014 details. hyperprior determines (along comparability outcomes internal external controls) much borrowing external control group performed. Example hyperpriors include largely uninformative inverse gamma distributions [e.g., gamma_prior(alpha = .001, beta = .001)] well informative distributions [e.g., gamma_prior(alpha = 1, beta = .001)], though distribution \\(x \\(0, \\infty)\\) can used. Distributions density higher values \\(x\\) (.e., higher precision) lead borrowing.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/borrowing_details.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Specify Borrowing Model ‚Äî borrowing_details","text":"Viele, K., Berry, S., Neuenschwander, B., Amzal, B., Chen, F., Enas, N., Hobbs, B., Ibrahim, J.G., Kinnersley, N., Lindborg, S., Micallef, S., Roychoudhury, S. Thompson, L. (2014), Use historical control data assessing treatment effects clinical trials. Pharmaceut. Statist., 13: 41--54. doi:10.1002/pst.1589","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/borrowing_details.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Specify Borrowing Model ‚Äî borrowing_details","text":"","code":"sb <- borrowing_details(   method = \"BDB\",   ext_flag_col = \"ext\",   tau_prior = gamma_prior(0.001, 0.001) )"},{"path":"https://genentech.github.io/psborrow2/main/reference/cauchy_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior cauchy distribution ‚Äî cauchy_prior","title":"Prior cauchy distribution ‚Äî cauchy_prior","text":"Prior cauchy distribution","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/cauchy_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior cauchy distribution ‚Äî cauchy_prior","text":"","code":"cauchy_prior(mu, sigma)"},{"path":"https://genentech.github.io/psborrow2/main/reference/cauchy_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior cauchy distribution ‚Äî cauchy_prior","text":"mu numeric. Location. sigma numeric. Scale (>0).","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/cauchy_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior cauchy distribution ‚Äî cauchy_prior","text":"Object class CauchyPrior.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/cauchy_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior cauchy distribution ‚Äî cauchy_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/cauchy-distribution.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/cauchy_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior cauchy distribution ‚Äî cauchy_prior","text":"","code":"cp <- cauchy_prior(1, 1)"},{"path":"https://genentech.github.io/psborrow2/main/reference/check_cmdstanr.html","id":null,"dir":"Reference","previous_headings":"","what":"Check Stan ‚Äî check_cmdstanr","title":"Check Stan ‚Äî check_cmdstanr","text":"Check whether cmdstanr available prints version logistic example.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/check_cmdstanr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check Stan ‚Äî check_cmdstanr","text":"","code":"check_cmdstanr()"},{"path":"https://genentech.github.io/psborrow2/main/reference/check_cmdstanr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check Stan ‚Äî check_cmdstanr","text":"","code":"check_cmdstanr() #> cmdstan version:  #> [1] \"2.30.1\" #> Example program: #> data { #>   int<lower=0> N; #>   int<lower=0> K; #>   array[N] int<lower=0, upper=1> y; #>   matrix[N, K] X; #> } #> parameters { #>   real alpha; #>   vector[K] beta; #> } #> model { #>   target += normal_lpdf(alpha | 0, 1); #>   target += normal_lpdf(beta | 0, 1); #>   target += bernoulli_logit_glm_lpmf(y | X, alpha, beta); #> } #> generated quantities { #>   vector[N] log_lik; #>   for (n in 1 : N) { #>     log_lik[n] = bernoulli_logit_lpmf(y[n] | alpha + X[n] * beta); #>   } #> } #> Example program results: #> Running MCMC with 1 chain... #>  #> Chain 1 Iteration:    1 / 2000 [  0%]  (Warmup)  #> Chain 1 Iteration:  100 / 2000 [  5%]  (Warmup)  #> Chain 1 Iteration:  200 / 2000 [ 10%]  (Warmup)  #> Chain 1 Iteration:  300 / 2000 [ 15%]  (Warmup)  #> Chain 1 Iteration:  400 / 2000 [ 20%]  (Warmup)  #> Chain 1 Iteration:  500 / 2000 [ 25%]  (Warmup)  #> Chain 1 Iteration:  600 / 2000 [ 30%]  (Warmup)  #> Chain 1 Iteration:  700 / 2000 [ 35%]  (Warmup)  #> Chain 1 Iteration:  800 / 2000 [ 40%]  (Warmup)  #> Chain 1 Iteration:  900 / 2000 [ 45%]  (Warmup)  #> Chain 1 Iteration: 1000 / 2000 [ 50%]  (Warmup)  #> Chain 1 Iteration: 1001 / 2000 [ 50%]  (Sampling)  #> Chain 1 Iteration: 1100 / 2000 [ 55%]  (Sampling)  #> Chain 1 Iteration: 1200 / 2000 [ 60%]  (Sampling)  #> Chain 1 Iteration: 1300 / 2000 [ 65%]  (Sampling)  #> Chain 1 Iteration: 1400 / 2000 [ 70%]  (Sampling)  #> Chain 1 Iteration: 1500 / 2000 [ 75%]  (Sampling)  #> Chain 1 Iteration: 1600 / 2000 [ 80%]  (Sampling)  #> Chain 1 Iteration: 1700 / 2000 [ 85%]  (Sampling)  #> Chain 1 Iteration: 1800 / 2000 [ 90%]  (Sampling)  #> Chain 1 Iteration: 1900 / 2000 [ 95%]  (Sampling)  #> Chain 1 Iteration: 2000 / 2000 [100%]  (Sampling)  #> Chain 1 finished in 0.1 seconds. #>    variable   mean median   sd  mad     q5    q95 rhat ess_bulk ess_tail #>  lp__       -65.96 -65.70 1.32 1.24 -68.57 -64.33 1.00      610      634 #>  alpha        0.37   0.36 0.22 0.23   0.00   0.75 1.00     1054      697 #>  beta[1]     -0.67  -0.66 0.25 0.27  -1.08  -0.26 1.00      972      699 #>  beta[2]     -0.28  -0.29 0.22 0.21  -0.65   0.07 1.00      850      504 #>  beta[3]      0.70   0.70 0.27 0.28   0.26   1.15 1.00      789      523 #>  log_lik[1]  -0.52  -0.52 0.10 0.10  -0.70  -0.36 1.00     1002      608 #>  log_lik[2]  -0.39  -0.37 0.14 0.15  -0.66  -0.19 1.00      961      588 #>  log_lik[3]  -0.51  -0.47 0.22 0.20  -0.90  -0.22 1.00      880      597 #>  log_lik[4]  -0.44  -0.42 0.15 0.15  -0.72  -0.23 1.00      840      506 #>  log_lik[5]  -1.19  -1.16 0.28 0.25  -1.71  -0.78 1.01      876      805 #>  #>  # showing 10 of 105 rows (change via 'max_rows' argument or 'cmdstanr_max_rows' option)"},{"path":"https://genentech.github.io/psborrow2/main/reference/check_data_matrix_has_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Check Data Matrix for Required Columns ‚Äî check_data_matrix_has_columns","title":"Check Data Matrix for Required Columns ‚Äî check_data_matrix_has_columns","text":"Check Analysis object's data_matrix required variables.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/check_data_matrix_has_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check Data Matrix for Required Columns ‚Äî check_data_matrix_has_columns","text":"","code":"check_data_matrix_has_columns(object)"},{"path":"https://genentech.github.io/psborrow2/main/reference/check_data_matrix_has_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check Data Matrix for Required Columns ‚Äî check_data_matrix_has_columns","text":"object Analysis. Object check.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/check_data_matrix_has_columns.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check Data Matrix for Required Columns ‚Äî check_data_matrix_has_columns","text":"stop() columns missing.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/check_data_matrix_has_columns.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check Data Matrix for Required Columns ‚Äî check_data_matrix_has_columns","text":"","code":"anls <- psborrow2:::.analysis_obj(   data_matrix = example_matrix,   covariates = add_covariates(     covariates = c(\"cov1\", \"cov2\"),     priors = normal_prior(0, 1000)   ),   outcome = exp_surv_dist(     \"time\",     \"cnsr\",     baseline_prior = normal_prior(0, 1000)   ),   borrowing = borrowing_details(     \"BDB\",     \"ext\",     exponential_prior(.001)   ),   treatment = treatment_details(     \"trt\",     normal_prior(0, 1000)   ),   ready_to_sample = FALSE )  check_data_matrix_has_columns(anls)"},{"path":"https://genentech.github.io/psborrow2/main/reference/cont_var.html","id":null,"dir":"Reference","previous_headings":"","what":"Create continuous covariate ‚Äî cont_var","title":"Create continuous covariate ‚Äî cont_var","text":"Create object class SimVarCont hold mean values continuous variables specified simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/cont_var.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create continuous covariate ‚Äî cont_var","text":"","code":"cont_var(mu_internal, mu_external)"},{"path":"https://genentech.github.io/psborrow2/main/reference/cont_var.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create continuous covariate ‚Äî cont_var","text":"mu_internal numeric. Mean covariate value internal arms. mu_external numeric. Mean covariate value external arm.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/cont_var.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create continuous covariate ‚Äî cont_var","text":"","code":"cv1 <- cont_var(0.5, 1) cv2 <- cont_var(10, 10)"},{"path":"https://genentech.github.io/psborrow2/main/reference/create_analysis_obj.html","id":null,"dir":"Reference","previous_headings":"","what":"Compile MCMC sampler using STAN and create analysis object ‚Äî create_analysis_obj","title":"Compile MCMC sampler using STAN and create analysis object ‚Äî create_analysis_obj","text":"Compile MCMC sampler using STAN create analysis object","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/create_analysis_obj.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compile MCMC sampler using STAN and create analysis object ‚Äî create_analysis_obj","text":"","code":"create_analysis_obj(   data_matrix,   covariates = NULL,   outcome,   borrowing,   treatment,   quiet = FALSE )"},{"path":"https://genentech.github.io/psborrow2/main/reference/create_analysis_obj.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compile MCMC sampler using STAN and create analysis object ‚Äî create_analysis_obj","text":"data_matrix matrix. data matrix, including covariates adjusted , relevant outcome variables, treatment arm external control arm flags. covariates Covariates. Object class Covariates output function add_covariates(). outcome Outcome. Object class Outcome output exp_surv_dist(), weib_ph_surv_dist(), logistic_bin_outcome(). borrowing Borrowing. Object class Borrowing output borrowing_details(). treatment Treatment. Object class Treatment output treatment_details(). quiet logical. Whether suppress messages (TRUE) (FALSE, default)","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/create_analysis_obj.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compile MCMC sampler using STAN and create analysis object ‚Äî create_analysis_obj","text":"Object class Analysis.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/create_analysis_obj.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compile MCMC sampler using STAN and create analysis object ‚Äî create_analysis_obj","text":"","code":"anls <- create_analysis_obj(   data_matrix = example_matrix,   covariates = add_covariates(     covariates = c(\"cov1\", \"cov2\"),     priors = normal_prior(0, 1000)   ),   outcome = exp_surv_dist(     \"time\",     \"cnsr\",     baseline_prior = normal_prior(0, 1000)   ),   borrowing = borrowing_details(     \"BDB\",     \"ext\",     exponential_prior(.001)   ),   treatment = treatment_details(     \"trt\",     normal_prior(0, 1000)   ) ) #> Inputs look good. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`."},{"path":"https://genentech.github.io/psborrow2/main/reference/create_data_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Data Matrix ‚Äî create_data_matrix","title":"Create Data Matrix ‚Äî create_data_matrix","text":"Creates matrix suitable create_analysis_obj(). Creates dummy variables factors allows transformations covariates specified formula.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/create_data_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Data Matrix ‚Äî create_data_matrix","text":"","code":"create_data_matrix(   data,   outcome,   trt_flag_col,   ext_flag_col,   covariates = NULL )"},{"path":"https://genentech.github.io/psborrow2/main/reference/create_data_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Data Matrix ‚Äî create_data_matrix","text":"data data.frame. Data containing variables outcome character. outcome variable binary outcomes time censoring variables. trt_flag_col character. treatment indicator variable. ext_flag_col character. external cohort indicator. covariates character formula. covariates model adjustment.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/create_data_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Data Matrix ‚Äî create_data_matrix","text":"Invisibly returns matrix containing variables pass create_analysis_obj(). Prints names covariates columns use add_covariates().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/create_data_matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create Data Matrix ‚Äî create_data_matrix","text":"","code":"dat <- survival::diabetic dat$ext <- dat$trt == 0 & dat$id > 1000 data_mat <- create_data_matrix(   dat,   outcome = c(\"time\", \"status\"),   trt_flag_col = \"trt\",   ext_flag_col = \"ext\",   covariates = ~ age + laser + log(risk) ) #> Call `add_covariates()` with `covariates =  c(\"age\", \"laserargon\", \"log(risk)\") ` data_mat #>      time status trt extTRUE age laserargon log(risk) #> 1   46.23      0   0       0  28          1  2.197225 #> 2   46.23      0   1       0  28          1  2.197225 #> 3   42.50      0   1       0  12          0  2.079442 #> 4   31.30      1   0       0  12          0  1.791759 #> 5   42.27      0   1       0   9          0  2.397895 #> 6   42.27      0   0       0   9          0  2.397895 #> 7   20.60      0   0       0   9          0  2.397895 #> 8   20.60      0   1       0   9          0  2.397895 #> 9    0.30      1   0       0  13          0  2.302585 #> 10  38.77      0   1       0  13          0  2.197225 #> 11  65.23      0   1       0  12          0  2.197225 #> 12  54.27      1   0       0  12          0  2.197225 #> 13  63.50      0   1       0   8          0  2.079442 #> 14  10.80      1   0       0   8          0  1.791759 #> 15  23.17      0   1       0  12          0  2.079442 #> 16  23.17      0   0       0  12          0  2.197225 #> 17   1.47      0   1       0  16          0  2.197225 #> 18   1.47      0   0       0  16          0  2.302585 #> 19  58.07      0   1       0  21          1  2.197225 #> 20  13.83      1   0       0  21          1  2.197225 #> 21  48.53      0   0       0  23          1  2.197225 #> 22  46.43      1   1       0  23          1  2.197225 #> 23  44.40      0   1       0  44          1  2.397895 #> 24   7.90      1   0       0  44          1  2.484907 #> 25  39.57      0   0       0  47          1  1.791759 #> 26  39.57      0   1       0  47          1  2.397895 #> 27  30.83      1   1       0  48          1  1.791759 #> 28  38.57      1   0       0  48          1  2.302585 #> 29  66.27      0   1       0  26          1  2.302585 #> 30  14.10      1   0       0  26          1  2.197225 #> 31   6.90      1   0       0  10          0  2.302585 #> 32  20.17      1   1       0  10          0  2.197225 #> 33  41.40      1   0       0  23          1  2.197225 #> 34  58.43      0   1       0  23          1  2.484907 #> 35  58.20      0   1       0   5          0  2.197225 #> 36  58.20      0   0       0   5          0  2.197225 #> 37  57.43      0   1       0  46          1  1.791759 #> 38  57.43      0   0       0  46          1  2.079442 #> 39  56.03      0   1       0   5          0  2.397895 #> 40  56.03      0   0       0   5          0  2.484907 #> 41  67.53      0   0       0  13          0  2.197225 #> 42  67.53      0   1       0  13          0  2.197225 #> 43  61.40      0   1       0  45          1  2.197225 #> 44   0.60      1   0       0  45          1  2.484907 #> 45  10.27      1   1       0  11          0  2.302585 #> 46   1.63      1   0       0  11          0  2.302585 #> 47  66.20      0   0       0   1          0  2.397895 #> 48  66.20      0   1       0   1          0  2.484907 #> 49  13.83      1   0       0  10          0  2.197225 #> 50   5.67      1   1       0  10          0  2.484907 #> 51  58.83      0   1       0  12          0  2.197225 #> 52  29.97      1   0       0  12          0  2.397895 #> 53  60.27      0   1       0  36          1  2.197225 #> 54  26.37      1   0       0  36          1  2.397895 #> 55   1.33      1   0       0  53          1  2.484907 #> 56   5.77      1   1       0  53          1  2.302585 #> 57  35.53      1   0       0  10          0  2.397895 #> 58   5.90      1   1       0  10          0  2.397895 #> 59  21.90      1   0       0  25          1  2.197225 #> 60  25.63      1   1       0  25          1  2.302585 #> 61  14.80      1   0       0  14          0  2.197225 #> 62  33.90      1   1       0  14          0  2.197225 #> 63   6.20      1   0       0  16          0  2.079442 #> 64   1.73      1   1       0  16          0  2.302585 #> 65  22.00      1   0       0  38          1  2.079442 #> 66  46.90      0   1       0  38          1  2.197225 #> 67  31.13      0   0       0  14          0  2.197225 #> 68  31.13      0   1       0  14          0  2.197225 #> 69  22.00      1   0       0  10          0  2.397895 #> 70  30.20      1   1       0  10          0  2.197225 #> 71  70.90      0   0       0  17          0  2.484907 #> 72  70.90      0   1       0  17          0  2.397895 #> 73  25.80      1   1       0  44          1  2.397895 #> 74  13.87      1   0       0  44          1  2.079442 #> 75  48.30      1   0       0  21          1  2.197225 #> 76   5.73      1   1       0  21          1  2.197225 #> 77  53.43      0   0       0  19          0  2.197225 #> 78  53.43      0   1       0  19          0  2.197225 #> 79   1.90      1   1       0  13          0  2.302585 #> 80  51.10      0   0       0  13          0  2.484907 #> 81   9.90      1   0       0  40          1  2.197225 #> 82   9.90      1   1       0  40          1  2.302585 #> 83  34.20      0   1       0   9          0  2.079442 #> 84  34.20      0   0       0   9          0  2.484907 #> 85   2.67      1   0       0  48          1  2.484907 #> 86  46.73      0   1       0  48          1  2.302585 #> 87  18.73      0   1       0  42          1  2.302585 #> 88  13.83      1   0       0  42          1  2.302585 #> 89  32.03      0   1       0  24          1  2.397895 #> 90   4.27      1   0       0  24          1  2.302585 #> 91  13.90      1   0       0  55          1  2.302585 #> 92  69.87      0   1       0  55          1  2.302585 #> 93  66.80      0   0       0  17          0  2.197225 #> 94  66.80      0   1       0  17          0  2.397895 #> 95  64.73      0   1       0   5          0  2.197225 #> 96  64.73      0   0       0   5          0  2.079442 #> 97   1.70      1   1       0   6          0  2.302585 #> 98   1.70      1   0       0   6          0  1.791759 #> 99   1.77      1   1       0  19          0  2.197225 #> 100 43.03      1   0       0  19          0  2.484907 #> 101 29.03      0   1       0  12          0  2.079442 #> 102 29.03      0   0       0  12          0  2.079442 #> 103 56.57      0   0       0  45          1  2.197225 #> 104 56.57      0   1       0  45          1  2.197225 #> 105  8.30      1   0       0  27          1  2.302585 #> 106  8.30      1   1       0  27          1  2.197225 #> 107 21.57      0   1       0  43          1  2.079442 #> 108 18.43      1   0       0  43          1  2.197225 #> 109 31.57      0   0       0   4          0  2.079442 #> 110 31.57      0   1       0   4          0  2.197225 #> 111 31.63      1   0       0  45          1  2.197225 #> 112 31.63      0   1       0  45          1  2.302585 #> 113 39.77      0   1       0  32          1  2.397895 #> 114 39.77      0   0       0  32          1  2.302585 #> 115  6.53      1   0       0   3          0  2.397895 #> 116 18.70      1   1       0   3          0  2.302585 #> 117 18.90      0   1       0  14          0  2.079442 #> 118 18.90      0   0       0  14          0  2.197225 #> 119 56.80      0   1       0  13          0  2.302585 #> 120 22.23      1   0       0  13          0  2.079442 #> 121 55.60      0   1       0  15          0  2.302585 #> 122 14.00      1   0       0  15          0  2.197225 #> 123 42.17      1   0       0  10          0  2.302585 #> 124 42.17      1   1       0  10          0  2.197225 #> 125  5.33      1   0       0   6          0  2.197225 #> 126 10.70      0   1       0   6          0  2.197225 #> 127 59.80      1   0       0  17          0  2.302585 #> 128 66.33      0   1       0  17          0  2.197225 #> 129  5.83      1   0       0  37          1  2.397895 #> 130 52.33      0   1       0  37          1  2.484907 #> 131 58.17      0   1       0  18          0  2.197225 #> 132  2.17      1   0       0  18          0  2.484907 #> 133 48.43      1   0       0  13          0  2.079442 #> 134 14.30      1   1       0  13          0  2.197225 #> 135 25.83      0   0       0  14          0  2.302585 #> 136 25.83      0   1       0  14          0  2.484907 #> 137 45.40      0   1       0  12          0  2.302585 #> 138 45.40      0   0       0  12          0  2.197225 #> 139 47.60      0   1       0   9          0  1.791759 #> 140 47.60      0   0       0   9          0  2.197225 #> 141  9.60      1   0       0  11          0  2.302585 #> 142 13.33      1   1       0  11          0  2.484907 #> 143 42.10      0   0       0  10          0  2.397895 #> 144 42.10      0   1       0  10          0  2.397895 #> 145 39.93      0   1       0   5          0  2.197225 #> 146 39.93      0   0       0   5          0  1.791759 #> 147  7.60      1   0       0  15          0  2.484907 #> 148 14.27      1   1       0  15          0  2.197225 #> 149  1.80      1   0       0   7          0  2.484907 #> 150 34.57      1   1       0   7          0  2.484907 #> 151  4.30      1   0       0   2          0  2.484907 #> 152 65.80      0   1       0   2          0  2.197225 #> 153 12.20      1   0       0  22          1  1.791759 #> 154  4.10      1   1       0  22          1  2.079442 #> 155 60.93      0   0       0   5          0  2.484907 #> 156 60.93      0   1       0   5          0  2.397895 #> 157 57.20      0   0       0   4          0  2.197225 #> 158 57.20      0   1       0   4          0  2.302585 #> 159 38.07      0   1       0  27          1  2.079442 #> 160 12.73      1   0       0  27          1  2.302585 #> 161 54.10      0   1       0  53          1  2.397895 #> 162 54.10      1   0       0  53          1  2.397895 #> 163 59.27      0   1       0  10          0  2.197225 #> 164  9.40      1   0       0  10          0  2.484907 #> 165  9.90      1   0       0  13          0  2.302585 #> 166 21.57      1   1       0  13          0  2.484907 #> 167 54.10      0   0       0  12          0  2.079442 #> 168 54.10      0   1       0  12          0  2.079442 #> 169 50.47      0   0       0  24          1  2.397895 #> 170 50.47      0   1       0  24          1  2.197225 #> 171 46.17      0   0       0  17          0  2.484907 #> 172 46.17      0   1       0  17          0  2.197225 #> 173 46.30      0   0       0   8          0  2.397895 #> 174 46.30      0   1       0   8          0  2.397895 #> 175 38.83      0   1       0  58          1  2.484907 #> 176 38.83      0   0       0  58          1  2.197225 #> 177 44.60      0   0       0  17          0  2.197225 #> 178 44.60      0   1       0  17          0  2.197225 #> 179 43.07      0   0       0  12          0  2.197225 #> 180 43.07      0   1       0  12          0  2.484907 #> 181 40.03      0   0       0  25          1  2.079442 #> 182 26.23      1   1       0  25          1  2.079442 #> 183 41.60      0   1       0  15          0  2.197225 #> 184 18.03      1   0       0  15          0  2.397895 #> 185 38.07      0   0       0  21          1  2.397895 #> 186 38.07      0   1       0  21          1  2.397895 #> 187 65.23      0   1       0  20          1  2.197225 #> 188 65.23      0   0       0  20          1  2.197225 #> 189  7.07      1   1       0  23          1  2.302585 #> 190 66.77      0   0       0  23          1  2.484907 #> 191 13.77      1   0       0  13          0  2.484907 #> 192 13.77      1   1       0  13          0  2.302585 #> 193  9.63      1   0       0  45          1  2.484907 #> 194  9.63      0   1       0  45          1  2.302585 #> 195 46.23      0   1       0   5          0  2.484907 #> 196 46.23      0   0       0   5          0  2.484907 #> 197  1.50      1   0       0   8          0  2.484907 #> 198 45.73      0   1       0   8          0  2.197225 #> 199 33.63      1   0       0  30          1  2.197225 #> 200 33.63      1   1       0  30          1  2.197225 #> 201 40.17      0   0       0   7          0  1.791759 #> 202 40.17      0   1       0   7          0  2.079442 #> 203 27.60      1   0       0  39          1  2.302585 #> 204 63.33      1   1       0  39          1  2.397895 #> 205 38.47      1   1       0  26          1  2.302585 #> 206  1.63      1   0       0  26          1  2.302585 #> 207 55.23      0   1       0  50          1  1.791759 #> 208 55.23      0   0       0  50          1  2.079442 #> 209 25.30      1   0       0  34          1  2.302585 #> 210 52.77      0   1       0  34          1  1.791759 #> 211 46.20      1   0       0  10          0  2.079442 #> 212 57.17      0   1       0  10          0  1.791759 #> 213  9.87      0   1       0  40          1  2.302585 #> 214  1.70      1   0       0  40          1  2.302585 #> 215 57.90      0   0       0  13          0  2.397895 #> 216 57.90      0   1       0  13          0  2.484907 #> 217  5.90      0   0       0   7          0  2.484907 #> 218  5.90      0   1       0   7          0  2.302585 #> 219 32.20      0   0       0  11          0  2.484907 #> 220 32.20      0   1       0  11          0  2.484907 #> 221 10.33      1   1       0  13          0  2.197225 #> 222  0.83      1   0       0  13          0  2.302585 #> 223 50.90      0   0       0   9          0  2.197225 #> 224  6.13      1   1       0   9          0  2.484907 #> 225 25.93      1   0       0   5          0  2.197225 #> 226 43.67      0   1       0   5          0  2.197225 #> 227 38.30      0   0       0  10          0  2.197225 #> 228 38.30      0   1       0  10          0  2.197225 #> 229 38.77      0   1       0  23          1  2.197225 #> 230 19.40      1   0       0  23          1  2.302585 #> 231 21.97      1   0       0   2          0  2.302585 #> 232 38.07      0   1       0   2          0  2.484907 #> 233 38.30      0   1       0  12          0  2.397895 #> 234 38.30      0   0       0  12          0  2.397895 #> 235 70.03      0   0       0   7          0  2.197225 #> 236 26.20      1   1       0   7          0  2.302585 #> 237 18.03      1   0       1  13          0  2.397895 #> 238 62.57      0   1       0  13          0  2.197225 #> 239  1.57      1   0       1  50          1  2.197225 #> 240 13.83      1   1       0  50          1  2.079442 #> 241 46.50      0   1       0  20          1  2.484907 #> 242 13.37      1   0       1  20          1  2.484907 #> 243  1.97      1   0       1  15          0  2.197225 #> 244 11.07      1   1       0  15          0  2.397895 #> 245 42.47      0   1       0  30          1  2.197225 #> 246 22.20      1   0       1  30          1  2.197225 #> 247 38.73      0   0       1  32          1  2.197225 #> 248 38.73      0   1       0  32          1  2.197225 #> 249 51.13      0   0       1  39          1  2.397895 #> 250 51.13      0   1       0  39          1  2.397895 #> 251 46.50      0   0       1   4          0  2.397895 #> 252  6.10      1   1       0   4          0  2.302585 #> 253 11.30      1   0       1   3          0  2.397895 #> 254  2.10      1   1       0   3          0  2.302585 #> 255 17.73      1   1       0  10          0  2.302585 #> 256 42.30      0   0       1  10          0  2.197225 #> 257 26.47      0   0       1   6          0  2.302585 #> 258 26.47      0   1       0   6          0  2.197225 #> 259 10.77      0   1       0  15          0  2.397895 #> 260 10.77      0   0       1  15          0  2.397895 #> 261 55.33      0   1       0  33          1  2.484907 #> 262 55.33      0   0       1  33          1  2.302585 #> 263 58.67      0   1       0  15          0  2.197225 #> 264 58.67      0   0       1  15          0  2.197225 #> 265  4.97      1   0       1  44          1  2.197225 #> 266 12.93      1   1       0  44          1  2.302585 #> 267 26.47      1   0       1  48          1  2.484907 #> 268 54.20      0   1       0  48          1  2.197225 #> 269 49.57      0   0       1   4          0  2.197225 #> 270 49.57      0   1       0   4          0  2.302585 #> 271  9.87      1   0       1  46          1  2.397895 #> 272 24.43      1   1       0  46          1  2.484907 #> 273 50.23      0   0       1  25          1  2.197225 #> 274 50.23      0   1       0  25          1  2.197225 #> 275 30.40      1   0       1  12          0  2.484907 #> 276 13.97      1   1       0  12          0  2.397895 #> 277 43.33      0   1       0  12          0  1.791759 #> 278 43.33      1   0       1  12          0  2.302585 #> 279 42.23      0   1       0  26          1  2.079442 #> 280 42.23      0   0       1  26          1  2.079442 #> 281 74.93      0   0       1  11          0  2.197225 #> 282 74.93      0   1       0  11          0  2.197225 #> 283 66.93      0   1       0  36          1  2.197225 #> 284 66.93      0   0       1  36          1  2.197225 #> 285 73.43      0   1       0  12          0  2.197225 #> 286 73.43      0   0       1  12          0  2.197225 #> 287 67.47      0   1       0  50          1  2.484907 #> 288 38.57      1   0       1  50          1  2.397895 #> 289  3.67      0   1       0  44          1  2.197225 #> 290  3.67      1   0       1  44          1  2.302585 #> 291 67.03      0   0       1   8          0  2.197225 #> 292 48.87      1   1       0   8          0  2.302585 #> 293 65.60      0   1       0  14          0  2.197225 #> 294 65.60      0   0       1  14          0  2.197225 #> 295 15.83      1   0       1  18          0  2.302585 #> 296 15.83      0   1       0  18          0  2.302585 #> 297 20.07      0   1       0  56          1  2.397895 #> 298  8.83      1   0       1  56          1  2.079442 #> 299 67.43      0   0       1   9          0  2.197225 #> 300 67.43      0   1       0   9          0  2.302585 #> 301  1.47      0   1       0  15          0  2.197225 #> 302  1.47      0   0       1  15          0  1.791759 #> 303 62.93      0   1       0   5          0  2.397895 #> 304 22.13      1   0       1   5          0  2.197225 #> 305  6.30      1   1       0   1          0  2.197225 #> 306 56.97      0   0       1   1          0  2.397895 #> 307 59.70      0   1       0   1          0  2.302585 #> 308 18.93      1   0       1   1          0  2.302585 #> 309 19.00      1   0       1  14          0  2.197225 #> 310 13.80      1   1       0  14          0  2.302585 #> 311 55.13      0   1       0  57          1  1.791759 #> 312 55.13      0   0       1  57          1  1.791759 #> 313  5.43      1   0       1   8          0  2.397895 #> 314 13.57      1   1       0   8          0  2.397895 #> 315 42.20      0   1       0  33          1  2.397895 #> 316 42.20      0   0       1  33          1  2.397895 #> 317 38.27      0   0       1  46          1  2.197225 #> 318 38.27      0   1       0  46          1  2.302585 #> 319  7.10      0   1       0   3          0  2.079442 #> 320  7.10      1   0       1   3          0  2.484907 #> 321 26.17      1   0       1  35          1  2.397895 #> 322 63.63      0   1       0  35          1  2.397895 #> 323 24.73      1   0       1   8          0  2.397895 #> 324 59.00      0   1       0   8          0  2.397895 #> 325 54.37      0   1       0  30          1  2.197225 #> 326 54.37      0   0       1  30          1  2.302585 #> 327 54.60      0   1       0  51          1  2.079442 #> 328 10.97      1   0       1  51          1  2.484907 #> 329 21.10      1   0       1  42          1  2.197225 #> 330 63.87      0   1       0  42          1  2.197225 #> 331 62.37      0   1       0  20          1  2.197225 #> 332 43.70      1   0       1  20          1  2.079442 #> 333 62.80      0   0       1  23          1  2.197225 #> 334 62.80      0   1       0  23          1  2.397895 #> 335 63.33      0   1       0  22          1  2.397895 #> 336 14.37      1   0       1  22          1  2.197225 #> 337 58.53      0   0       1  25          1  2.197225 #> 338 58.53      0   1       0  25          1  2.197225 #> 339 58.07      0   0       1  45          1  2.397895 #> 340 58.07      0   1       0  45          1  2.484907 #> 341 58.50      0   0       1  20          1  2.197225 #> 342 58.50      0   1       0  20          1  2.302585 #> 343 14.37      0   0       1  41          1  2.197225 #> 344  1.50      1   1       0  41          1  2.197225 #> 345 54.73      0   1       0  19          0  2.484907 #> 346 38.40      1   0       1  19          0  2.302585 #> 347 50.63      0   1       0   4          0  2.484907 #> 348  2.83      1   0       1   4          0  2.397895 #> 349 51.10      0   0       1  36          1  2.197225 #> 350 51.10      0   1       0  36          1  2.302585 #> 351 49.93      0   1       0  20          1  2.197225 #> 352  6.57      1   0       1  20          1  2.197225 #> 353 46.27      0   1       0  24          1  2.197225 #> 354 46.27      1   0       1  24          1  2.197225 #> 355 10.60      0   1       0  28          1  2.197225 #> 356 10.60      0   0       1  28          1  2.302585 #> 357 42.77      0   1       0  51          1  2.079442 #> 358 42.77      0   0       1  51          1  2.484907 #> 359 34.37      1   1       0  16          0  2.197225 #> 360 42.27      0   0       1  16          0  2.302585 #> 361 42.07      0   1       0  16          0  2.302585 #> 362 42.07      0   0       1  16          0  2.302585 #> 363 38.77      0   0       1  10          0  2.197225 #> 364 38.77      0   1       0  10          0  2.197225 #> 365 61.83      1   0       1  20          1  2.484907 #> 366 74.97      0   1       0  20          1  2.197225 #> 367 66.97      0   0       1  10          0  2.484907 #> 368  6.57      1   1       0  10          0  2.302585 #> 369 38.87      1   1       0  16          0  1.791759 #> 370 68.30      0   0       1  16          0  1.791759 #> 371 46.63      1   0       1  10          0  2.197225 #> 372 42.43      1   1       0  10          0  2.397895 #> 373 67.07      0   1       0  11          0  2.197225 #> 374 67.07      0   0       1  11          0  2.197225 #> 375  2.70      1   1       0   1          0  2.302585 #> 376  2.70      0   0       1   1          0  2.484907 #> 377 63.80      0   0       1  17          0  2.079442 #> 378 63.80      0   1       0  17          0  1.791759 #> 379 32.63      0   0       1   7          0  2.197225 #> 380 32.63      0   1       0   7          0  2.197225 #> 381 62.00      0   1       0  29          1  2.302585 #> 382 62.00      0   0       1  29          1  2.079442 #> 383 54.80      0   0       1   5          0  2.302585 #> 384 13.10      1   1       0   5          0  2.397895 #> 385  8.00      0   0       1   1          0  2.079442 #> 386  8.00      0   1       0   1          0  2.079442 #> 387 42.33      1   0       1  22          1  2.397895 #> 388 51.60      0   1       0  22          1  2.484907 #> 389 49.97      0   1       0  33          1  2.197225 #> 390  2.90      1   0       1  33          1  2.302585 #> 391 45.90      0   1       0   3          0  2.302585 #> 392  1.43      1   0       1   3          0  2.302585 #> 393 41.93      0   1       0  32          1  2.197225 #> 394 41.93      0   0       1  32          1  2.197225"},{"path":"https://genentech.github.io/psborrow2/main/reference/create_simulation_obj.html","id":null,"dir":"Reference","previous_headings":"","what":"Compile MCMC sampler using STAN and create simulation object ‚Äî create_simulation_obj","title":"Compile MCMC sampler using STAN and create simulation object ‚Äî create_simulation_obj","text":"Compile MCMC sampler using STAN create simulation object","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/create_simulation_obj.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compile MCMC sampler using STAN and create simulation object ‚Äî create_simulation_obj","text":"","code":"create_simulation_obj(   data_matrix_list,   covariate = NULL,   outcome,   borrowing,   treatment,   quiet = TRUE )"},{"path":"https://genentech.github.io/psborrow2/main/reference/create_simulation_obj.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compile MCMC sampler using STAN and create simulation object ‚Äî create_simulation_obj","text":"data_matrix_list SimDataList. list lists data matrices created sim_data_list(). covariate SimCovariateList Covariate NULL. List Covariate objects created sim_covariate(), single Covariate object created add_covariates(), NULL (covariate adjustment). outcome SimOutcomeList Outcome. List Outcome objects created sim_outcome(), single Outcome object (e.g., created exp_surv_dist()). borrowing SimBorrowingList Borrowing. List Borrowing objects created sim_borrowing(), single Borrowing object created borrowing_details(). treatment SimTreatmentList Treatment. List Treatment objects created sim_treatment() single Treatment object created treatment_details(). quiet logical. Whether print messages (quiet = FALSE) (quiet = TRUE, default)","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/create_simulation_obj.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compile MCMC sampler using STAN and create simulation object ‚Äî create_simulation_obj","text":"Object class Simulation.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/create_simulation_obj.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compile MCMC sampler using STAN and create simulation object ‚Äî create_simulation_obj","text":"","code":"base_mat <- matrix(   c(     rep(0, 200), rep(0, 200), rep(1, 200),     rep(1, 200), rep(0, 200), rep(0, 200),     rep(0, 600)   ),   ncol = 3,   dimnames = list(NULL, c(\"ext\", \"trt\", \"driftOR\")) )  add_binary_endpoint <- function(odds_ratio,                                 base_matrix = base_mat) {   linear_predictor <- base_matrix[, \"trt\"] * log(odds_ratio)   prob <- 1 / (1 + exp(-linear_predictor))    bin_endpoint <- rbinom(     NROW(base_matrix),     1,     prob   )    cbind(base_matrix, matrix(bin_endpoint, ncol = 1, dimnames = list(NULL, \"ep\"))) }  data_list <- list(   list(add_binary_endpoint(1.5), add_binary_endpoint(1.5)),   list(add_binary_endpoint(2.5), add_binary_endpoint(2.5)) )  guide <- data.frame(   trueOR = c(1.5, 2.5),   driftOR = c(1.0, 1.0),   index = 1:2 )  sdl <- sim_data_list(   data_list = data_list,   guide = guide,   effect = \"trueOR\",   drift = \"driftOR\",   index = \"index\" )  sim_object <- create_simulation_obj(   data_matrix_list = sdl,   outcome = logistic_bin_outcome(\"ep\", normal_prior(0, 1000)),   borrowing = sim_borrowing_list(list(     full_borrowing = borrowing_details(\"Full borrowing\", \"ext\"),     bdb = borrowing_details(\"BDB\", \"ext\", exponential_prior(0.0001))   )),   treatment = treatment_details(\"trt\", normal_prior(0, 1000)) )"},{"path":"https://genentech.github.io/psborrow2/main/reference/example_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Example data matrix ‚Äî example_matrix","title":"Example data matrix ‚Äî example_matrix","text":"matrix containing data clinical trial treatment arm control arm, well data external control.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/example_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example data matrix ‚Äî example_matrix","text":"","code":"example_matrix"},{"path":"https://genentech.github.io/psborrow2/main/reference/example_matrix.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example data matrix ‚Äî example_matrix","text":"data frame 50 rows 6 variables: ext 0/1, flag external controls trt 0/1, flag treatment arm cov1 0/1, baseline covariate cov2 0/1, baseline covariate time numeric >0, survival time cnsr 0/1, censoring indicator resp 0/1, indicator respiratory outcome","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/example_surv.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulated Survival Data ‚Äî example_surv","title":"Simulated Survival Data ‚Äî example_surv","text":"data frame containing simulated data clinical trial treatment arm (n=200)control arm (n=158), well data external control (n=242).","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/example_surv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulated Survival Data ‚Äî example_surv","text":"","code":"example_surv"},{"path":"https://genentech.github.io/psborrow2/main/reference/example_surv.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Simulated Survival Data ‚Äî example_surv","text":"data frame 600 rows 6 variables: trt 0/1, flag treatment arm ext 0/1, flag external controls eventtime numeric >0, survival time status 0/1, event indicator censor 0/1, censoring indicator cov1 0/1, binary baseline covariate 1 cov2 integer [0, 15], baseline covariate 2 cov3 continuous numeric, baseline covariate 3","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/exp_surv_dist.html","id":null,"dir":"Reference","previous_headings":"","what":"Exponential survival distribution ‚Äî exp_surv_dist","title":"Exponential survival distribution ‚Äî exp_surv_dist","text":"Exponential survival distribution","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/exp_surv_dist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Exponential survival distribution ‚Äî exp_surv_dist","text":"","code":"exp_surv_dist(time_var, cens_var, baseline_prior)"},{"path":"https://genentech.github.io/psborrow2/main/reference/exp_surv_dist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Exponential survival distribution ‚Äî exp_surv_dist","text":"time_var character. Name time variable column model matrix cens_var character. Name censorship variable flag model matrix baseline_prior Prior. Object class Prior specifying prior distribution baseline outcome. See Details information.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/exp_surv_dist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Exponential survival distribution ‚Äî exp_surv_dist","text":"Object class ExponentialSurvDist.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/exp_surv_dist.html","id":"baseline-prior","dir":"Reference","previous_headings":"","what":"Baseline Prior","title":"Exponential survival distribution ‚Äî exp_surv_dist","text":"baseline_prior argument specifies prior distribution baseline log hazard rate. interpretation baseline_prior differs slightly methods selected borrowing_details(): 'BDB': baseline_prior Bayesian Dynamic Borrowing refers log hazard rate external control arm. 'Full borrowing' 'borrowing': baseline_prior borrowing methods refers log hazard rate internal control arm.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/exp_surv_dist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Exponential survival distribution ‚Äî exp_surv_dist","text":"","code":"es <- exp_surv_dist(   time_var = \"time\",   cens_var = \"cens\",   baseline_prior = normal_prior(0, 1000) )"},{"path":"https://genentech.github.io/psborrow2/main/reference/exponential_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior exponential distribution ‚Äî exponential_prior","title":"Prior exponential distribution ‚Äî exponential_prior","text":"Prior exponential distribution","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/exponential_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior exponential distribution ‚Äî exponential_prior","text":"","code":"exponential_prior(beta)"},{"path":"https://genentech.github.io/psborrow2/main/reference/exponential_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior exponential distribution ‚Äî exponential_prior","text":"beta numeric. Inverse scale (>0).","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/exponential_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior exponential distribution ‚Äî exponential_prior","text":"Object class ExponentialPrior.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/exponential_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior exponential distribution ‚Äî exponential_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/exponential-distribution.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/exponential_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior exponential distribution ‚Äî exponential_prior","text":"","code":"ep <- exponential_prior(1)"},{"path":"https://genentech.github.io/psborrow2/main/reference/gamma_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior gamma distribution ‚Äî gamma_prior","title":"Prior gamma distribution ‚Äî gamma_prior","text":"Prior gamma distribution","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/gamma_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior gamma distribution ‚Äî gamma_prior","text":"","code":"gamma_prior(alpha, beta)"},{"path":"https://genentech.github.io/psborrow2/main/reference/gamma_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior gamma distribution ‚Äî gamma_prior","text":"alpha numeric. Shape (>0). beta numeric. Inverse scale (>=0).","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/gamma_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior gamma distribution ‚Äî gamma_prior","text":"Object class GammaPrior.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/gamma_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior gamma distribution ‚Äî gamma_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/gamma-distribution.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/gamma_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior gamma distribution ‚Äî gamma_prior","text":"","code":"gp <- gamma_prior(0.001, 0.001)"},{"path":"https://genentech.github.io/psborrow2/main/reference/get_cmd_stan_models.html","id":null,"dir":"Reference","previous_headings":"","what":"Get CmdStanModel objects for MCMCSimulationResults ‚Äî get_cmd_stan_models","title":"Get CmdStanModel objects for MCMCSimulationResults ‚Äî get_cmd_stan_models","text":"Show CmdStanModel objects MCMCSimulationResults objects.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/get_cmd_stan_models.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get CmdStanModel objects for MCMCSimulationResults ‚Äî get_cmd_stan_models","text":"","code":"get_cmd_stan_models(object)  # S4 method for MCMCSimulationResult get_cmd_stan_models(object)"},{"path":"https://genentech.github.io/psborrow2/main/reference/get_cmd_stan_models.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get CmdStanModel objects for MCMCSimulationResults ‚Äî get_cmd_stan_models","text":"object MCMCSimulationResults object","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/get_covariate_constraints.html","id":null,"dir":"Reference","previous_headings":"","what":"Get constraints from a list of Priors ‚Äî get_covariate_constraints","title":"Get constraints from a list of Priors ‚Äî get_covariate_constraints","text":"Get constraints list Priors","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/get_covariate_constraints.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get constraints from a list of Priors ‚Äî get_covariate_constraints","text":"","code":"get_covariate_constraints(cov_obj)"},{"path":"https://genentech.github.io/psborrow2/main/reference/get_covariate_constraints.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get constraints from a list of Priors ‚Äî get_covariate_constraints","text":"cov_obj Covariates object.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/get_covariate_constraints.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get constraints from a list of Priors ‚Äî get_covariate_constraints","text":"matrix columns \"lower\" \"upper\" rows Prior.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/get_covariate_constraints.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get constraints from a list of Priors ‚Äî get_covariate_constraints","text":"","code":"psborrow2:::get_covariate_constraints(   add_covariates(     c(\"cov1\", \"cov2\", \"cov3\"),     list(       normal_prior(0, 10),       beta_prior(0.3, 0.3),       gamma_prior(30, 1)     )   ) ) #>      lower upper #> [1,]  -Inf   Inf #> [2,]     0     1 #> [3,]     0   Inf"},{"path":"https://genentech.github.io/psborrow2/main/reference/get_results.html","id":null,"dir":"Reference","previous_headings":"","what":"Get results for MCMCSimulationResults objects ‚Äî get_results","title":"Get results for MCMCSimulationResults objects ‚Äî get_results","text":"Get results data.frame MCMCSimulationResults objects.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/get_results.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get results for MCMCSimulationResults objects ‚Äî get_results","text":"","code":"get_results(object)  # S4 method for MCMCSimulationResult get_results(object)"},{"path":"https://genentech.github.io/psborrow2/main/reference/get_results.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get results for MCMCSimulationResults objects ‚Äî get_results","text":"object MCMCSimulationResults object","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/get_vars.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Variables ‚Äî get_vars","title":"Get Variables ‚Äî get_vars","text":"Gets data variable names object.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/get_vars.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Variables ‚Äî get_vars","text":"","code":"get_vars(object)  # S4 method for Covariates get_vars(object)  # S4 method for Treatment get_vars(object)  # S4 method for Borrowing get_vars(object)  # S4 method for TimeToEvent get_vars(object)  # S4 method for BinaryOutcome get_vars(object)  # S4 method for Analysis get_vars(object)  # S4 method for NULL get_vars(object)  # S4 method for SimTreatmentList get_vars(object)  # S4 method for SimOutcomeList get_vars(object)  # S4 method for SimBorrowingList get_vars(object)  # S4 method for SimCovariateList get_vars(object)  # S4 method for Simulation get_vars(object)"},{"path":"https://genentech.github.io/psborrow2/main/reference/get_vars.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Variables ‚Äî get_vars","text":"object Object","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/get_vars.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Variables ‚Äî get_vars","text":"character vector containing variable names","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/get_vars.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Variables ‚Äî get_vars","text":"","code":"get_vars(treatment_details(   trt_flag_col = \"treat_fl\",   trt_prior = normal_prior(0, 1000) )) #> trt_flag_col  #>   \"treat_fl\""},{"path":"https://genentech.github.io/psborrow2/main/reference/logistic_bin_outcome.html","id":null,"dir":"Reference","previous_headings":"","what":"Bernoulli distribution with logit parametrization ‚Äî logistic_bin_outcome","title":"Bernoulli distribution with logit parametrization ‚Äî logistic_bin_outcome","text":"Bernoulli distribution logit parametrization","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/logistic_bin_outcome.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Bernoulli distribution with logit parametrization ‚Äî logistic_bin_outcome","text":"","code":"logistic_bin_outcome(binary_var, baseline_prior)"},{"path":"https://genentech.github.io/psborrow2/main/reference/logistic_bin_outcome.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Bernoulli distribution with logit parametrization ‚Äî logistic_bin_outcome","text":"binary_var character. Name binary (1/0 TRUE/FALSE) outcome variable model matrix baseline_prior Prior. Object class Prior specifying prior distribution baseline outcome. See Details information.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/logistic_bin_outcome.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Bernoulli distribution with logit parametrization ‚Äî logistic_bin_outcome","text":"Object class LogisticBinaryOutcome.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/logistic_bin_outcome.html","id":"baseline-prior","dir":"Reference","previous_headings":"","what":"Baseline Prior","title":"Bernoulli distribution with logit parametrization ‚Äî logistic_bin_outcome","text":"baseline_prior argument specifies prior distribution baseline log odds. interpretation baseline_prior differs slightly methods selected borrowing_details(): 'BDB': baseline_prior Bayesian Dynamic Borrowing refers log odds external control arm. 'Full borrowing' 'borrowing': baseline_prior borrowing methods refers log odds internal control arm.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/logistic_bin_outcome.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Bernoulli distribution with logit parametrization ‚Äî logistic_bin_outcome","text":"","code":"lg <- logistic_bin_outcome(   binary_var = \"response\",   baseline_prior = normal_prior(0, 1000) )"},{"path":"https://genentech.github.io/psborrow2/main/reference/make_analysis_object_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Make list of analysis objects for class Simulation ‚Äî make_analysis_object_list","title":"Make list of analysis objects for class Simulation ‚Äî make_analysis_object_list","text":"Make list analysis objects class Simulation","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_analysis_object_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make list of analysis objects for class Simulation ‚Äî make_analysis_object_list","text":"","code":"make_analysis_object_list(simulation_obj, quiet = TRUE)"},{"path":"https://genentech.github.io/psborrow2/main/reference/make_analysis_object_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make list of analysis objects for class Simulation ‚Äî make_analysis_object_list","text":"simulation_obj Simulation. Object class Simulation created psborrow2:::.simulation_obj(). quiet logical. Whether print messages (quiet = FALSE) (quiet = TRUE, default)","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_analysis_object_list.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make list of analysis objects for class Simulation ‚Äî make_analysis_object_list","text":"list lists Analysis objects","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_analysis_object_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make list of analysis objects for class Simulation ‚Äî make_analysis_object_list","text":"","code":"base_mat <- matrix(   c(     rep(0, 200), rep(0, 200), rep(1, 200),     rep(1, 200), rep(0, 200), rep(0, 200),     rep(0, 600)   ),   ncol = 3,   dimnames = list(NULL, c(\"ext\", \"trt\", \"driftOR\")) )  add_binary_endpoint <- function(odds_ratio,                                 base_matrix = base_mat) {   linear_predictor <- base_matrix[, \"trt\"] * log(odds_ratio)   prob <- 1 / (1 + exp(-linear_predictor))    bin_endpoint <- rbinom(     NROW(base_matrix),     1,     prob   )    cbind(base_matrix, matrix(bin_endpoint, ncol = 1, dimnames = list(NULL, \"ep\"))) }  data_list <- list(   list(add_binary_endpoint(1.5), add_binary_endpoint(1.5)),   list(add_binary_endpoint(2.5), add_binary_endpoint(2.5)) )  guide <- data.frame(   trueOR = c(1.5, 2.5),   driftOR = c(1.0, 1.0),   index = 1:2 )  sdl <- sim_data_list(   data_list = data_list,   guide = guide,   effect = \"trueOR\",   drift = \"driftOR\",   index = \"index\" )  sim_object <- psborrow2:::.simulation_obj(   data_matrix_list = sdl,   outcome = sim_outcome_list(list(default = logistic_bin_outcome(\"ep\", normal_prior(0, 1000)))),   covariate = sim_covariate_list(covariate_list = list(`No adjustment` = NULL)),   borrowing = sim_borrowing_list(list(     full_borrowing = borrowing_details(\"Full borrowing\", \"ext\"),     bdb = borrowing_details(\"BDB\", \"ext\", exponential_prior(0.0001))   )),   treatment = sim_treatment_list(list(default = treatment_details(\"trt\", normal_prior(0, 1000)))) )  sim_object@guide <- Reduce(   merge,   init = sim_object@data_matrix_list@guide,   x = list(     sim_object@outcome@guide,     sim_object@borrowing@guide,     sim_object@covariate@guide,     sim_object@treatment@guide   ) )  sim_object@n_combos <- NROW(sim_object@guide) sim_object@n_analyses <- sum(sim_object@guide$n_datasets_per_param)  psborrow2:::make_analysis_object_list(sim_object) #> [[1]] #> [[1]][[1]] #> Analysis Object #>  #> Outcome model: LogisticBinaryOutcome  #> Outcome variable: ep  #>  #> Borrowing method: Full borrowing  #> External flag: ext  #>  #> Treatment variable: trt  #>  #> Data: Matrix with 600 observations  #>     -  200  internal controls #>     -  200  external controls  #>     -  200  internal experimental #>  #> Stan model compiled and ready to sample. #>  Call mcmc_sample() next. #> [[1]][[2]] #> Analysis Object #>  #> Outcome model: LogisticBinaryOutcome  #> Outcome variable: ep  #>  #> Borrowing method: Full borrowing  #> External flag: ext  #>  #> Treatment variable: trt  #>  #> Data: Matrix with 600 observations  #>     -  200  internal controls #>     -  200  external controls  #>     -  200  internal experimental #>  #> Stan model compiled and ready to sample. #>  Call mcmc_sample() next. #>  #> [[2]] #> [[2]][[1]] #> Analysis Object #>  #> Outcome model: LogisticBinaryOutcome  #> Outcome variable: ep  #>  #> Borrowing method: Full borrowing  #> External flag: ext  #>  #> Treatment variable: trt  #>  #> Data: Matrix with 600 observations  #>     -  200  internal controls #>     -  200  external controls  #>     -  200  internal experimental #>  #> Stan model compiled and ready to sample. #>  Call mcmc_sample() next. #> [[2]][[2]] #> Analysis Object #>  #> Outcome model: LogisticBinaryOutcome  #> Outcome variable: ep  #>  #> Borrowing method: Full borrowing  #> External flag: ext  #>  #> Treatment variable: trt  #>  #> Data: Matrix with 600 observations  #>     -  200  internal controls #>     -  200  external controls  #>     -  200  internal experimental #>  #> Stan model compiled and ready to sample. #>  Call mcmc_sample() next. #>  #> [[3]] #> [[3]][[1]] #> Analysis Object #>  #> Outcome model: LogisticBinaryOutcome  #> Outcome variable: ep  #>  #> Borrowing method: BDB  #> External flag: ext  #>  #> Treatment variable: trt  #>  #> Data: Matrix with 600 observations  #>     -  200  internal controls #>     -  200  external controls  #>     -  200  internal experimental #>  #> Stan model compiled and ready to sample. #>  Call mcmc_sample() next. #> [[3]][[2]] #> Analysis Object #>  #> Outcome model: LogisticBinaryOutcome  #> Outcome variable: ep  #>  #> Borrowing method: BDB  #> External flag: ext  #>  #> Treatment variable: trt  #>  #> Data: Matrix with 600 observations  #>     -  200  internal controls #>     -  200  external controls  #>     -  200  internal experimental #>  #> Stan model compiled and ready to sample. #>  Call mcmc_sample() next. #>  #> [[4]] #> [[4]][[1]] #> Analysis Object #>  #> Outcome model: LogisticBinaryOutcome  #> Outcome variable: ep  #>  #> Borrowing method: BDB  #> External flag: ext  #>  #> Treatment variable: trt  #>  #> Data: Matrix with 600 observations  #>     -  200  internal controls #>     -  200  external controls  #>     -  200  internal experimental #>  #> Stan model compiled and ready to sample. #>  Call mcmc_sample() next. #> [[4]][[2]] #> Analysis Object #>  #> Outcome model: LogisticBinaryOutcome  #> Outcome variable: ep  #>  #> Borrowing method: BDB  #> External flag: ext  #>  #> Treatment variable: trt  #>  #> Data: Matrix with 600 observations  #>     -  200  internal controls #>     -  200  external controls  #>     -  200  internal experimental #>  #> Stan model compiled and ready to sample. #>  Call mcmc_sample() next. #>"},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Make model string of Stan's data block ‚Äî make_model_string_data","title":"Make model string of Stan's data block ‚Äî make_model_string_data","text":"Create Stan string encompassed data {}","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make model string of Stan's data block ‚Äî make_model_string_data","text":"","code":"make_model_string_data(analysis_obj)"},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make model string of Stan's data block ‚Äî make_model_string_data","text":"analysis_obj Analysis. Object class Analysis created psborrow2:::.analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make model string of Stan's data block ‚Äî make_model_string_data","text":"glue  character containing text data block.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make model string of Stan's data block ‚Äî make_model_string_data","text":"","code":"anls_obj <- psborrow2:::.analysis_obj(   data_matrix = example_matrix,   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 100)),   borrowing = borrowing_details(     \"Full borrowing\",     \"ext\"   ),   treatment = treatment_details(\"trt\", normal_prior(0, 100)) )  psborrow2:::make_model_string_data(anls_obj) #> data { #> int<lower=0> N; #> vector[N] time; #> vector[N] cens; #> vector[N] trt; }"},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_functions.html","id":null,"dir":"Reference","previous_headings":"","what":"Make model string of Stan's functions model bloc ‚Äî make_model_string_functions","title":"Make model string of Stan's functions model bloc ‚Äî make_model_string_functions","text":"Create Stan string encompassed functions {}","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_functions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make model string of Stan's functions model bloc ‚Äî make_model_string_functions","text":"","code":"make_model_string_functions(analysis_obj)"},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_functions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make model string of Stan's functions model bloc ‚Äî make_model_string_functions","text":"analysis_obj Analysis. Object class Analysis created psborrow2:::.analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_functions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make model string of Stan's functions model bloc ‚Äî make_model_string_functions","text":"glue  character containing text functions block.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_functions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make model string of Stan's functions model bloc ‚Äî make_model_string_functions","text":"","code":"anls_obj <- psborrow2:::.analysis_obj(   data_matrix = example_matrix,   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 100)),   borrowing = borrowing_details(     \"Full borrowing\",     \"ext\"   ),   treatment = treatment_details(\"trt\", normal_prior(0, 100)) )  psborrow2:::make_model_string_functions(anls_obj) #> functions { #>  #> }"},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Make model string of Stan's model block ‚Äî make_model_string_model","title":"Make model string of Stan's model block ‚Äî make_model_string_model","text":"Create Stan string encompassed model {}","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make model string of Stan's model block ‚Äî make_model_string_model","text":"","code":"make_model_string_model(analysis_obj)"},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make model string of Stan's model block ‚Äî make_model_string_model","text":"analysis_obj Analysis. Object class Analysis created psborrow2:::.analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make model string of Stan's model block ‚Äî make_model_string_model","text":"glue  character containing Stan code data block.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make model string of Stan's model block ‚Äî make_model_string_model","text":"","code":"anls_obj <- psborrow2:::.analysis_obj(   data_matrix = example_matrix,   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 100)),   borrowing = borrowing_details(     \"Full borrowing\",     \"ext\"   ),   treatment = treatment_details(\"trt\", normal_prior(0, 100)) )  psborrow2:::make_model_string_model(anls_obj) #> model { #> vector[N] lp; #> vector[N] elp; #> beta_trt ~ normal(0, 100);  #> lp = alpha + trt * beta_trt ; #> elp = exp(lp); #> alpha ~ normal(0, 100) ; #> for (i in 1:N) { #>    if (cens[i] == 1) { #>       target += exponential_lccdf(time[i] | elp[i] ); #>    } else { #>       target += exponential_lpdf(time[i] | elp[i] ); #>    } #> } #> }"},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_parameters.html","id":null,"dir":"Reference","previous_headings":"","what":"Make model string of Stan's parameters model block ‚Äî make_model_string_parameters","title":"Make model string of Stan's parameters model block ‚Äî make_model_string_parameters","text":"Create Stan string encompassed parameters {}","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_parameters.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make model string of Stan's parameters model block ‚Äî make_model_string_parameters","text":"","code":"make_model_string_parameters(analysis_obj)"},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_parameters.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make model string of Stan's parameters model block ‚Äî make_model_string_parameters","text":"analysis_obj Analysis. Object class Analysis created psborrow2:::.analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_parameters.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make model string of Stan's parameters model block ‚Äî make_model_string_parameters","text":"glue  character containing Stan code functions block.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_parameters.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make model string of Stan's parameters model block ‚Äî make_model_string_parameters","text":"","code":"anls_obj <- psborrow2:::.analysis_obj(   data_matrix = example_matrix,   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 100)),   borrowing = borrowing_details(     \"Full borrowing\",     \"ext\"   ),   treatment = treatment_details(\"trt\", normal_prior(0, 100)) )  psborrow2:::make_model_string_parameters(anls_obj) #> parameters { #> real beta_trt; #> real alpha; }"},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_transf_param.html","id":null,"dir":"Reference","previous_headings":"","what":"Make model string of Stan's transformed parameters model block ‚Äî make_model_string_transf_param","title":"Make model string of Stan's transformed parameters model block ‚Äî make_model_string_transf_param","text":"Create Stan string encompassed transformed parameters {}","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_transf_param.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make model string of Stan's transformed parameters model block ‚Äî make_model_string_transf_param","text":"","code":"make_model_string_transf_param(analysis_obj)"},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_transf_param.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make model string of Stan's transformed parameters model block ‚Äî make_model_string_transf_param","text":"analysis_obj Analysis. Object class Analysis created psborrow2:::.analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_transf_param.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make model string of Stan's transformed parameters model block ‚Äî make_model_string_transf_param","text":"glue  character containing Stan code functions block.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/make_model_string_transf_param.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make model string of Stan's transformed parameters model block ‚Äî make_model_string_transf_param","text":"","code":"anls_obj <- psborrow2:::.analysis_obj(   data_matrix = example_matrix,   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 100)),   borrowing = borrowing_details(     \"Full borrowing\",     \"ext\"   ),   treatment = treatment_details(\"trt\", normal_prior(0, 100)) )  psborrow2:::make_model_string_transf_param(anls_obj) #> transformed parameters { #> real HR_trt = exp(beta_trt); }"},{"path":"https://genentech.github.io/psborrow2/main/reference/mcmc_sample.html","id":null,"dir":"Reference","previous_headings":"","what":"Sample from Stan model ‚Äî mcmc_sample","title":"Sample from Stan model ‚Äî mcmc_sample","text":"Method sample compiled Stan model return CmdStanMCMC object draws.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/mcmc_sample.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sample from Stan model ‚Äî mcmc_sample","text":"","code":"mcmc_sample(x, ...)  # S4 method for ANY mcmc_sample(x, ...)  # S4 method for Analysis mcmc_sample(   x,   iter_warmup = 1000L,   iter_sampling = 10000L,   chains = 4L,   verbose = FALSE,   ... )  # S4 method for Simulation mcmc_sample(   x,   posterior_quantiles = c(0.025, 0.975),   iter_warmup = 1000L,   iter_sampling = 10000L,   chains = 4L,   verbose = FALSE,   keep_cmd_stan_models = FALSE,   ... )"},{"path":"https://genentech.github.io/psborrow2/main/reference/mcmc_sample.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sample from Stan model ‚Äî mcmc_sample","text":"x object sample, Analysis (created create_analysis_obj()) Simulation. ... additional arguments passed $sample() method cmdstanr Stan model. See https://mc-stan.org/cmdstanr/reference/model-method-sample.html iter_warmup integer. number warm iterations run per chain. default 1000. iter_sampling integer. number post-warm iterations run per chain. default 10000. chains integer. number Markov chains run. default 4. verbose logical. Whether print sampler updates (TRUE) (FALSE) posterior_quantiles numeric vector length two. posterior quantiles used summarizing simulation results. default c(0.025, 0.975) See details. keep_cmd_stan_models logical. Whether keep CmdStanModel objects mcmc_sampler (TRUE, discouraged scenarios) (FALSE). default FALSE.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/mcmc_sample.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sample from Stan model ‚Äî mcmc_sample","text":"object class CmdStanMCMC object class MCMCSimulationResult","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/mcmc_sample.html","id":"simulation-objects","dir":"Reference","previous_headings":"","what":"Simulation objects","title":"Sample from Stan model ‚Äî mcmc_sample","text":"function takes draws MCMC sampler summarizes results. Several metrics summarized: \"Type 1 error\" probability posterior treatment effect distribution excludes true value.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/mcmc_sample.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Sample from Stan model ‚Äî mcmc_sample","text":"","code":"## Analysis objects anls <- create_analysis_obj(   data_matrix = example_matrix,   covariates = add_covariates(     covariates = c(\"cov1\", \"cov2\"),     priors = normal_prior(0, 1000)   ),   outcome = weib_ph_surv_dist(     \"time\",     \"cnsr\",     shape_prior = normal_prior(0, 1000),     baseline_prior = normal_prior(0, 1000)   ),   borrowing = borrowing_details(     \"BDB\",     \"ext\",     exponential_prior(.001)   ),   treatment = treatment_details(\"trt\", normal_prior(0, 1000)) ) #> Inputs look good. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`.  mcmc_results <- mcmc_sample(anls) #> Running MCMC with 4 sequential chains... #>  #> Chain 1 finished in 25.7 seconds. #> Chain 2 finished in 19.7 seconds. #> Chain 3 finished in 22.4 seconds. #> Chain 4 finished in 21.8 seconds. #>  #> All 4 chains finished successfully. #> Mean chain execution time: 22.4 seconds. #> Total execution time: 90.1 seconds. #>   ## Simulation objects base_mat <- matrix(   c(     rep(0, 200), rep(0, 200), rep(1, 200),     rep(1, 200), rep(0, 200), rep(0, 200),     rep(0, 600)   ),   ncol = 3,   dimnames = list(NULL, c(\"ext\", \"trt\", \"driftOR\")) )  add_binary_endpoint <- function(odds_ratio,                                 base_matrix = base_mat) {   linear_predictor <- base_matrix[, \"trt\"] * log(odds_ratio)   prob <- 1 / (1 + exp(-linear_predictor))    bin_endpoint <- rbinom(     NROW(base_matrix),     1,     prob   )    cbind(base_matrix, matrix(bin_endpoint, ncol = 1, dimnames = list(NULL, \"ep\"))) }  data_list <- list(   list(add_binary_endpoint(1.5), add_binary_endpoint(1.5)),   list(add_binary_endpoint(2.5), add_binary_endpoint(2.5)) )  guide <- data.frame(   trueOR = c(1.5, 2.5),   driftOR = c(1.0, 1.0),   index = 1:2 )  sdl <- sim_data_list(   data_list = data_list,   guide = guide,   effect = \"trueOR\",   drift = \"driftOR\",   index = \"index\" )  sim_object <- create_simulation_obj(   data_matrix_list = sdl,   outcome = logistic_bin_outcome(\"ep\", normal_prior(0, 1000)),   borrowing = sim_borrowing_list(list(     full_borrowing = borrowing_details(\"Full borrowing\", \"ext\"),     bdb = borrowing_details(\"BDB\", \"ext\", exponential_prior(0.0001))   )),   treatment = treatment_details(\"trt\", normal_prior(0, 1000)) )  mcmc_sample(sim_object, chains = 1, iter_warmup = 500L, iter_sampling = 1000L) #> Running MCMC with 1 chain... #>  #> Chain 1 finished in 0.6 seconds. #> Running MCMC with 1 chain... #>  #> Chain 1 finished in 0.6 seconds. #> Running MCMC with 1 chain... #>  #> Chain 1 finished in 0.6 seconds. #> Running MCMC with 1 chain... #>  #> Chain 1 finished in 0.5 seconds. #> Running MCMC with 1 chain... #>  #> Chain 1 finished in 2.5 seconds. #> Running MCMC with 1 chain... #>  #> Chain 1 finished in 3.7 seconds. #> Running MCMC with 1 chain... #>  #> Chain 1 finished in 4.4 seconds. #> Running MCMC with 1 chain... #>  #> Chain 1 finished in 3.4 seconds. #> `MCMCSimulationResult` object.  Call `get_results()` to save outputs as a data.frame"},{"path":"https://genentech.github.io/psborrow2/main/reference/normal_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior normal distribution ‚Äî normal_prior","title":"Prior normal distribution ‚Äî normal_prior","text":"Prior normal distribution","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/normal_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior normal distribution ‚Äî normal_prior","text":"","code":"normal_prior(mu, sigma)"},{"path":"https://genentech.github.io/psborrow2/main/reference/normal_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior normal distribution ‚Äî normal_prior","text":"mu numeric. Location. sigma numeric. Scale (>0).","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/normal_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior normal distribution ‚Äî normal_prior","text":"Object class NormalPrior.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/normal_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior normal distribution ‚Äî normal_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/normal-distribution.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/normal_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior normal distribution ‚Äî normal_prior","text":"","code":"np <- normal_prior(1, 1)"},{"path":"https://genentech.github.io/psborrow2/main/reference/parse_constraint.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Upper and Lower Bounds from Constraint String ‚Äî parse_constraint","title":"Extract Upper and Lower Bounds from Constraint String ‚Äî parse_constraint","text":"Extract Upper Lower Bounds Constraint String","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/parse_constraint.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Upper and Lower Bounds from Constraint String ‚Äî parse_constraint","text":"","code":"parse_constraint(s)"},{"path":"https://genentech.github.io/psborrow2/main/reference/parse_constraint.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Upper and Lower Bounds from Constraint String ‚Äî parse_constraint","text":"s Character. Constraint string, form \"<lower = 0, upper = 1>\".","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/parse_constraint.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Upper and Lower Bounds from Constraint String ‚Äî parse_constraint","text":"list upper lower bounds. unspecified bounds set -Inf Inf.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/parse_constraint.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract Upper and Lower Bounds from Constraint String ‚Äî parse_constraint","text":"","code":"psborrow2:::parse_constraint(\"<lower=0>\") #> lower upper  #>     0   Inf  psborrow2:::parse_constraint(\"<lower=0, upper=1>\") #> lower upper  #>     0     1  psborrow2:::parse_constraint(\"\") #> lower upper  #>  -Inf   Inf"},{"path":"https://genentech.github.io/psborrow2/main/reference/plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Prior Objects ‚Äî plot","title":"Plot Prior Objects ‚Äî plot","text":"Plot prior distributions densities. Continuous distributions plotted curves discrete distributions bar plots.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Prior Objects ‚Äî plot","text":"","code":"# S4 method for Prior,missing plot(   x,   y,   default_limits,   dist_type = c(\"continuous\", \"discrete\"),   density_fun,   add,   ... )  # S4 method for NormalPrior,missing plot(x, y, add = FALSE, ...)  # S4 method for BernoulliPrior,missing plot(x, y, add = FALSE, ...)  # S4 method for BetaPrior,missing plot(x, y, add = FALSE, ...)  # S4 method for CauchyPrior,missing plot(x, y, add = FALSE, ...)  # S4 method for ExponentialPrior,missing plot(x, y, add = FALSE, ...)  # S4 method for GammaPrior,missing plot(x, y, add = FALSE, ...)  # S4 method for PoissonPrior,missing plot(x, y, add = FALSE, ...)  # S4 method for UniformPrior,missing plot(x, y, add = FALSE, ...)"},{"path":"https://genentech.github.io/psborrow2/main/reference/plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Prior Objects ‚Äî plot","text":"x Object inheriting Prior y used. default_limits Numeric range plot distribution . dist_type Plot continuous discrete distribution. density_fun Function takes vector values returns vector density values. add logical. Add density existing plot. ... Optional arguments plotting.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/plot.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot Prior Objects ‚Äî plot","text":"Plot ranges selected default show 99% density unbounded distributions. limits can changed specifying xlim = c(lower, upper). Colors, line types, typical par() parameters can used.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/plot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Prior Objects ‚Äî plot","text":"","code":"plot(normal_prior(1, 2))  plot(bernoulli_prior(0.4), xlim = c(0, 15))  plot(beta_prior(2, 2))  plot(cauchy_prior(0, 1), xlim = c(-20, 20)) plot(cauchy_prior(0, 2), xlim = c(-20, 20), col = 2, add = TRUE)  plot(exponential_prior(0.1))  plot(gamma_prior(0.1, 0.1))  plot(poisson_prior(5), xlim = c(0, 15))  plot(uniform_prior(1, 2), xlim = c(0, 3))"},{"path":"https://genentech.github.io/psborrow2/main/reference/plot_pdf.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Probability Density Function Values ‚Äî plot_pdf","title":"Plot Probability Density Function Values ‚Äî plot_pdf","text":"Plot Probability Density Function Values","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/plot_pdf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Probability Density Function Values ‚Äî plot_pdf","text":"","code":"plot_pdf(x, y, ...)"},{"path":"https://genentech.github.io/psborrow2/main/reference/plot_pdf.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Probability Density Function Values ‚Äî plot_pdf","text":"x values y probability density values y = f(x) ... passed plot() Plots density values curve lower vertical limit set 0.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/plot_pdf.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Probability Density Function Values ‚Äî plot_pdf","text":"","code":"x <- seq(-2, 2, len = 100) y <- dnorm(x) plot_pdf(x, y)"},{"path":"https://genentech.github.io/psborrow2/main/reference/plot_pmf.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Probability Mass Function Values ‚Äî plot_pmf","title":"Plot Probability Mass Function Values ‚Äî plot_pmf","text":"Plot Probability Mass Function Values","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/plot_pmf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Probability Mass Function Values ‚Äî plot_pmf","text":"","code":"plot_pmf(x, y, ..., col = \"grey\", add = FALSE)"},{"path":"https://genentech.github.io/psborrow2/main/reference/plot_pmf.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Probability Mass Function Values ‚Äî plot_pmf","text":"x values y probability mass values y = f(x) ... passed plot() rect() col Fill color bars. add Add bars existing plot. Plots probability values barplot.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/plot_pmf.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Probability Mass Function Values ‚Äî plot_pmf","text":"","code":"x <- seq(0, 5) y <- dpois(x, lambda = 2) plot_pmf(x, y)"},{"path":"https://genentech.github.io/psborrow2/main/reference/poisson_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior poisson distribution ‚Äî poisson_prior","title":"Prior poisson distribution ‚Äî poisson_prior","text":"Prior poisson distribution","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/poisson_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior poisson distribution ‚Äî poisson_prior","text":"","code":"poisson_prior(lambda)"},{"path":"https://genentech.github.io/psborrow2/main/reference/poisson_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior poisson distribution ‚Äî poisson_prior","text":"lambda numeric. Rate (>0).","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/poisson_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior poisson distribution ‚Äî poisson_prior","text":"Object class PoissonPrior.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/poisson_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior poisson distribution ‚Äî poisson_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/poisson.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/poisson_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior poisson distribution ‚Äî poisson_prior","text":"","code":"pp <- poisson_prior(100)"},{"path":"https://genentech.github.io/psborrow2/main/reference/prepare_stan_data_inputs.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare Stan data inputs ‚Äî prepare_stan_data_inputs","title":"Prepare Stan data inputs ‚Äî prepare_stan_data_inputs","text":"Create list data correct format Stan","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/prepare_stan_data_inputs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare Stan data inputs ‚Äî prepare_stan_data_inputs","text":"","code":"prepare_stan_data_inputs(analysis_obj)"},{"path":"https://genentech.github.io/psborrow2/main/reference/prepare_stan_data_inputs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare Stan data inputs ‚Äî prepare_stan_data_inputs","text":"analysis_obj Analysis. Object class Analysis created create_analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/prepare_stan_data_inputs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare Stan data inputs ‚Äî prepare_stan_data_inputs","text":"Named list data inputs correspond items Stan data  block.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/prepare_stan_data_inputs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prepare Stan data inputs ‚Äî prepare_stan_data_inputs","text":"","code":"anls_obj <- create_analysis_obj(   data_matrix = example_matrix,   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 100)),   borrowing = borrowing_details(     \"BDB\",     \"ext\",     exponential_prior(0.001)   ),   treatment = treatment_details(\"trt\", normal_prior(0, 100)) ) #> Inputs look good. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`.  data_in <- psborrow2:::prepare_stan_data_inputs(anls_obj)"},{"path":"https://genentech.github.io/psborrow2/main/reference/rename_draws_covariates.html","id":null,"dir":"Reference","previous_headings":"","what":"Rename Covariates in draws Object ‚Äî rename_draws_covariates","title":"Rename Covariates in draws Object ‚Äî rename_draws_covariates","text":"Rename Covariates draws Object","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/rename_draws_covariates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Rename Covariates in draws Object ‚Äî rename_draws_covariates","text":"","code":"rename_draws_covariates(draws, analysis)"},{"path":"https://genentech.github.io/psborrow2/main/reference/rename_draws_covariates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Rename Covariates in draws Object ‚Äî rename_draws_covariates","text":"draws draws created sampled analysis object. See example. analysis Analysis created create_analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/rename_draws_covariates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Rename Covariates in draws Object ‚Äî rename_draws_covariates","text":"draws[posterior::draws] object covariate names.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/rename_draws_covariates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Rename Covariates in draws Object ‚Äî rename_draws_covariates","text":"","code":"analysis_object <- create_analysis_obj(   data_matrix = example_matrix,   covariates = add_covariates(     covariates = c(\"cov1\", \"cov2\"),     priors = normal_prior(0, 1000)   ),   outcome = exp_surv_dist(     \"time\",     \"cnsr\",     baseline_prior = normal_prior(0, 1000)   ),   borrowing = borrowing_details(     \"BDB\",     \"ext\",     exponential_prior(.001)   ),   treatment = treatment_details(     \"trt\",     normal_prior(0, 1000)   ) ) #> Inputs look good. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`. samples <- mcmc_sample(analysis_object) #> Running MCMC with 4 sequential chains... #>  #> Chain 1 finished in 6.7 seconds. #> Chain 2 finished in 6.1 seconds. #> Chain 3 finished in 7.4 seconds. #> Chain 4 finished in 6.7 seconds. #>  #> All 4 chains finished successfully. #> Mean chain execution time: 6.7 seconds. #> Total execution time: 27.2 seconds. #>  draws <- samples$draws() renamed_draws <- rename_draws_covariates(draws, analysis_object) summary(renamed_draws) #> # A tibble: 8 √ó 10 #>   variable          mean   median      sd    mad       q5      q95  rhat ess_b‚Ä¶¬π #>   <chr>            <dbl>    <dbl>   <dbl>  <dbl>    <dbl>    <dbl> <dbl>   <dbl> #> 1 lp__          -1.57e+3 -1.57e+3 1.75e+0 1.59   -1.57e+3 -1.56e+3  1.00  14823. #> 2 treatment lo‚Ä¶ -5.60e-1 -5.54e-1 2.32e-1 0.231  -9.56e-1 -1.87e-1  1.00   7325. #> 3 commensurabi‚Ä¶  6.68e+1  9.01e+0 3.04e+2 9.37    1.03e+0  2.14e+2  1.00   5171. #> 4 baseline log‚Ä¶ -3.73e+0 -3.73e+0 1.97e-1 0.196  -4.05e+0 -3.40e+0  1.00   9000. #> 5 baseline log‚Ä¶ -3.21e+0 -3.21e+0 1.15e-1 0.114  -3.41e+0 -3.03e+0  1.00  11576. #> 6 cov1           8.16e-1  8.14e-1 1.10e-1 0.111   6.35e-1  9.99e-1  1.00  17169. #> 7 cov2           5.74e-1  5.75e-1 9.97e-2 0.0997  4.09e-1  7.37e-1  1.00  18089. #> 8 treatment HR   5.87e-1  5.75e-1 1.36e-1 0.132   3.84e-1  8.29e-1  1.00   7325. #> # ‚Ä¶ with 1 more variable: ess_tail <dbl>, and abbreviated variable name #> #   ¬π‚Äãess_bulk"},{"path":"https://genentech.github.io/psborrow2/main/reference/show_guide.html","id":null,"dir":"Reference","previous_headings":"","what":"Show guide for objects with guides ‚Äî show_guide","title":"Show guide for objects with guides ‚Äî show_guide","text":"Show guide Simulation objects.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/show_guide.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Show guide for objects with guides ‚Äî show_guide","text":"","code":"show_guide(object)  # S4 method for Simulation show_guide(object)"},{"path":"https://genentech.github.io/psborrow2/main/reference/show_guide.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Show guide for objects with guides ‚Äî show_guide","text":"object Simulation object","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_borrowing_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Input borrowing details for a simulation study ‚Äî sim_borrowing_list","title":"Input borrowing details for a simulation study ‚Äî sim_borrowing_list","text":"function defining borrowing scenarios evaluated part simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_borrowing_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Input borrowing details for a simulation study ‚Äî sim_borrowing_list","text":"","code":"sim_borrowing_list(borrowing_list)"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_borrowing_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Input borrowing details for a simulation study ‚Äî sim_borrowing_list","text":"borrowing_list named list objects class Borrowing created borrowing_details().","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_borrowing_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Input borrowing details for a simulation study ‚Äî sim_borrowing_list","text":"","code":"borrow_scenarios <- sim_borrowing_list(   list(     \"No borrowing\" = borrowing_details(\"No borrowing\", \"ext\"),     \"Full borrowing\" = borrowing_details(\"Full borrowing\", \"ext\"),     \"BDB, uninformative prior\" = borrowing_details(\"BDB\", \"ext\", gamma_prior(0.001, 0.001)),     \"BDB, informative prior\" = borrowing_details(\"BDB\", \"ext\", gamma_prior(1, 0.001))   ) )"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_covariate_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Input covariate adjustment details for a simulation study ‚Äî sim_covariate_list","title":"Input covariate adjustment details for a simulation study ‚Äî sim_covariate_list","text":"function defining covariate adjustment scenarios evaluated part simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_covariate_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Input covariate adjustment details for a simulation study ‚Äî sim_covariate_list","text":"","code":"sim_covariate_list(covariate_list)"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_covariate_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Input covariate adjustment details for a simulation study ‚Äî sim_covariate_list","text":"covariate_list named list objects class Covariate created add_covariates().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_covariate_list.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Input covariate adjustment details for a simulation study ‚Äî sim_covariate_list","text":"function allows user specify covariate adjustment details included part simulation study. often interest compare several adjustment methods adjustment. specify adjustment, pass NULL list item covariate_list.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_covariate_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Input covariate adjustment details for a simulation study ‚Äî sim_covariate_list","text":"","code":"covariates <- sim_covariate_list(   list(     \"No adjustment\" = NULL,     \"Covariates 1 and 2\" = add_covariates(c(\"cov1\", \"cov2\"), normal_prior(0, 1000))   ) )"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_covariates.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify covariates for simulation study ‚Äî sim_covariates","title":"Specify covariates for simulation study ‚Äî sim_covariates","text":"Provide details desired covariate distributions covariance simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_covariates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify covariates for simulation study ‚Äî sim_covariates","text":"","code":"sim_covariates(   covariates,   covariance_internal,   covariance_external = covariance_internal )"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_covariates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify covariates for simulation study ‚Äî sim_covariates","text":"covariates list. Named list covariate mean values probabilities generated bin_var() (class SimVarBin cont_var() (class SimVarCont). See details information. covariance_internal matrix. Covariance matrix binarization internal patients. covariance_external matrix. Covariance matrix binarization external patients. Defaults internal covariance.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_covariates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify covariates for simulation study ‚Äî sim_covariates","text":"Object class SimCovariates","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_covariates.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Specify covariates for simulation study ‚Äî sim_covariates","text":"function intended specify number covariates relationships purposes designing simulation study psborrow2. outcome model necessarily need adjust covariates, function necessary create_simulation_obj(). relationship treatment outcome specified elsewhere (.e, sim_survival() sim_binary_event()). need things ","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_covariates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Specify covariates for simulation study ‚Äî sim_covariates","text":"","code":"set.seed(123) covmat <- matrix(rWishart(1, 2, diag(2)), ncol = 2)  covset1 <- sim_covariates(   covariates = list(     cov1 = bin_var(0.5, 0.5),     cov2 = cont_var(100, 130)   ),   covariance_internal = covmat )"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_covariates_summ.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarize the number of continuous and binary covariates\nin a SimCovariates object created by sim_covariates() ‚Äî sim_covariates_summ","title":"Summarize the number of continuous and binary covariates\nin a SimCovariates object created by sim_covariates() ‚Äî sim_covariates_summ","text":"Summarize number continuous binary covariates SimCovariates object created sim_covariates()","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_covariates_summ.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarize the number of continuous and binary covariates\nin a SimCovariates object created by sim_covariates() ‚Äî sim_covariates_summ","text":"","code":"sim_covariates_summ(sim_covariates_obj)"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_covariates_summ.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarize the number of continuous and binary covariates\nin a SimCovariates object created by sim_covariates() ‚Äî sim_covariates_summ","text":"sim_covariates_obj SimCovariates. Object returned sim_covariates().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_covariates_summ.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarize the number of continuous and binary covariates\nin a SimCovariates object created by sim_covariates() ‚Äî sim_covariates_summ","text":"data.frame showing covariate names types well counts binary continuous covariates.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_data_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Input generated data for a simulation study ‚Äî sim_data_list","title":"Input generated data for a simulation study ‚Äî sim_data_list","text":"function defining generated data use part simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_data_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Input generated data for a simulation study ‚Äî sim_data_list","text":"","code":"sim_data_list(data_list, guide, effect, drift, index)"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_data_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Input generated data for a simulation study ‚Äî sim_data_list","text":"data_list list lists matrices. lists highest level differ parameters used generate data. matrices lowest level different iterations data generation parameters. See details. guide data.frame. guide contains information parameters differ highest level data_list. See details. effect character. column guide corresponds true treatment effect estimate (hazard ratio odds ratio). drift character. column guide corresponds true drift effect estimate (hazard ratio odds ratio). drift >1 means external arm experiences greater effects. index character. column guide corresponds index column.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_data_list.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Input generated data for a simulation study ‚Äî sim_data_list","text":"function, providing generated data analysis simulation study psborrow2. Note function data generation behalf; assumes generated data already. full working example, refer relevant vignette: vignette('simulation_study', package = 'psborrow2'). information inputs provided .","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_data_list.html","id":"matrix-requirements-in-data-list","dir":"Reference","previous_headings":"","what":"Matrix requirements in data_list","title":"Input generated data for a simulation study ‚Äî sim_data_list","text":"matrix embedded data_list must : flag whether patient external control flag whether patient experimental treatment arm outcome information (time censorship survival, flag outcome binary endpoints) Optionally, matrices may also contain covariates. See examples.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_data_list.html","id":"data-list","dir":"Reference","previous_headings":"","what":"data_list","title":"Input generated data for a simulation study ‚Äî sim_data_list","text":"set distinct data generation parameters represented single list matrices. multiple scenarios may want compared, list list matrices preferred. See examples.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_data_list.html","id":"guide","dir":"Reference","previous_headings":"","what":"guide","title":"Input generated data for a simulation study ‚Äî sim_data_list","text":"guide data.frame one row per scenario. consquence , length list equal number rows guide. See examples.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_data_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Input generated data for a simulation study ‚Äî sim_data_list","text":"","code":"base_mat <- matrix(   c(     rep(0, 200), rep(0, 200), rep(1, 200),     rep(1, 200), rep(0, 200), rep(0, 200),     rep(0, 600)   ),   ncol = 3,   dimnames = list(NULL, c(\"ext\", \"trt\", \"driftOR\")) )  add_binary_endpoint <- function(odds_ratio,                                 base_matrix = base_mat) {   linear_predictor <- base_matrix[, \"trt\"] * log(odds_ratio)   prob <- 1 / (1 + exp(-linear_predictor))    bin_endpoint <- rbinom(     NROW(base_matrix),     1,     prob   )    cbind(base_matrix, matrix(bin_endpoint, ncol = 1, dimnames = list(NULL, \"ep\"))) }  data_list <- list(   list(add_binary_endpoint(1.5), add_binary_endpoint(1.5)),   list(add_binary_endpoint(2.5), add_binary_endpoint(2.5)) )  guide <- data.frame(   trueOR = c(1.5, 2.5),   driftOR = c(1.0, 1.0),   ind = c(1, 2) )  sdl <- sim_data_list(   data_list = data_list,   guide = guide,   effect = \"trueOR\",   drift = \"driftOR\",   index = \"ind\" )"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_estimate_bias.html","id":null,"dir":"Reference","previous_headings":"","what":"What is the bias for a given model ‚Äî sim_estimate_bias","title":"What is the bias for a given model ‚Äî sim_estimate_bias","text":"bias given model","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_estimate_bias.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"What is the bias for a given model ‚Äî sim_estimate_bias","text":"","code":"sim_estimate_bias(draws, true_effect)"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_estimate_bias.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"What is the bias for a given model ‚Äî sim_estimate_bias","text":"draws draws_array Object class draws CmdStanMCMC$draws(). true_effect numeric. true treatment effect.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_estimate_bias.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"What is the bias for a given model ‚Äî sim_estimate_bias","text":"bias sample","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_estimate_bias.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"What is the bias for a given model ‚Äî sim_estimate_bias","text":"Bias calculated (true_effect - median_estimated_effect)","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_estimate_bias.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"What is the bias for a given model ‚Äî sim_estimate_bias","text":"","code":"base_mat <- matrix(   c(     rep(0, 200), rep(0, 200), rep(1, 200),     rep(1, 200), rep(0, 200), rep(0, 200),     rep(0, 600)   ),   ncol = 3,   dimnames = list(NULL, c(\"ext\", \"trt\", \"driftOR\")) )  add_binary_endpoint <- function(odds_ratio,                                 base_matrix = base_mat) {   linear_predictor <- base_matrix[, \"trt\"] * log(odds_ratio)   prob <- 1 / (1 + exp(-linear_predictor))    bin_endpoint <- rbinom(     NROW(base_matrix),     1,     prob   )    cbind(base_matrix, matrix(bin_endpoint, ncol = 1, dimnames = list(NULL, \"ep\"))) }  data_list <- list(   list(add_binary_endpoint(1.5), add_binary_endpoint(1.5)),   list(add_binary_endpoint(2.5), add_binary_endpoint(2.5)) )  guide <- data.frame(   trueOR = c(1.5, 2.5),   driftOR = c(1.0, 1.0),   index = 1:2 )  sdl <- sim_data_list(   data_list = data_list,   guide = guide,   effect = \"trueOR\",   drift = \"driftOR\",   index = \"index\" )  x <- create_simulation_obj(   data_matrix_list = sdl,   outcome = logistic_bin_outcome(\"ep\", normal_prior(0, 1000)),   borrowing = sim_borrowing_list(list(     full_borrowing = borrowing_details(\"Full borrowing\", \"ext\"),     bdb = borrowing_details(\"BDB\", \"ext\", exponential_prior(0.0001))   )),   treatment = treatment_details(\"trt\", normal_prior(0, 1000)) )  i <- 1 j <- 1 true_effect <- x@guide[i, x@data_matrix_list@effect] anls_obj <- x@analysis_obj_list[[i]][[j]] res <- mcmc_sample(anls_obj, iter_sampling = 500) #> Running MCMC with 4 sequential chains... #>  #> Chain 1 finished in 0.6 seconds. #> Chain 2 finished in 0.5 seconds. #> Chain 3 finished in 0.6 seconds. #> Chain 4 finished in 0.6 seconds. #>  #> All 4 chains finished successfully. #> Mean chain execution time: 0.6 seconds. #> Total execution time: 2.5 seconds. #>  draws <- res$draws()  psborrow2:::sim_estimate_bias(   draws,   true_effect ) #> [1] 0.1086686"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_estimate_mse.html","id":null,"dir":"Reference","previous_headings":"","what":"What is the MSE for a given model ‚Äî sim_estimate_mse","title":"What is the MSE for a given model ‚Äî sim_estimate_mse","text":"MSE given model","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_estimate_mse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"What is the MSE for a given model ‚Äî sim_estimate_mse","text":"","code":"sim_estimate_mse(draws, true_effect)"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_estimate_mse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"What is the MSE for a given model ‚Äî sim_estimate_mse","text":"draws draws_array Object class draws CmdStanMCMC$draws(). true_effect numeric. true treatment effect.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_estimate_mse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"What is the MSE for a given model ‚Äî sim_estimate_mse","text":"mean squared error (MSE) sample","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_estimate_mse.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"What is the MSE for a given model ‚Äî sim_estimate_mse","text":"MSE calculated (true_effect - median_estimated_effect) ^ 2","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_estimate_mse.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"What is the MSE for a given model ‚Äî sim_estimate_mse","text":"","code":"base_mat <- matrix(   c(     rep(0, 200), rep(0, 200), rep(1, 200),     rep(1, 200), rep(0, 200), rep(0, 200),     rep(0, 600)   ),   ncol = 3,   dimnames = list(NULL, c(\"ext\", \"trt\", \"driftOR\")) )  add_binary_endpoint <- function(odds_ratio,                                 base_matrix = base_mat) {   linear_predictor <- base_matrix[, \"trt\"] * log(odds_ratio)   prob <- 1 / (1 + exp(-linear_predictor))    bin_endpoint <- rbinom(     NROW(base_matrix),     1,     prob   )    cbind(base_matrix, matrix(bin_endpoint, ncol = 1, dimnames = list(NULL, \"ep\"))) }  data_list <- list(   list(add_binary_endpoint(1.5), add_binary_endpoint(1.5)),   list(add_binary_endpoint(2.5), add_binary_endpoint(2.5)) )  guide <- data.frame(   trueOR = c(1.5, 2.5),   driftOR = c(1.0, 1.0),   index = 1:2 )  sdl <- sim_data_list(   data_list = data_list,   guide = guide,   effect = \"trueOR\",   drift = \"driftOR\",   index = \"index\" )  x <- create_simulation_obj(   data_matrix_list = sdl,   outcome = logistic_bin_outcome(\"ep\", normal_prior(0, 1000)),   borrowing = sim_borrowing_list(list(     full_borrowing = borrowing_details(\"Full borrowing\", \"ext\"),     bdb = borrowing_details(\"BDB\", \"ext\", exponential_prior(0.0001))   )),   treatment = treatment_details(\"trt\", normal_prior(0, 1000)) )  i <- 1 j <- 1 true_effect <- x@guide[i, x@data_matrix_list@effect] anls_obj <- x@analysis_obj_list[[i]][[j]] res <- mcmc_sample(anls_obj, iter_sampling = 500) #> Running MCMC with 4 sequential chains... #>  #> Chain 1 finished in 0.6 seconds. #> Chain 2 finished in 0.6 seconds. #> Chain 3 finished in 0.6 seconds. #> Chain 4 finished in 0.6 seconds. #>  #> All 4 chains finished successfully. #> Mean chain execution time: 0.6 seconds. #> Total execution time: 2.5 seconds. #>  draws <- res$draws()  psborrow2:::sim_estimate_mse(   draws,   true_effect ) #> [1] 0.07627277"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_is_null_effect_covered.html","id":null,"dir":"Reference","previous_headings":"","what":"Do the posterior quantiles contain a value of 1.0? ‚Äî sim_is_null_effect_covered","title":"Do the posterior quantiles contain a value of 1.0? ‚Äî sim_is_null_effect_covered","text":"posterior quantiles contain value 1.0?","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_is_null_effect_covered.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Do the posterior quantiles contain a value of 1.0? ‚Äî sim_is_null_effect_covered","text":"","code":"sim_is_null_effect_covered(draws, posterior_quantiles)"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_is_null_effect_covered.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Do the posterior quantiles contain a value of 1.0? ‚Äî sim_is_null_effect_covered","text":"draws draws_array Object class draws CmdStanMCMC$draws(). posterior_quantiles numeric. Vector length two specifying quantiles posterior treatment effect distribution search null effect.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_is_null_effect_covered.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Do the posterior quantiles contain a value of 1.0? ‚Äî sim_is_null_effect_covered","text":"1L null effect (1.0) contained within quantiles, else 0L","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_is_null_effect_covered.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Do the posterior quantiles contain a value of 1.0? ‚Äî sim_is_null_effect_covered","text":"","code":"base_mat <- matrix(   c(     rep(0, 200), rep(0, 200), rep(1, 200),     rep(1, 200), rep(0, 200), rep(0, 200),     rep(0, 600)   ),   ncol = 3,   dimnames = list(NULL, c(\"ext\", \"trt\", \"driftOR\")) )  add_binary_endpoint <- function(odds_ratio,                                 base_matrix = base_mat) {   linear_predictor <- base_matrix[, \"trt\"] * log(odds_ratio)   prob <- 1 / (1 + exp(-linear_predictor))    bin_endpoint <- rbinom(     NROW(base_matrix),     1,     prob   )    cbind(base_matrix, matrix(bin_endpoint, ncol = 1, dimnames = list(NULL, \"ep\"))) }  data_list <- list(   list(add_binary_endpoint(1.5), add_binary_endpoint(1.5)),   list(add_binary_endpoint(2.5), add_binary_endpoint(2.5)) )  guide <- data.frame(   trueOR = c(1.5, 2.5),   driftOR = c(1.0, 1.0),   index = 1:2 )  sdl <- sim_data_list(   data_list = data_list,   guide = guide,   effect = \"trueOR\",   drift = \"driftOR\",   index = \"index\" )  x <- create_simulation_obj(   data_matrix_list = sdl,   outcome = logistic_bin_outcome(\"ep\", normal_prior(0, 1000)),   borrowing = sim_borrowing_list(list(     full_borrowing = borrowing_details(\"Full borrowing\", \"ext\"),     bdb = borrowing_details(\"BDB\", \"ext\", exponential_prior(0.0001))   )),   treatment = treatment_details(\"trt\", normal_prior(0, 1000)) )  if (FALSE) { i <- 1 j <- 1 anls_obj <- x@analysis_obj_list[[i]][[j]] res <- mcmc_sample(anls_obj, iter_sampling = 500) draws <- res$draws()  psborrow2:::sim_is_null_effect_covered(   draws,   c(0.025, 0.975) ) }"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_is_true_effect_covered.html","id":null,"dir":"Reference","previous_headings":"","what":"Do the posterior quantiles contain the true treatment effect? ‚Äî sim_is_true_effect_covered","title":"Do the posterior quantiles contain the true treatment effect? ‚Äî sim_is_true_effect_covered","text":"posterior quantiles contain true treatment effect?","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_is_true_effect_covered.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Do the posterior quantiles contain the true treatment effect? ‚Äî sim_is_true_effect_covered","text":"","code":"sim_is_true_effect_covered(draws, true_effect, posterior_quantiles)"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_is_true_effect_covered.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Do the posterior quantiles contain the true treatment effect? ‚Äî sim_is_true_effect_covered","text":"draws draws_array Object class draws CmdStanMCMC$draws(). true_effect numeric. true treatment effect. posterior_quantiles numeric. Vector length two specifying quantiles posterior treatment effect distribution search true effect.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_is_true_effect_covered.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Do the posterior quantiles contain the true treatment effect? ‚Äî sim_is_true_effect_covered","text":"1L effect contained within quantiles, else 0L","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_is_true_effect_covered.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Do the posterior quantiles contain the true treatment effect? ‚Äî sim_is_true_effect_covered","text":"","code":"base_mat <- matrix(   c(     rep(0, 200), rep(0, 200), rep(1, 200),     rep(1, 200), rep(0, 200), rep(0, 200),     rep(0, 600)   ),   ncol = 3,   dimnames = list(NULL, c(\"ext\", \"trt\", \"driftOR\")) )  add_binary_endpoint <- function(odds_ratio,                                 base_matrix = base_mat) {   linear_predictor <- base_matrix[, \"trt\"] * log(odds_ratio)   prob <- 1 / (1 + exp(-linear_predictor))    bin_endpoint <- rbinom(     NROW(base_matrix),     1,     prob   )    cbind(base_matrix, matrix(bin_endpoint, ncol = 1, dimnames = list(NULL, \"ep\"))) }  data_list <- list(   list(add_binary_endpoint(1.5), add_binary_endpoint(1.5)),   list(add_binary_endpoint(2.5), add_binary_endpoint(2.5)) )  guide <- data.frame(   trueOR = c(1.5, 2.5),   driftOR = c(1.0, 1.0),   index = 1:2 )  sdl <- sim_data_list(   data_list = data_list,   guide = guide,   effect = \"trueOR\",   drift = \"driftOR\",   index = \"index\" )  x <- create_simulation_obj(   data_matrix_list = sdl,   outcome = logistic_bin_outcome(\"ep\", normal_prior(0, 1000)),   borrowing = sim_borrowing_list(list(     full_borrowing = borrowing_details(\"Full borrowing\", \"ext\"),     bdb = borrowing_details(\"BDB\", \"ext\", exponential_prior(0.0001))   )),   treatment = treatment_details(\"trt\", normal_prior(0, 1000)) )  if (FALSE) { i <- 1 j <- 1 true_effect <- x@guide[i, x@data_matrix_list@effect] anls_obj <- x@analysis_obj_list[[i]][[j]] res <- mcmc_sample(anls_obj, iter_sampling = 500) draws <- res$draws()  psborrow2:::sim_is_true_effect_covered(   draws,   true_effect,   c(0.025, 0.975) ) }"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_outcome_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Input outcome details for a simulation study ‚Äî sim_outcome_list","title":"Input outcome details for a simulation study ‚Äî sim_outcome_list","text":"function defining outcome scenarios evaluated part simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_outcome_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Input outcome details for a simulation study ‚Äî sim_outcome_list","text":"","code":"sim_outcome_list(outcome_list)"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_outcome_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Input outcome details for a simulation study ‚Äî sim_outcome_list","text":"outcome_list named list objects class Outcome created outcome_details().","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_outcome_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Input outcome details for a simulation study ‚Äî sim_outcome_list","text":"","code":"outcome_scenarios <- sim_outcome_list(   list(     \"Exponential\" = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 10000))   ) )"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_samplesize.html","id":null,"dir":"Reference","previous_headings":"","what":"Set simulation study parameters for sample size ‚Äî sim_samplesize","title":"Set simulation study parameters for sample size ‚Äî sim_samplesize","text":"Set simulation study parameters sample size","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_samplesize.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set simulation study parameters for sample size ‚Äî sim_samplesize","text":"","code":"sim_samplesize(n_internal_control, n_external_control, n_internal_experimental)"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_samplesize.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set simulation study parameters for sample size ‚Äî sim_samplesize","text":"n_internal_control integer. Number patients simulated internal control arm. n_external_control integer. Number patients simulated external control arm. n_internal_experimental integer. Number patients simulated internal experimental arm.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_samplesize.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set simulation study parameters for sample size ‚Äî sim_samplesize","text":"Object class SimSampleSize","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_samplesize.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Set simulation study parameters for sample size ‚Äî sim_samplesize","text":"","code":"ss <- sim_samplesize(200, 200, 500)"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_treatment_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Input treatment details for a simulation study ‚Äî sim_treatment_list","title":"Input treatment details for a simulation study ‚Äî sim_treatment_list","text":"function defining treatment scenarios evaluated part simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_treatment_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Input treatment details for a simulation study ‚Äî sim_treatment_list","text":"","code":"sim_treatment_list(treatment_list)"},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_treatment_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Input treatment details for a simulation study ‚Äî sim_treatment_list","text":"treatment_list named list objects class Treatment created treatment_details().","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/sim_treatment_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Input treatment details for a simulation study ‚Äî sim_treatment_list","text":"","code":"treatment_scenarios <- sim_treatment_list(   list(     \"Standard\" = treatment_details(\"trt\", normal_prior(0, 1000))   ) )"},{"path":"https://genentech.github.io/psborrow2/main/reference/treatment_details.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify Treatment Details ‚Äî treatment_details","title":"Specify Treatment Details ‚Äî treatment_details","text":"Specify treatment arm column name model matrix set prior distribution treatment effect (log hazard ratio log odds ratio)","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/treatment_details.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify Treatment Details ‚Äî treatment_details","text":"","code":"treatment_details(trt_flag_col, trt_prior)"},{"path":"https://genentech.github.io/psborrow2/main/reference/treatment_details.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify Treatment Details ‚Äî treatment_details","text":"trt_flag_col character. name column model matrix corresponds treatment flag (1/0 TRUE/FALSE). identifies patients belonging experimental treatment arm. trt_prior Object class Prior specifying prior distribution log effect estimate (log hazard ratio time event endpoints log odds ratio binary endpoints).","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/treatment_details.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify Treatment Details ‚Äî treatment_details","text":"Object class Treatment.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/treatment_details.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Specify Treatment Details ‚Äî treatment_details","text":"","code":"sta <- treatment_details(   trt_flag_col = \"trt\",   trt_prior = normal_prior(0, 1000) )"},{"path":"https://genentech.github.io/psborrow2/main/reference/trim_data_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Trim model matrix to just include relevant columns ‚Äî trim_data_matrix","title":"Trim model matrix to just include relevant columns ‚Äî trim_data_matrix","text":"Take Analysis object's data_matrix remove everything unnecessary preparation making input data Stan","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/trim_data_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Trim model matrix to just include relevant columns ‚Äî trim_data_matrix","text":"","code":"trim_data_matrix(analysis_obj)"},{"path":"https://genentech.github.io/psborrow2/main/reference/trim_data_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Trim model matrix to just include relevant columns ‚Äî trim_data_matrix","text":"analysis_obj Analysis. object class Analysis created .create_analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/trim_data_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Trim model matrix to just include relevant columns ‚Äî trim_data_matrix","text":"Trimmed data matrix","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/trim_data_matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Trim model matrix to just include relevant columns ‚Äî trim_data_matrix","text":"","code":"anls <- create_analysis_obj(   data_matrix = example_matrix,   covariates = add_covariates(     covariates = c(\"cov1\", \"cov2\"),     priors = normal_prior(0, 1000)   ),   outcome = exp_surv_dist(     \"time\",     \"cnsr\",     baseline_prior = normal_prior(0, 1000)   ),   borrowing = borrowing_details(     \"BDB\",     \"ext\",     exponential_prior(.001)   ),   treatment = treatment_details(     \"trt\",     normal_prior(0, 1000)   ) ) #> Inputs look good. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`.  trimmed_mat <- psborrow2:::trim_data_matrix(anls)"},{"path":"https://genentech.github.io/psborrow2/main/reference/uniform_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior uniform distribution ‚Äî uniform_prior","title":"Prior uniform distribution ‚Äî uniform_prior","text":"Prior uniform distribution","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/uniform_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior uniform distribution ‚Äî uniform_prior","text":"","code":"uniform_prior(alpha, beta)"},{"path":"https://genentech.github.io/psborrow2/main/reference/uniform_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior uniform distribution ‚Äî uniform_prior","text":"alpha numeric. Lower bound. beta numeric. Upper bound (>alpha).","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/uniform_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior uniform distribution ‚Äî uniform_prior","text":"Object class UniformPrior.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/uniform_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior uniform distribution ‚Äî uniform_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/uniform-distribution.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/uniform_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior uniform distribution ‚Äî uniform_prior","text":"","code":"up <- uniform_prior(0, 1)"},{"path":"https://genentech.github.io/psborrow2/main/reference/variable_dictionary.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Variable Dictionary ‚Äî variable_dictionary","title":"Create Variable Dictionary ‚Äî variable_dictionary","text":"Create Variable Dictionary","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/variable_dictionary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Variable Dictionary ‚Äî variable_dictionary","text":"","code":"variable_dictionary(analysis_obj)"},{"path":"https://genentech.github.io/psborrow2/main/reference/variable_dictionary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Variable Dictionary ‚Äî variable_dictionary","text":"analysis_obj Analysis. Object describe variable names.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/variable_dictionary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Variable Dictionary ‚Äî variable_dictionary","text":"data.frame names Stan variables descriptions.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/weib_ph_surv_dist.html","id":null,"dir":"Reference","previous_headings":"","what":"Weibull survival distribution (proportional hazards formulation) ‚Äî weib_ph_surv_dist","title":"Weibull survival distribution (proportional hazards formulation) ‚Äî weib_ph_surv_dist","text":"Weibull survival distribution (proportional hazards formulation)","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/weib_ph_surv_dist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Weibull survival distribution (proportional hazards formulation) ‚Äî weib_ph_surv_dist","text":"","code":"weib_ph_surv_dist(time_var, cens_var, shape_prior, baseline_prior)"},{"path":"https://genentech.github.io/psborrow2/main/reference/weib_ph_surv_dist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Weibull survival distribution (proportional hazards formulation) ‚Äî weib_ph_surv_dist","text":"time_var character. Name time variable column model matrix cens_var character. Name censorship variable flag model matrix shape_prior Prior class object Weibull shape parameter. Default exponential_prior(beta = 0.0001). baseline_prior Prior. Object class Prior specifying prior distribution baseline outcome. See Details information.","code":""},{"path":"https://genentech.github.io/psborrow2/main/reference/weib_ph_surv_dist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Weibull survival distribution (proportional hazards formulation) ‚Äî weib_ph_surv_dist","text":"Object class WeibullPHSurvDist.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/weib_ph_surv_dist.html","id":"baseline-prior","dir":"Reference","previous_headings":"","what":"Baseline Prior","title":"Weibull survival distribution (proportional hazards formulation) ‚Äî weib_ph_surv_dist","text":"baseline_prior argument specifies prior distribution baseline log hazard rate. interpretation baseline_prior differs slightly methods selected borrowing_details(): 'BDB': baseline_prior Bayesian Dynamic Borrowing refers log hazard rate external control arm. 'Full borrowing' 'borrowing': baseline_prior borrowing methods refers log hazard rate internal control arm.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/main/reference/weib_ph_surv_dist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Weibull survival distribution (proportional hazards formulation) ‚Äî weib_ph_surv_dist","text":"","code":"ws <- weib_ph_surv_dist(   time_var = \"time\",   cens_var = \"cens\",   shape_prior = exponential_prior(1),   baseline_prior = normal_prior(0, 1000) )"},{"path":"https://genentech.github.io/psborrow2/main/news/index.html","id":"psborrow2-0009000","dir":"Changelog","previous_headings":"","what":"psborrow2 0.0.0.9000","title":"psborrow2 0.0.0.9000","text":"Start psborrow2","code":""}]
