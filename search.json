[{"path":"https://genentech.github.io/psborrow2/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"License","title":"License","text":"Copyright 2023, Genentech, Inc. Licensed Apache License, Version 2.0 (“License”); may use file except compliance License. may obtain copy License http://www.apache.org/licenses/LICENSE-2.0 Unless required applicable law agreed writing, software distributed License distributed “” BASIS, WITHOUT WARRANTIES CONDITIONS KIND, either express implied. See License specific language governing permissions limitations License.","code":""},{"path":"https://genentech.github.io/psborrow2/articles/data_simulation.html","id":"generating-baseline-data","dir":"Articles","previous_headings":"","what":"Generating Baseline Data","title":"8. Data Simulation","text":"First define generate baseline data study. simplest form need define many patients arms: treated internal, control internal, control external. object defines data created. actually generate sample, use generate() produce data.frame. Often interested additional covariates. Internally package uses multivariate normal distributions, need specify mean (co-)variance. option specify different distribution parameters internal external arms. internal arms assumed randomized therefore come distribution. external parameters specified, internal ones used . complex setting, can generate correlated baseline covariates.  Finally, option transform non-normal covariates, binary cut-offs. can added existing objects can use built-functions used defined.","code":"simple_baseline <- create_baseline_object(   n_trt_int = 100,   n_ctrl_int = 50,   n_ctrl_ext = 100 ) generate(simple_baseline) #>   patid ext trt #> 1     1   0   1 #> 2     2   0   1 #> 3     3   0   1 #> 4     4   0   1 #> 5     5   0   1 #> 6     6   0   1 #>  [ reached 'max' / getOption(\"max.print\") -- omitted 244 rows ] with_age <- create_baseline_object(   n_trt_int = 100,   n_ctrl_int = 50,   n_ctrl_ext = 100,   covariates = baseline_covariates(     names = \"age\",     means_int = 55,     covariance_int = covariance_matrix(5)   ) ) generate(with_age) #>   patid ext trt      age #> 1     1   0   1 53.88001 #> 2     2   0   1 59.58267 #> 3     3   0   1 54.67721 #> 4     4   0   1 55.66418 #> 5     5   0   1 54.68882 #>  [ reached 'max' / getOption(\"max.print\") -- omitted 245 rows ] with_age_score <- create_baseline_object(   n_trt_int = 100,   n_ctrl_int = 50,   n_ctrl_ext = 100,   covariates = baseline_covariates(     names = c(\"age\", \"score\"),     means_int = c(55, 5),     means_ext = c(60, 5),     covariance_int = covariance_matrix(c(5, 1))   ) ) data_age_score <- generate(with_age_score) plot(   x = data_age_score$age,   y = data_age_score$score,   col = data_age_score$trt + 1,   pch = data_age_score$ext * 16,   xlab = \"Age\",   ylab = \"Score\" ) legend(   \"topright\",   legend = c(\"internal treated\", \"internal control\", \"external control\"),   col = c(2, 1, 1),   pch = c(0, 0, 16) ) with_age_score@transformations <- list(   score_high = binary_cutoff(\"score\", int_cutoff = 0.7, ext_cutoff = 0.7),   score_rounded = function(data) round(data$score) ) generate(with_age_score) #>   patid ext trt      age    score score_high score_rounded #> 1     1   0   1 54.88970 6.229666          1             6 #> 2     2   0   1 57.58243 3.921250          0             4 #>  [ reached 'max' / getOption(\"max.print\") -- omitted 248 rows ]"},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"before-you-start","dir":"Articles","previous_headings":"","what":"Before you start","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"psborrows2 package relies Stan model fitting, specifically via CmdStan cmdstanr tools. haven’t used CmdStan ’ll need install R package external program. information can found cmdstanr vignette. short version : Now ’re ready start psborrow2.","code":"# Install the cmdstanr package install.packages(\"cmdstanr\", repos = c(\"https://mc-stan.org/r-packages/\", getOption(\"repos\"))) library(cmdstanr)  # Install the external CmdStan program check_cmdstan_toolchain() install_cmdstan(cores = 2) library(psborrow2)"},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"creating-an-analysis-object","dir":"Articles","previous_headings":"","what":"Creating an analysis object","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"BDB analysis psborrow2, need create object class Analysis contains information needed build model compile MCMC sampler using Stan. create Analysis object, call function create_analysis_obj(). Let’s look four required arguments function evaluate one---time.","code":"create_analysis_obj(   data_matrix,   outcome,   borrowing,   treatment )"},{"path":[]},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"required-elements","dir":"Articles","previous_headings":"Creating an analysis object > 1. data_matrix","what":"Required elements","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"data_matrix input one-row-per-patient numeric matrix analysis. column names matrix fixed, names columns specified outcome, treatment, borrowing sections. two columns required analyses: flag denoting receipt experimental intervention (1) (0) flag denoting whether patient part external data source (1) internal trial (0)","code":""},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"time-to-event","dir":"Articles","previous_headings":"Creating an analysis object > 1. data_matrix > Required elements","what":"Time-to-event","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"outcome time--event, two additional columns needed: duration follow-patient flag denoting whether patient censored (1) (0)","code":""},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"binary-endpoints","dir":"Articles","previous_headings":"Creating an analysis object > 1. data_matrix > Required elements","what":"Binary endpoints","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"outcome binary, one additional column needed: flag denoting whether patient event interest (1) (0)","code":""},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"covariates","dir":"Articles","previous_headings":"Creating an analysis object > 1. data_matrix > Required elements","what":"Covariates","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"Covariates may also included BDB analyses. included data matrix plan adjust . Note numeric matrices supported. See Example data creating matrix data.frame. Note missing data currently allowed, values must non-missing.","code":""},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"example-data","dir":"Articles","previous_headings":"Creating an analysis object > 1. data_matrix","what":"Example data","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"using example dataset stored psborrow2 (example_matrix). starting data frame tibble, can easily create suitable matrix psborrow2 helper function create_data_matrix().","code":""},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"creating-a-data-matrix-with-create_data_matrix","dir":"Articles","previous_headings":"Creating an analysis object > 1. data_matrix > Example data","what":"Creating a data matrix with create_data_matrix()","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"","code":"# Start with data.frame diabetic_df <- survival::diabetic  # For demonstration purposes, let some patients be external controls diabetic_df$external <- ifelse(diabetic_df$trt == 0 & diabetic_df$id > 1000, 1, 0)  # Create the censor flag diabetic_df$cens <- ifelse(diabetic_df$status == 0, 1, 0)  diabetes_matrix <- create_data_matrix(   diabetic_df,   outcome = c(\"time\", \"cens\"),   trt_flag_col = \"trt\",   ext_flag_col = \"external\",   covariates = ~ age + laser + risk ) # Call `add_covariates()` with `covariates =  c(\"age\", \"laserargon\", \"risk\") `  head(diabetes_matrix) #    time cens trt external age laserargon risk # 1 46.23    1   0        0  28          1    9 # 2 46.23    1   1        0  28          1    9 # 3 42.50    1   1        0  12          0    8 # 4 31.30    0   0        0  12          0    6 # 5 42.27    1   1        0   9          0   11 # 6 42.27    1   0        0   9          0   11"},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"psborrow2-example-matrix","dir":"Articles","previous_headings":"Creating an analysis object > 1. data_matrix > Example data","what":"psborrow2 example matrix","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"Let’s look first rows example matrix: column definitions : ext, 0/1, flag external controls trt, 0/1, flag treatment arm cov1, 0/1, baseline covariate cov2, 0/1, baseline covariate time, positive numeric, survival time cnsr, 0/1, censoring indicator resp, 0/1, indicator binary response outcome","code":"head(example_matrix) #      id ext trt cov4 cov3 cov2 cov1       time status cnsr resp # [1,]  1   0   0    1    1    1    0  2.4226411      1    0    1 # [2,]  2   0   0    1    1    0    1 50.0000000      0    1    1 # [3,]  3   0   0    0    0    0    1  0.9674372      1    0    1 # [4,]  4   0   0    1    1    0    1 14.5774738      1    0    1 # [5,]  5   0   0    1    1    0    0 50.0000000      0    1    0 # [6,]  6   0   0    1    1    0    1 50.0000000      0    1    0"},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"outcome","dir":"Articles","previous_headings":"Creating an analysis object","what":"2. outcome","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"psborrow2 currently supports three outcomes: Time--event exponential distribution (constant hazard), created exp_surv_dist() Time--event Weibull distribution proportional hazards parametrization, created weib_ph_surv_dist() Binary endpoints Bernoulli distribution using logistic regression, created logistic_bin_outcome() select outcome distribution want, need specify prior distribution baseline event rate, baseline_prior. case, baseline_prior log hazard rate (binary endpoints represents log odds instead). Let’s assume prior knowledge event rate, ’ll specify uninformative prior: normal_prior(0, 1000). example, let’s conduct time--event analysis using exponential distribution.","code":"outcome <- exp_surv_dist(   time_var = \"time\",   cens_var = \"cnsr\",   baseline_prior = normal_prior(0, 1000) ) outcome # Outcome object with class ExponentialSurvDist  #  # Outcome variables: # time_var cens_var  #   \"time\"   \"cnsr\"  #  # Baseline prior: # Normal Distribution # Parameters: #  Stan  R    Value #  mu    mean    0  #  sigma sd   1000"},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"borrowing","dir":"Articles","previous_headings":"Creating an analysis object","what":"3. borrowing","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"psborrow2 supports three different borrowing methods specified method argument borrowing_details() (see code example call ): “borrowing”: internal trial comparison without external data “Full borrowing”: pooling external internal control arms “BDB”: Bayesian dynamic borrowing column name external control column flag matrix also required passed ext_flag_col. Finally, BDB , hyperprior distribution commensurability parameter must specified. hyperprior determines (along comparability outcomes internal external controls) much borrowing external control group performed. Example hyperpriors include largely uninformative inverse gamma distributions e.g., gamma_prior(alpha = .001, beta = .001) well informative distributions e.g., gamma_prior(alpha = 1, beta = .001), though distribution positive real line can used. Distributions density higher values (.e., higher precision) lead borrowing. ’ll choose uninformative gamma prior example. Note: Prior distributions outlined greater detail separate vignette, see vignette('prior_distributions', package = 'psborrow2').","code":"borrowing <- borrowing_details(   method = \"BDB\",   ext_flag_col = \"ext\",   tau_prior = gamma_prior(0.001, 0.001) ) borrowing # Borrowing object using BDB  #  # External control flag: ext  #  # Commensurability parameter prior: # Gamma Distribution # Parameters: #  Stan  R     Value #  alpha shape 0.001 #  beta  rate  0.001 # Constraints: <lower=0>"},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"treatment","dir":"Articles","previous_headings":"Creating an analysis object","what":"3. treatment","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"Finally, treatment details outlined treatment_details(). , first specify column treatment flag trt_flag_col. addition, need specify prior effect estimate, trt_prior. ’ll use another uninformative normal distribution prior treatment effect:","code":"treatment <- treatment_details(   trt_flag_col = \"trt\",   trt_prior = normal_prior(0, 1000) ) treatment # Treatment object #  # Treatment flag column: trt  #  # Treatment effect prior: # Normal Distribution # Parameters: #  Stan  R    Value #  mu    mean    0  #  sigma sd   1000"},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"application","dir":"Articles","previous_headings":"Creating an analysis object","what":"Application","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"Now thought inputs create_analysis_obj(), let’s create analysis object: Stan model compiled successfully informed us ready begin sampling.","code":"anls_obj <- create_analysis_obj(   data_matrix = example_matrix,   outcome = outcome,   borrowing = borrowing,   treatment = treatment ) # Inputs look good. # Stan program compiled successfully! # Ready to go! Now call `mcmc_sample()`."},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"sampling-from-an-analysis-object","dir":"Articles","previous_headings":"","what":"Sampling from an analysis object","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"can take draws posterior distribution using function mcmc_sample(). function takes input Analysis object arguments (data argument) passed CmdStanModel objects. Note running may take minutes.","code":"results <- mcmc_sample(anls_obj,   iter_warmup = 2000,   iter_sampling = 50000,   chains = 4,   seed = 112233 ) # Running MCMC with 4 sequential chains... #  # Chain 1 finished in 18.7 seconds. # Chain 2 finished in 19.8 seconds. # Chain 3 finished in 20.4 seconds. # Chain 4 finished in 17.1 seconds. #  # All 4 chains finished successfully. # Mean chain execution time: 19.0 seconds. # Total execution time: 76.4 seconds."},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"summarizing-results","dir":"Articles","previous_headings":"","what":"Summarizing results","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"CmdStanMCMC object, results several methods outlined cmdstanr website. instance, can see see summary posterior distribution samples results$summary(): summary includes information several parameter estimates BDB model. may immediately clear parameters Stan model refer , psborrow2 function returns variable dictionary analysis object help interpret parameters: can also capture draws calling results$draws(), returns object class draws. draws objects common many MCMC sampling software packages allow us leverage packages posterior bayesplot. psborrow2 also function rename variables draws objects interpretable, rename_draws_covariates(). function uses variable_dictionary labels. Let’s use make results easier interpret:","code":"results$summary() # # A tibble: 6 × 10 #   variable      mean    median     sd    mad          q5      q95  rhat ess_bulk #   <chr>        <num>     <num>  <num>  <num>       <num>    <num> <num>    <num> # 1 lp__     -1618.    -1618.    1.50   1.29   -1621.      -1.62e+3  1.00   71635. # 2 beta_trt    -0.156    -0.159 0.199  0.199     -0.480    1.76e-1  1.00   89655. # 3 tau          1.21      0.507 1.91   0.693      0.00441  4.74e+0  1.00   81335. # 4 alpha[1]    -3.36     -3.35  0.162  0.162     -3.63    -3.10e+0  1.00   88895. # 5 alpha[2]    -2.40     -2.40  0.0554 0.0553    -2.49    -2.31e+0  1.00  130460. # 6 HR_trt       0.873     0.853 0.177  0.168      0.619    1.19e+0  1.00   89655. # # ℹ 1 more variable: ess_tail <num> variable_dictionary(anls_obj) #   Stan_variable                        Description # 1           tau         commensurability parameter # 2      alpha[1] baseline log hazard rate, internal # 3      alpha[2] baseline log hazard rate, external # 4      beta_trt                   treatment log HR # 5        HR_trt                       treatment HR draws <- results$draws() print(draws) # # A draws_array: 50000 iterations, 4 chains, and 6 variables # , , variable = lp__ #  #          chain # iteration     1     2     3     4 #         1 -1616 -1620 -1617 -1617 #         2 -1618 -1623 -1620 -1616 #         3 -1619 -1618 -1619 -1617 #         4 -1619 -1616 -1618 -1618 #         5 -1619 -1618 -1618 -1619 #  # , , variable = beta_trt #  #          chain # iteration     1     2        3       4 #         1 -0.30 -0.44 -0.00048 -0.1973 #         2 -0.21 -0.29  0.16970 -0.1398 #         3 -0.17 -0.26 -0.52943 -0.0031 #         4 -0.32 -0.12 -0.43633 -0.2337 #         5 -0.23 -0.17 -0.43633  0.0925 #  # , , variable = tau #  #          chain # iteration      1     2     3     4 #         1 1.0410 0.650 0.048 2.445 #         2 2.4501 1.638 0.029 0.437 #         3 1.3336 3.267 2.406 1.552 #         4 0.0046 0.495 1.529 0.142 #         5 0.0108 0.064 1.529 0.044 #  # , , variable = alpha[1] #  #          chain # iteration    1    2    3    4 #         1 -3.3 -3.3 -3.5 -3.4 #         2 -3.3 -3.2 -3.6 -3.3 #         3 -3.3 -3.3 -3.0 -3.4 #         4 -3.3 -3.4 -3.1 -3.5 #         5 -3.2 -3.5 -3.1 -3.4 #  # # ... with 49995 more iterations, and 2 more variables draws <- rename_draws_covariates(draws, anls_obj) summary(draws) # # A tibble: 6 × 10 #   variable          mean   median     sd    mad       q5      q95  rhat ess_bulk #   <chr>            <num>    <num>  <num>  <num>    <num>    <num> <num>    <num> # 1 lp__          -1.62e+3 -1.62e+3 1.50   1.29   -1.62e+3 -1.62e+3  1.00   71635. # 2 treatment lo… -1.56e-1 -1.59e-1 0.199  0.199  -4.80e-1  1.76e-1  1.00   89655. # 3 commensurabi…  1.21e+0  5.07e-1 1.91   0.693   4.41e-3  4.74e+0  1.00   81335. # 4 baseline log… -3.36e+0 -3.35e+0 0.162  0.162  -3.63e+0 -3.10e+0  1.00   88895. # 5 baseline log… -2.40e+0 -2.40e+0 0.0554 0.0553 -2.49e+0 -2.31e+0  1.00  130460. # 6 treatment HR   8.73e-1  8.53e-1 0.177  0.168   6.19e-1  1.19e+0  1.00   89655. # # ℹ 1 more variable: ess_tail <num>"},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"using-bayesplot","dir":"Articles","previous_headings":"Summarizing results","what":"Using bayesplot","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"draws objects bayesplot package, can create many useful visual summary plots. can visualize marginal posterior distribution variable interested plotting histograms draws function mcmc_hist(). Let’s Hazard ratio treatment effect commensurability parameter, tau.  can see plots help us understand diagnose problems MCMC sampler, trace rank plots:  Many functions outlined bayesplot vignettes.","code":"bayesplot::mcmc_hist(draws, c(\"treatment HR\", \"commensurability parameter\")) bayesplot::color_scheme_set(\"mix-blue-pink\")  bayesplot::mcmc_trace(   draws[1:5000, 1:2, ], # Using a subset of draws only   pars = c(\"treatment HR\", \"commensurability parameter\"),   n_warmup = 1000 )"},{"path":"https://genentech.github.io/psborrow2/articles/dataset.html","id":"using-posterior","dir":"Articles","previous_headings":"Summarizing results","what":"Using posterior","title":"2. Conduct a hybrid control analysis on a dataset using BDB","text":"draws objects also supported posterior package, provides many tools analyzing MCMC draw data. instance, can use summarize_draws() function derive 80% credible intervals parameters: Another useful application posterior package evaluation Monte Carlo standard error quantiles variable interest: posterior contains many helpful functions, outlined vignettes.","code":"library(posterior) summarize_draws(draws, ~ quantile(.x, probs = c(0.1, 0.9))) # # A tibble: 6 × 3 #   variable                                `10%`     `90%` #   <chr>                                   <num>     <num> # 1 lp__                               -1620.     -1616.    # 2 treatment log HR                      -0.409      0.101 # 3 commensurability parameter             0.0177     3.21  # 4 baseline log hazard rate, internal    -3.57      -3.15  # 5 baseline log hazard rate, external    -2.47      -2.33  # 6 treatment HR                           0.664      1.11 vm <- extract_variable_matrix(draws, \"treatment HR\") mcse_quantile(x = vm, probs = c(0.1, 0.5, 0.9)) # mcse_q10 mcse_q50 mcse_q90  # 0.000653 0.000654 0.001220"},{"path":[]},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"presentation-flow","dir":"Articles","previous_headings":"Introducing psborrow2","what":"Presentation flow","title":"6. Walkthrough overview slides","text":"Bayesian Dynamic Borrowing History psborrow2 Overview package Demonstration single dataset analysis Demonstration simulation study analysis Installing psborrow2","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"acknowledgements","dir":"Articles","previous_headings":"Introducing psborrow2","what":"Acknowledgements","title":"6. Walkthrough overview slides","text":"psborrow2 culmination work many individuals within industry, academia, FDA. list authors collaborators integral package development (alphabetical): Craig Gower-Page Isaac Gravestock Yichen Lu Herb Pang Daniel Sabanes Bove Matthew Secrest Jiawen Zhu","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"hybrid-controls","dir":"Articles","previous_headings":"Bayesian Dynamic Borrowing","what":"Hybrid controls","title":"6. Walkthrough overview slides","text":"Hybrid control studies external data used supplement control arm randomized, controlled trial (RCT). schematic describes scenario:","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"types-of-borrowing","dir":"Articles","previous_headings":"Bayesian Dynamic Borrowing","what":"Types of borrowing","title":"6. Walkthrough overview slides","text":"best incorporate knowledge external control arm? several ways . psborrow2 allows three ways incorporating external data:","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"standard-bayesian-analysis-without-borrowing","dir":"Articles","previous_headings":"Bayesian Dynamic Borrowing","what":"Standard Bayesian analysis without borrowing","title":"6. Walkthrough overview slides","text":"Consider standard Bayesian model survival endpoint without external data. equally valid “borrowing” “Full borrowing” approaches. two parameters interest: \\(\\rho_{00}\\), hazard rate internal control \\(\\rho_{10}\\), hazard rate internal experimental hazard ratio, \\(\\theta\\), therefore: \\[ \\theta = \\frac{\\rho_{10}}{\\rho_{00}} \\] posterior distribution \\(\\theta\\) : \\[ P(\\theta | X) \\propto P(X | \\theta) \\times P(\\theta) \\]","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"bayesian-dynamic-borrowing-1","dir":"Articles","previous_headings":"Bayesian Dynamic Borrowing","what":"Bayesian Dynamic Borrowing","title":"6. Walkthrough overview slides","text":"BDB, introduce two parameters: \\(\\rho_{01}\\), hazard rate external control cohort \\(\\tau\\), precision parameter known “commensurability parameter” Information \\(\\rho_{01}\\) used estimating \\(\\rho_{00}\\) hierarchical model: \\[ \\rho_{00} | \\rho_{01} \\sim \\operatorname{Normal}\\left(\\rho_{01}, \\frac{1}{\\tau}\\right) \\] posterior distribution \\(\\theta\\) : \\[ P(\\theta, \\tau | X) \\propto P(X | \\theta, \\tau) \\times P(\\theta | \\tau) \\times P(\\tau) \\]","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"impact-of-tau","dir":"Articles","previous_headings":"Bayesian Dynamic Borrowing","what":"Impact of \\(\\tau\\)","title":"6. Walkthrough overview slides","text":"commensurability parameter, \\(\\tau\\) dictates extent borrowing. estimated model can influenced choice hyperprior. \\(\\tau\\) approaches infinity, prior distribution \\(\\rho_{00}\\) effectively becomes \\(\\rho_{01}\\): \\[ \\rho_{00} \\sim \\rho_{01} \\approxeq \\operatorname{Normal}\\left(\\rho_{01}, \\infty\\right) \\]","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"choice-of-hyperprior-for-tau","dir":"Articles","previous_headings":"Bayesian Dynamic Borrowing","what":"Choice of hyperprior for \\(\\tau\\)","title":"6. Walkthrough overview slides","text":"Consider two hyperprior distributions \\(\\tau\\):  \\(gamma(1, .001)\\) induce borrowing.","code":"> Warning:  [1m [22mUsing `size` aesthetic for lines was deprecated in ggplot2 3.4.0. >  [36mℹ [39m Please use `linewidth` instead. >  [90mThis warning is displayed once every 8 hours. [39m >  [90mCall `lifecycle::last_lifecycle_warnings()` to see where this warning was [39m >  [90mgenerated. [39m"},{"path":[]},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"psborrow2-timeline","dir":"Articles","previous_headings":"History of psborrow2","what":"psborrow2 timeline","title":"6. Walkthrough overview slides","text":"psborrow2 successor psborrow, R package simulation studies aid trial design understand benefits BDB operating characteristics.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"package-objectives","dir":"Articles","previous_headings":"Overview of package","what":"Package objectives","title":"6. Walkthrough overview slides","text":"psborrow2 two objectives:","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"facilitate-bdb-analyses","dir":"Articles","previous_headings":"Overview of package > Package objectives","what":"1) Facilitate BDB analyses","title":"6. Walkthrough overview slides","text":"psborrow2 user-friendly interface conducting BDB analyses handles computationally-difficult MCMC sampling user","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"facilitate-simulation-studies-of-bdb","dir":"Articles","previous_headings":"Overview of package > Package objectives","what":"2) Facilitate simulation studies of BDB","title":"6. Walkthrough overview slides","text":"psborrow2 can used compare different trial BDB characteristics unified way simulation studies inform trial design","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"prior-distributions","dir":"Articles","previous_headings":"Demonstration of a single BDB analysis","what":"Prior distributions","title":"6. Walkthrough overview slides","text":"psborrow2, user creates fully parametric Bayesian models proper prior distributions using constructors:","code":"bernoulli_prior() beta_prior() cauchy_prior() exponential_prior() gamma_prior() normal_prior() poisson_prior() uniform_prior() is(normal_prior(mu = 0, sigma = 100), \"Prior\") > [1] TRUE"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"plotting-priors","dir":"Articles","previous_headings":"Demonstration of a single BDB analysis","what":"Plotting priors","title":"6. Walkthrough overview slides","text":"Prior object plot method.","code":"plot(   normal_prior(mu = 0, sigma = 10),   xlim = c(-100, 100),   ylim = c(0, 0.1) )"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"plotting-an-uninformative-normal-prior","dir":"Articles","previous_headings":"Demonstration of a single BDB analysis","what":"Plotting an uninformative normal prior","title":"6. Walkthrough overview slides","text":"","code":"plot(   normal_prior(mu = 0, sigma = 10000),   xlim = c(-100, 100),   ylim = c(0, 0.1) )"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"hyperpriors-for-commensurability-parameters","dir":"Articles","previous_headings":"Demonstration of a single BDB analysis","what":"Hyperpriors for commensurability parameters","title":"6. Walkthrough overview slides","text":"Let’s look conservative hyperprior encourage borrowing:","code":"plot(   gamma_prior(alpha = 0.001, beta = 0.001),   xlim = c(-1, 20),   ylim = c(0, .025) )"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"Now let’s look aggressive hyperprior may induce borrowing:","code":"plot(   gamma_prior(alpha = 1, beta = 0.001),   xlim = c(-1, 20),   ylim = c(0, .025) )"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"example-data","dir":"Articles","previous_headings":"Demonstration of a single BDB analysis","what":"Example data","title":"6. Walkthrough overview slides","text":"psborrow2 simulated example data can use analysis. ext = 1 external trial patients, else ext = 0 trt = 1 experimentally-treated patients, else trt = 0 time time event censorship cnsr = 1 patient’s follow-censored, else csnr = 0","code":"head(example_matrix[, c(\"ext\", \"trt\", \"time\", \"cnsr\")]) >      ext trt       time cnsr > [1,]   0   0  2.4226411    0 > [2,]   0   0 50.0000000    1 > [3,]   0   0  0.9674372    0 > [4,]   0   0 14.5774738    0 > [5,]   0   0 50.0000000    1 > [6,]   0   0 50.0000000    1"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-1","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"flags data.frame explained greater detail ?example_matrix.   looks like 50 patients internal control, 100 internal experimental, 350 external control.","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"naive-internal-comparisons","dir":"Articles","previous_headings":"Demonstration of a single BDB analysis","what":"Naive internal comparisons","title":"6. Walkthrough overview slides","text":"Let’s start exploring three arms descriptively: Wow, external control population looks quite different internal control population!","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-2","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"point reference, let’s conduct Cox proportional hazards model looking just internal RCT data.   , hazard ratio 0.90 (95% CI 0.61 - 1.32), ignoring external control data.","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"hybrid-control-analysis","dir":"Articles","previous_headings":"Demonstration of a single BDB analysis","what":"Hybrid control analysis","title":"6. Walkthrough overview slides","text":"Let’s confirm BDB perform much borrowing include external data. BDB analysis psborrow2, want create object class Analysis :","code":"create_analysis_obj(   data_matrix,   outcome,   borrowing,   treatment )"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"outcome-class","dir":"Articles","previous_headings":"Demonstration of a single BDB analysis","what":"Outcome class","title":"6. Walkthrough overview slides","text":"Let’s look Outcome class. three different outcomes supported psborrow2, constructor:","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"arguments-to-exp_surv_dist","dir":"Articles","previous_headings":"Demonstration of a single BDB analysis","what":"Arguments to exp_surv_dist()","title":"6. Walkthrough overview slides","text":"first two arguments exp_surv_dist() straightforward: time_var, Name time variable column model matrix cens_var, Name censorship variable flag model matrix final argument complicated: baseline_prior, Prior distribution log hazard rate external control arm.","code":"exp_surv_dist(   time_var,   cens_var,   baseline_prior )"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-3","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"Let’s create outcome object exp_surv_dist() using uninformative Normal prior distribution log hazard rate external control arm.","code":"exp_outcome <- exp_surv_dist(   time_var = \"time\",   cens_var = \"cnsr\",   baseline_prior = normal_prior(0, 10000) ) class(exp_outcome) > [1] \"ExponentialSurvDist\" > attr(,\"package\") > [1] \"psborrow2\" is(exp_outcome, \"Outcome\") > [1] TRUE"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"borrowing-class","dir":"Articles","previous_headings":"Demonstration of a single BDB analysis","what":"Borrowing class","title":"6. Walkthrough overview slides","text":"Borrowing class objects created borrowing_details(). method, type borrowing perform. must one : 'BDB', 'Full borrowing', 'borrowing' ext_flag_col, name column data matrix corresponds external control flag tau_prior, hyperprior commensurability parameter (necessary ‘BDB’)","code":"borrowing_details(   method,   ext_flag_col,   tau_prior )"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-4","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"Let’s create Borrowing object conservative inverse Gamma distribution rate scale 0.001:","code":"bdb_borrowing <- borrowing_details(   method = \"BDB\",   ext_flag_col = \"ext\",   tau_prior = gamma_prior(alpha = 0.001, beta = 0.001) ) class(bdb_borrowing) > [1] \"Borrowing\" > attr(,\"package\") > [1] \"psborrow2\""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"treatment-class","dir":"Articles","previous_headings":"Demonstration of a single BDB analysis","what":"Treatment class","title":"6. Walkthrough overview slides","text":"Finally, ’ll create object class Treatment constructor treatment_details. trt_flag_col, name column model matrix corresponds treatment flag trt_prior, Object class Prior specifying prior distribution log hazard ratio experimental treatment","code":"treatment_details(   trt_flag_col,   trt_prior )"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-5","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"Let’s assume uninformative prior distribution log hazard ratio treatment create Treatment object:","code":"trt_details <- treatment_details(   trt_flag_col = \"trt\",   trt_prior = normal_prior(0, 10000) ) class(trt_details) > [1] \"Treatment\" > attr(,\"package\") > [1] \"psborrow2\""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"analysis-class-object","dir":"Articles","previous_headings":"Demonstration of a single BDB analysis","what":"Analysis class object","title":"6. Walkthrough overview slides","text":"Now information need create object class Analysis:","code":"analysis_object <- create_analysis_obj(   data_matrix = example_matrix,   outcome = exp_outcome,   borrowing = bdb_borrowing,   treatment = trt_details ) class(analysis_object) > [1] \"Analysis\" > attr(,\"package\") > [1] \"psborrow2\""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-6","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"can one function call well:","code":"analysis_object <- create_analysis_obj(   data_matrix = example_matrix,   outcome = exp_surv_dist(     time_var = \"time\",     cens_var = \"cnsr\",     baseline_prior = normal_prior(0, 10000)   ),   borrowing = borrowing_details(     method = \"BDB\",     ext_flag_col = \"ext\",     tau_prior = gamma_prior(alpha = 0.001, beta = 0.001)   ),   treatment = treatment_details(     trt_flag_col = \"trt\",     trt_prior = normal_prior(0, 10000)   ) )"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-7","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"","code":"print(analysis_object) > Analysis Object >  > Outcome model: ExponentialSurvDist  > Outcome variables: time cnsr  >  > Borrowing method: BDB  > External flag: ext  >  > Treatment variable: trt  >  > Data: Matrix with 500 observations  >     -  50  internal controls >     -  350  external controls  >     -  100  internal experimental >  > Stan model compiled and ready to sample. >  Call mcmc_sample() next."},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"sampling-from-an-analysis-object","dir":"Articles","previous_headings":"Demonstration of a single BDB analysis","what":"Sampling from an analysis object","title":"6. Walkthrough overview slides","text":"Analysis object suggests calling mcmc_sample() next step. ’ll follow advice! point analysis, refer cmdstanr site methods.","code":"results <- mcmc_sample(   analysis_object,   iter_warmup = 1000,   iter_sampling = 1000,   chains = 1 ) results >  variable     mean   median   sd  mad       q5      q95 rhat ess_bulk ess_tail >  lp__     -1617.89 -1617.58 1.42 1.34 -1620.56 -1616.16 1.02      257      480 >  beta_trt    -0.16    -0.16 0.19 0.19    -0.48     0.16 1.00      396      382 >  tau          1.22     0.47 1.84 0.65     0.00     4.71 1.00      469      236 >  alpha[1]    -3.35    -3.36 0.16 0.16    -3.63    -3.10 1.01      394      509 >  alpha[2]    -2.40    -2.40 0.05 0.06    -2.49    -2.31 1.00      474      588 >  HR_trt       0.87     0.85 0.17 0.16     0.62     1.17 1.00      396      382"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-8","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"Let’s look summary median 95% credible intervals:","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-9","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"results change substantially using BDB. exactly expect given different populations ! Let’s explore baseline characteristics see can identify ways internal external control arms differ:","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-10","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"appear differences. Let’s use statistical adjustment base propensity score address :","code":"ps_model <- glm(ext ~ cov1 + cov2 + cov3 + cov4,   data = example_dataframe,   family = binomial ) ps_model >  > Call:  glm(formula = ext ~ cov1 + cov2 + cov3 + cov4, family = binomial,  >     data = example_dataframe) >  > Coefficients: > (Intercept)         cov1         cov2         cov3         cov4   >      1.4389       0.5840       0.7643      -1.5827      -1.1420   >  > Degrees of Freedom: 499 Total (i.e. Null);  495 Residual > Null Deviance:        610.9  > Residual Deviance: 508.1  AIC: 518.1"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-11","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"’ll make new matrix called example_matrix_ps 5 categories propensity score levels approximately number patients .","code":"head(example_matrix_ps) >         time cnsr trt ext ps_cat_low ps_cat_low_med ps_cat_high_med ps_cat_high > 1  2.4226411    0   0   0          1              0               0           0 > 2 50.0000000    1   0   0          0              0               0           0 > 3  0.9674372    0   0   0          0              0               0           1 > 4 14.5774738    0   0   0          0              0               0           0 > 5 50.0000000    1   0   0          0              0               0           0 > 6 50.0000000    1   0   0          0              0               0           0"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"adjusting-for-covariates-in-psborrow2","dir":"Articles","previous_headings":"Demonstration of a single BDB analysis","what":"Adjusting for covariates in psborrow2","title":"6. Walkthrough overview slides","text":"adjust covariates, ’ll use costructor add_covariates(): covariates, Names columns data matrix containing covariates adjusted priors, Either single object class Prior specifying prior distribution apply covariates named list distributions class Prior, one covariate","code":"add_covariates(   covariates,   priors )"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"analysis-object-adjusting-for-propensity-scores","dir":"Articles","previous_headings":"Demonstration of a single BDB analysis","what":"Analysis object adjusting for propensity scores","title":"6. Walkthrough overview slides","text":"Now let’s create Analysis object adjusts propensity scores:","code":"analysis_object_ps <- create_analysis_obj(   data_matrix = example_matrix_ps,   covariates = add_covariates(     c(\"ps_cat_low\", \"ps_cat_low_med\", \"ps_cat_high_med\", \"ps_cat_high\"),     normal_prior(0, 10000)   ),   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 10000)),   borrowing = borrowing_details(\"BDB\", \"ext\", gamma_prior(0.001, 0.001)),   treatment = treatment_details(\"trt\", normal_prior(0, 10000)) ) results_ps <- mcmc_sample(analysis_object_ps,   iter_warmup = 1000,   iter_sampling = 1000,   chains = 1 )"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-12","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"looks like indeed see treatment effect differences distributions baseline confounds taken consideration!","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-13","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"histogram MCMC samples confirms well:","code":""},{"path":[]},{"path":[]},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"simulation-study","dir":"Articles","previous_headings":"Demonstration of a simulation study","what":"Simulation study","title":"6. Walkthrough overview slides","text":"now turn question design trials BDB mind. , create object class Simulation create_simulation_obj(): looks similar create_analysis_obj(), design!","code":"create_simulation_obj(   data_matrix_list,   outcome,   borrowing,   treatment )"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"sim_data_list","dir":"Articles","previous_headings":"Demonstration of a simulation study","what":"sim_data_list()","title":"6. Walkthrough overview slides","text":"first argument need fill data_matrix_list, created sim_data_list(). first argument list lists matrices. highest level, ’ll index different data generation parameters. lowest level, ’ll index different matrices generated parameters.","code":"sim_data_list(   data_list,   guide,   effect,   drift,   index )"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"data_list","dir":"Articles","previous_headings":"Demonstration of a simulation study","what":"data_list","title":"6. Walkthrough overview slides","text":"example data_list object list lists two data generation scenarios (e.g., true HR 1.0 true HR 0.8).","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-14","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"Suppose list lists simulated data called my_data_list: four scenarios. scenario 100 matrices.","code":"NROW(my_data_list) > [1] 4 NROW(my_data_list[[1]]) > [1] 100 head(my_data_list[[1]][[1]], 3) >      id ext trt     time status cnsr > [1,]  1   0   0 8.179722      1    0 > [2,]  2   0   0 6.884286      1    0 > [3,]  3   0   0 2.348331      1    0"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"data-generation-guide","dir":"Articles","previous_headings":"Demonstration of a simulation study","what":"Data generation guide","title":"6. Walkthrough overview slides","text":"also need create guide explains data generated. example, four scenarios summarized guide: guide implies my_sim_data_guide[[1]] list matrices treatment HR 0.6 drift HR 1.0.","code":"my_sim_data_guide >   true_hr          drift_hr id > 1     0.6       No drift HR  1 > 2     1.0       No drift HR  2 > 3     0.6 Moderate drift HR  3 > 4     1.0 Moderate drift HR  4"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-15","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"Finally, need specify guide three important features : true hazard ratio, drift hazard ratio, index. columns guide, simply specify column names:","code":"my_sim_data_list <- sim_data_list(   data_list = my_data_list,   guide = my_sim_data_guide,   effect = \"true_hr\",   drift = \"drift_hr\",   index = \"id\" ) my_sim_data_list > SimDataList object with  4  different scenarios >   true_hr          drift_hr id n_datasets_per_param > 1     0.6       No drift HR  1                  100 > 2     1.0       No drift HR  2                  100 > 3     0.6 Moderate drift HR  3                  100 > 4     1.0 Moderate drift HR  4                  100"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"borrowing-list","dir":"Articles","previous_headings":"Demonstration of a simulation study","what":"Borrowing list","title":"6. Walkthrough overview slides","text":"simulation study, let’s focus comparing four borrowing methods: borrowing BDB, conservative hyperprior BDB, aggressive hyperprior Full borrowing specify want evaluate multiple borrowing methods? ’ll use special list Borrowing objects, ’ll create function sim_borrowing_list().","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-16","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"sim_borrowing_list() needs named list Borrowing objects:","code":"my_borrowing_list <- sim_borrowing_list(   list(     \"No borrowing\" = borrowing_details(\"No borrowing\", \"ext\"),     \"Full borrowing\" = borrowing_details(\"Full borrowing\", \"ext\"),     \"BDB - conservative\" = borrowing_details(\"BDB\", \"ext\", gamma_prior(0.001, 0.001)),     \"BDB - aggressive\" = borrowing_details(\"BDB\", \"ext\", gamma_prior(1, 0.001))   ) ) my_borrowing_list > SimBorrowingList object with  4  different scenario(s) >   borrowing_scenario > 1       No borrowing > 2     Full borrowing > 3 BDB - conservative > 4   BDB - aggressive"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-17","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"Note, example ’ll pass list Borrowing objects, similar constructors exist psborrow2 objects: Note: want vary parameters simulation study, can simply pass unlisted object. , call borrowing_details() instead sim_borrowing_list().","code":"sim_treatment_list() sim_covariate_list() sim_outcome_list()"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"create_simulation_obj","dir":"Articles","previous_headings":"Demonstration of a simulation study","what":"create_simulation_obj()","title":"6. Walkthrough overview slides","text":"Now, let’s create Simulation object:","code":"simulation_obj <- create_simulation_obj(   my_sim_data_list,   outcome = exp_surv_dist(\"time\",     \"cnsr\",     baseline_prior = normal_prior(0, 10000)   ),   borrowing = my_borrowing_list,   treatment = treatment_details(     trt_flag_col = \"trt\",     trt_prior = normal_prior(0, 10000)   ) )"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"mcmc_sample","dir":"Articles","previous_headings":"Demonstration of a simulation study","what":"mcmc_sample()","title":"6. Walkthrough overview slides","text":"Analysis objects, next step us Simulation objects call mcmc_sample(): ’ll note simulation study results special psborrow2 class, CmdStanMCMC object (Analysis objects).","code":"simulation_res <- mcmc_sample(   simulation_obj,   iter_warmup = 1000,   iter_sampling = 1000,   chains = 1 ) simulation_res > `MCMCSimulationResult` object.  Call `get_results()` to save outputs as a data.frame"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-18","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"Let’s get useful data.frame results calling get_results:","code":"simulation_res_df <- get_results(simulation_res)"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"simulation-study-results","dir":"Articles","previous_headings":"Demonstration of a simulation study","what":"Simulation study results","title":"6. Walkthrough overview slides","text":"Let’s see exactly contained results. mse_mean, mean MSE results bias_mean, mean bias results null_coverage, proportion results contain null effect (1.0) specified credible interval quantiles (default 0.025 - 0.975) true_coverage, proportion results contain true effect specified credible interval quantiles (default 0.025 - 0.975)","code":"colnames(simulation_res_df) >  [1] \"true_hr\"              \"drift_hr\"             \"id\"                   >  [4] \"n_datasets_per_param\" \"outcome_scenario\"     \"borrowing_scenario\"   >  [7] \"covariate_scenario\"   \"treatment_scenario\"   \"mse_mean\"             > [10] \"bias_mean\"            \"null_coverage\"        \"true_coverage\""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-19","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"Let’s look number parameter combinations evaluated: makes sense 4 scenarios data generation step 4 borrowing step. cartesian product 16.","code":"NROW(simulation_res_df) > [1] 16 head(simulation_res_df, 2) >   true_hr    drift_hr id n_datasets_per_param outcome_scenario > 1     0.6 No drift HR  1                  100          default > 2     1.0 No drift HR  2                  100          default >   borrowing_scenario covariate_scenario treatment_scenario   mse_mean > 1       No borrowing      No adjustment            default 0.05834557 > 2       No borrowing      No adjustment            default 0.13082015 >    bias_mean null_coverage true_coverage > 1 0.05878194          0.51          0.97 > 2 0.03238762          0.94          0.94"},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"mse","dir":"Articles","previous_headings":"Demonstration of a simulation study","what":"MSE","title":"6. Walkthrough overview slides","text":"can use results plot MSE scenario :","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"type-i-error","dir":"Articles","previous_headings":"Demonstration of a simulation study","what":"Type I error","title":"6. Walkthrough overview slides","text":"included true HR 1.0, can evaluate type error looking compliment true parameter coverage:","code":""},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"power","dir":"Articles","previous_headings":"Demonstration of a simulation study","what":"Power","title":"6. Walkthrough overview slides","text":"can include power looking results true simulation 0.6.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/articles/overview_slides.html","id":"section-20","dir":"Articles","previous_headings":"","what":"6. Walkthrough overview slides","title":"6. Walkthrough overview slides","text":"psborrow2 can installed GitHub : Feedback can provided GitHub issues: https://github.com/Genentech/psborrow2/issues vignettes can accessed :","code":"devtools::install_git(\"https://github.com/Genentech/psborrow2\") browseVignettes(\"psborrow2\")"},{"path":[]},{"path":"https://genentech.github.io/psborrow2/articles/prior_distributions.html","id":"specifying-prior-distributions","dir":"Articles","previous_headings":"","what":"Specifying prior distributions","title":"3. Specifying prior distributions","text":"psborrow2 creates fully-parametrized Bayesian models, proper prior distributions parameters must specified. Prior distributions needed several parameters, depending analysis: beta coefficients (e.g. log hazard ratios log odds ratios) coefficients, passed add_covariates() ancillary parameters outcome distributions, shape parameter Weibull survival distribution, passed weib_ph_surv_dist() log effect estimates (e.g. hazard ratios odds ratios) primary contrast treatments, passed treatment_details() baseline outcome rates odds, passed borrowing_details() hyperprior commensurability parameter Bayesian dynamic borrowing (BDB), passed borrowing_details() See documentation functions information.","code":""},{"path":"https://genentech.github.io/psborrow2/articles/prior_distributions.html","id":"types-of-prior-distributions","dir":"Articles","previous_headings":"","what":"Types of prior distributions","title":"3. Specifying prior distributions","text":"currently supported prior distributions created constructors : bernoulli_prior(theta) beta_prior(alpha, beta) cauchy_prior(mu, sigma) exponential_prior(beta) gamma_prior(alpha, beta) normal_prior(mu, sigma) poisson_prior(lambda) uniform_prior(alpha, beta) example, can create uninformative normal distribution specifying normal prior centered around 0 large standard deviation: See documentation respective functions additional information.","code":"uninformative_normal <- normal_prior(0, 10000) uninformative_normal # Normal Distribution # Parameters: #  Stan  R    Value #  mu    mean     0 #  sigma sd   10000"},{"path":"https://genentech.github.io/psborrow2/articles/prior_distributions.html","id":"visualizing-prior-distributions","dir":"Articles","previous_headings":"","what":"Visualizing prior distributions","title":"3. Specifying prior distributions","text":"may sometimes find useful visualize prior distributions. scenarios, can call plot() prior object visualize distribution:  plot() chooses default axes , can change make differences obvious. Let’s compare conservative gamma(0.001, 0.001) hyperprior distribution commensurability parameter tau aggressive gamma(1, 0.001) distribution greater density higher values tau (lead borrowing BDB analysis):","code":"plot(uninformative_normal) conservative_tau <- gamma_prior(0.001, 0.001) aggressive_tau <- gamma_prior(1, 0.001) plot(aggressive_tau, xlim = c(0, 2000), col = \"blue\", ylim = c(0, 1e-03)) plot(conservative_tau, xlim = c(0, 2000), col = \"red\", add = TRUE)"},{"path":"https://genentech.github.io/psborrow2/articles/propensity_scores.html","id":"alternative-ps-weights-with-weightit","dir":"Articles","previous_headings":"","what":"Alternative PS Weights with WeightIt","title":"5. Incorporating propensity scores analysis in psborrow2","text":"WeightIt package can calculate PS balancing weights number different methods, generalized boosted modeling (method = \"gbm\"). addition, weights can calculated differently different estimands. , specifying estimand = \"ATT\", calculate weights estimating average treatment effect among treated (ATT). Another useful package cobalt, provides tools assessing balance groups weighting matching. compatible many matching weighting packages. See vignette details. can use cobalt package assess balance bal.plot().  “Love plots” can also generated compare populations weighting:  PS values can copied data set analysis object can constructed .","code":"library(WeightIt)  example_dataframe <- as.data.frame(example_matrix) example_dataframe$int <- 1 - example_dataframe$ext  weightit_model <- weightit(   int ~ cov1 + cov2 + cov3 + cov4,   data = example_dataframe,   method = \"gbm\",   estimand = \"ATT\" ) #> Warning: No `criterion` was provided. Using \"smd.mean\"FALSETRUE. summary(weightit_model) #>                  Summary of weights #>  #> - Weight ranges: #>  #>            Min                                  Max #> treated 1.0000      ||                       1.0000 #> control 0.0826 |---------------------------| 5.8966 #>  #> - Units with the 5 most extreme weights by group: #>                                             #>               5      4      3      2      1 #>  treated      1      1      1      1      1 #>             195    158    465    438    371 #>  control 2.7924 2.7924 5.8966 5.8966 5.8966 #>  #> - Weight statistics: #>  #>         Coef of Var  MAD Entropy # Zeros #> treated       0.000 0.00     0.0       0 #> control       1.582 0.82     0.6       0 #>  #> - Effective Sample Sizes: #>  #>            Control Treated #> Unweighted  350.       150 #> Weighted    100.09     150 library(cobalt) #>  cobalt (Version 4.5.1, Build Date: 2023-04-27) bal.plot(weightit_model) #> No `var.name` was provided. Displaying balance for prop.score. love.plot(weightit_model, stars = \"std\") example_dataframe$att <- weightit_model$weights  example_matrix_att <- create_data_matrix(   example_dataframe,   ext_flag_col = \"ext\",   outcome = c(\"time\", \"cnsr\"),   trt_flag_col = \"trt\",   weight_var = \"att\" )  analysis_att <- create_analysis_obj(   data_matrix = example_matrix_att,   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 10000), weight_var = \"att\"),   borrowing = borrowing_details(\"Full borrowing\", \"ext\"),   treatment = treatment_details(\"trt\", normal_prior(0, 10000)) ) #> Inputs look good. #> NOTE: dropping column `ext` for full borrowing. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`.  result_att <- mcmc_sample(analysis_att) #> Running MCMC with 4 sequential chains... #>  #> Chain 1 finished in 2.2 seconds. #> Chain 2 finished in 2.3 seconds. #> Chain 3 finished in 2.4 seconds. #> Chain 4 finished in 2.3 seconds. #>  #> All 4 chains finished successfully. #> Mean chain execution time: 2.3 seconds. #> Total execution time: 9.5 seconds."},{"path":"https://genentech.github.io/psborrow2/articles/propensity_scores.html","id":"matching-with-matchit","dir":"Articles","previous_headings":"","what":"Matching with MatchIt","title":"5. Incorporating propensity scores analysis in psborrow2","text":"variety matching methods, including PS matching implemented MatchIt package. described Getting Started vignette, can useful check imbalance matching. matching treated untreated select comparable control group, regardless whether internal external. simplicity let’s try 1:1 nearest matching approach.  Determining whether balance matching appropriate beyond scope vignette. can read MatchIt Assessing Balance vignette. cobalt package can useful . However, happy results matching procedure, can extract data use psborrow2.","code":"library(MatchIt) #>  #> Attaching package: 'MatchIt' #> The following object is masked from 'package:cobalt': #>  #>     lalonde # No matching; constructing a pre-match matchit object no_match <- matchit(trt ~ cov1 + cov2 + cov3 + cov4,   data = example_dataframe,   method = NULL, distance = \"glm\" ) summary(no_match) #>  #> Call: #> matchit(formula = trt ~ cov1 + cov2 + cov3 + cov4, data = example_dataframe,  #>     method = NULL, distance = \"glm\") #>  #> Summary of Balance for All Data: #>          Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean #> distance        0.2898        0.1776          0.7585     1.5831    0.2328 #> cov1            0.6300        0.7150         -0.1761          .    0.0850 #> cov2            0.3700        0.4625         -0.1916          .    0.0925 #> cov3            0.7600        0.4475          0.7317          .    0.3125 #> cov4            0.4600        0.2250          0.4715          .    0.2350 #>          eCDF Max #> distance   0.3375 #> cov1       0.0850 #> cov2       0.0925 #> cov3       0.3125 #> cov4       0.2350 #>  #> Sample Sizes: #>           Control Treated #> All           400     100 #> Matched       400     100 #> Unmatched       0       0 #> Discarded       0       0 match_11 <- matchit(trt ~ cov1 + cov2 + cov3 + cov4,   data = example_dataframe,   method = \"nearest\", distance = \"glm\" ) summary(match_11) #>  #> Call: #> matchit(formula = trt ~ cov1 + cov2 + cov3 + cov4, data = example_dataframe,  #>     method = \"nearest\", distance = \"glm\") #>  #> Summary of Balance for All Data: #>          Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean #> distance        0.2898        0.1776          0.7585     1.5831    0.2328 #> cov1            0.6300        0.7150         -0.1761          .    0.0850 #> cov2            0.3700        0.4625         -0.1916          .    0.0925 #> cov3            0.7600        0.4475          0.7317          .    0.3125 #> cov4            0.4600        0.2250          0.4715          .    0.2350 #>          eCDF Max #> distance   0.3375 #> cov1       0.0850 #> cov2       0.0925 #> cov3       0.3125 #> cov4       0.2350 #>  #> Summary of Balance for Matched Data: #>          Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean #> distance        0.2898        0.2845          0.0355     1.1082    0.0075 #> cov1            0.6300        0.6800         -0.1036          .    0.0500 #> cov2            0.3700        0.3900         -0.0414          .    0.0200 #> cov3            0.7600        0.7600          0.0000          .    0.0000 #> cov4            0.4600        0.4600          0.0000          .    0.0000 #>          eCDF Max Std. Pair Dist. #> distance     0.07          0.0355 #> cov1         0.05          0.1036 #> cov2         0.02          0.1243 #> cov3         0.00          0.0000 #> cov4         0.00          0.0000 #>  #> Sample Sizes: #>           Control Treated #> All           400     100 #> Matched       100     100 #> Unmatched     300       0 #> Discarded       0       0 plot(match_11, type = \"jitter\", interactive = FALSE) example_matrix_match <- create_data_matrix(   data = example_dataframe[match_11$weights == 1, ],   ext_flag_col = \"ext\",   outcome = c(\"time\", \"cnsr\"),   trt_flag_col = \"trt\" ) analysis_match <- create_analysis_obj(   data_matrix = example_matrix_match,   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 10000)),   borrowing = borrowing_details(\"Full borrowing\", \"ext\"),   treatment = treatment_details(\"trt\", normal_prior(0, 10000)) ) #> Inputs look good. #> NOTE: dropping column `ext` for full borrowing. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`.  result_match <- mcmc_sample(analysis_match) #> Running MCMC with 4 sequential chains... #>  #> Chain 1 finished in 1.1 seconds. #> Chain 2 finished in 0.9 seconds. #> Chain 3 finished in 1.1 seconds. #> Chain 4 finished in 1.1 seconds. #>  #> All 4 chains finished successfully. #> Mean chain execution time: 1.1 seconds. #> Total execution time: 4.7 seconds."},{"path":"https://genentech.github.io/psborrow2/articles/propensity_scores.html","id":"combined-weighting-and-dynamic-borrowing","dir":"Articles","previous_headings":"","what":"Combined Weighting and Dynamic Borrowing","title":"5. Incorporating propensity scores analysis in psborrow2","text":"models also support fixed weights likelihood contributions observation. equivalent fixed power prior weights. allows combination models, IPTW + commensurate prior approach.","code":"analysis_iptw_bdb <- create_analysis_obj(   data_matrix = example_matrix_att,   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 10000), weight_var = \"att\"),   borrowing = borrowing_details(\"BDB\", \"ext\", gamma_prior(0.01, 0.01)),   treatment = treatment_details(\"trt\", normal_prior(0, 10000)) ) #> Inputs look good. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`.  result_iptw_bdb <- mcmc_sample(analysis_iptw_bdb) #> Running MCMC with 4 sequential chains... #>  #> Chain 1 finished in 4.5 seconds. #> Chain 2 finished in 4.0 seconds. #> Chain 3 finished in 4.4 seconds. #> Chain 4 finished in 4.3 seconds. #>  #> All 4 chains finished successfully. #> Mean chain execution time: 4.3 seconds. #> Total execution time: 17.5 seconds."},{"path":"https://genentech.github.io/psborrow2/articles/propensity_scores.html","id":"fixed-weights","dir":"Articles","previous_headings":"","what":"Fixed Weights","title":"5. Incorporating propensity scores analysis in psborrow2","text":"can also use weights specify fixed power prior model. set power parameter \\(\\alpha = 0.1\\) external controls.","code":"example_matrix_pp01 <- cbind(example_matrix, pp_alpha = ifelse(example_matrix[, \"ext\"] == 1, 0.1, 1))  analysis_pp01 <- create_analysis_obj(   data_matrix = example_matrix_pp01,   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 10000), weight_var = \"pp_alpha\"),   borrowing = borrowing_details(\"Full borrowing\", \"ext\"),   treatment = treatment_details(\"trt\", normal_prior(0, 10000)) ) #> Inputs look good. #> NOTE: dropping column `ext` for full borrowing. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`.  result_pp01 <- mcmc_sample(analysis_pp01) #> Running MCMC with 4 sequential chains... #>  #> Chain 1 finished in 2.6 seconds. #> Chain 2 finished in 3.1 seconds. #> Chain 3 finished in 2.7 seconds. #> Chain 4 finished in 2.5 seconds. #>  #> All 4 chains finished successfully. #> Mean chain execution time: 2.7 seconds. #> Total execution time: 11.2 seconds."},{"path":"https://genentech.github.io/psborrow2/articles/propensity_scores.html","id":"reference-models","dir":"Articles","previous_headings":"","what":"Reference Models","title":"5. Incorporating propensity scores analysis in psborrow2","text":"comparison, also fit full borrowing, borrowing, BDB model without weights.","code":"result_full <- mcmc_sample(   create_analysis_obj(     data_matrix = example_matrix,     outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 10000)),     borrowing = borrowing_details(\"Full borrowing\", \"ext\"),     treatment = treatment_details(\"trt\", normal_prior(0, 10000))   ) ) #> Inputs look good. #> NOTE: dropping column `ext` for full borrowing. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`. #> Running MCMC with 4 sequential chains... #>  #> Chain 1 finished in 1.8 seconds. #> Chain 2 finished in 1.8 seconds. #> Chain 3 finished in 1.8 seconds. #> Chain 4 finished in 1.9 seconds. #>  #> All 4 chains finished successfully. #> Mean chain execution time: 1.8 seconds. #> Total execution time: 7.5 seconds.  result_none <- mcmc_sample(   create_analysis_obj(     data_matrix = example_matrix,     outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 10000)),     borrowing = borrowing_details(\"No borrowing\", \"ext\"),     treatment = treatment_details(\"trt\", normal_prior(0, 10000))   ) ) #> Inputs look good. #> NOTE: excluding `ext` == `1`/`TRUE` for no borrowing. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`. #> Running MCMC with 4 sequential chains... #>  #> Chain 1 finished in 0.9 seconds. #> Chain 2 finished in 0.9 seconds. #> Chain 3 finished in 1.0 seconds. #> Chain 4 finished in 1.0 seconds. #>  #> All 4 chains finished successfully. #> Mean chain execution time: 1.0 seconds. #> Total execution time: 4.1 seconds.  result_bdb <- mcmc_sample(   create_analysis_obj(     data_matrix = example_matrix_att,     outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 10000)),     borrowing = borrowing_details(\"BDB\", \"ext\", gamma_prior(0.01, 0.01)),     treatment = treatment_details(\"trt\", normal_prior(0, 10000))   ) ) #> Inputs look good. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`. #> Running MCMC with 4 sequential chains... #>  #> Chain 1 finished in 4.5 seconds. #> Chain 2 finished in 4.0 seconds. #> Chain 3 finished in 4.1 seconds. #> Chain 4 finished in 4.0 seconds. #>  #> All 4 chains finished successfully. #> Mean chain execution time: 4.2 seconds. #> Total execution time: 16.9 seconds."},{"path":"https://genentech.github.io/psborrow2/articles/propensity_scores.html","id":"comparison-of-results","dir":"Articles","previous_headings":"","what":"Comparison of Results","title":"5. Incorporating propensity scores analysis in psborrow2","text":"can use summary() extract variable interest specify summary statistics. can extract draws object model plot posterior distribution treatment hazard ratio.  see borrowing full borrowing extremes methods .","code":"models <- list(   \"No borrowing\" = result_none,   \"Full borrowing\" = result_full,   \"Power Prior 01\" = result_pp01,   \"ATT Weights\" = result_att,   \"IPTW + BDB\" = result_iptw_bdb,   \"Matching 1:1\" = result_match,   \"BDB\" = result_bdb ) results_table <- do.call(rbind, lapply(   models,   function(i) i$summary(\"HR_trt\", c(\"mean\", \"median\", \"sd\", \"quantile2\")) )) knitr::kable(cbind(models = names(models), results_table), digits = 3) plot(density(models[[1]]$draws(\"HR_trt\")),   col = 1, xlim = c(0, 2), ylim = c(0, 9), lwd = 2,   xlab = \"HR_trt\",   main = \"Posterior Hazard Ratio\" ) for (i in 2:7) {   lines(density(models[[i]]$draws(\"HR_trt\")), col = i, lty = i, lwd = 2) } legend(\"topright\", col = seq_along(models), lty = seq_along(models), legend = names(models))"},{"path":[]},{"path":"https://genentech.github.io/psborrow2/articles/psborrow2.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"1. Getting started with psborrow2","text":"randomized controlled trial (RCT) comparing experimental control arms remains gold standard evaluating efficacy novel therapy, one may want leverage relevant existing external control data inform study outcome. External control data can help increase study power thereby shorten trial duration reduce number subjects needed. However, analysis external control data can also introduce bias. One method incorporating external control data mitigate bias Bayesian dynamic borrowing (BDB), external control data borrowed extent external RCT control arms similar outcomes (Viele et. al. 2014). Implementing BDB computationally involved requires Markov chain Monte Carlo (MCMC) sampling methods, turn may require knowledge MCMC sampling software. overcome technical barriers developed psborrow2 using cmdstanr, R package facilitates use MCMC sampling program Stan (via CMD Stan). psborrow2 two main goals: provide user-friendly interface applying BDB study results handles MCMC sampling behalf user facilitate simulation studies compare different borrowing parameters (e.g. full borrowing, borrowing, BDB) trial BDB characteristics unified way Right now, psborrow2 supports time--event endpoints well binary endpoints.","code":""},{"path":"https://genentech.github.io/psborrow2/articles/psborrow2.html","id":"analyze-your-own-data","dir":"Articles","previous_headings":"","what":"Analyze your own data","title":"1. Getting started with psborrow2","text":"psborrow2 can implement BDB scenario wherein two-arm RCT supplemented external data control arm. Three arms required implement BDB psborrow2. : internal control arm within RCT external control arm using observational data experimental data another trial intervention/treatment population internal control arm internal experimental arm within RCT scenarios common drug development comparator arm novel therapy often standard care, data exists electronic health care records previous phase III registrational trials. Refer “dataset” vignette information implement BDB analyses data: vignette('dataset', package = 'psborrow2')","code":""},{"path":"https://genentech.github.io/psborrow2/articles/psborrow2.html","id":"conduct-a-simulation-study","dir":"Articles","previous_headings":"","what":"Conduct a simulation study","title":"1. Getting started with psborrow2","text":"Refer “simulation study” vignette information create simulation study involving BDB innovative trial designs: vignette('simulation_study', package = 'psborrow2')","code":""},{"path":"https://genentech.github.io/psborrow2/articles/psborrow2.html","id":"additional-information","dir":"Articles","previous_headings":"","what":"Additional information","title":"1. Getting started with psborrow2","text":"psborrow2 successor psborrow. core functionality replicated psborrow2 longer reason prefer psborrow, cite posterity.","code":""},{"path":"https://genentech.github.io/psborrow2/articles/psborrow2.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"1. Getting started with psborrow2","text":"Viele, K., Berry, S., Neuenschwander, B., Amzal, B., Chen, F., Enas, N., Hobbs, B., Ibrahim, J.G., Kinnersley, N., Lindborg, S., Micallef, S., Roychoudhury, S. Thompson, L. (2014), Use historical control data assessing treatment effects clinical trials. Pharmaceut. Statist., 13: 41–54.","code":""},{"path":"https://genentech.github.io/psborrow2/articles/simulation_study.html","id":"bringing-your-own-simulated-data","dir":"Articles","previous_headings":"","what":"Bringing your own simulated data","title":"4. Conduct a simulation study","text":"’ll start showing conduct simulation study bring simulated data. execute simulation study data, need build object class Simulation using function create_simulation_obj(). Let’s look arguments create_simulation_obj() consider one--one :","code":"create_simulation_obj(   data_matrix_list,   outcome,   borrowing,   covariate,   treatment )"},{"path":"https://genentech.github.io/psborrow2/articles/simulation_study.html","id":"data_matrix_list","dir":"Articles","previous_headings":"Bringing your own simulated data","what":"data_matrix_list","title":"4. Conduct a simulation study","text":"data_matrix_list input data using simulation study using function sim_data_list(). first argument list lists matrices. highest level, ’ll index different data generation parameters. lowest level, ’ll index different matrices generated parameters.","code":""},{"path":"https://genentech.github.io/psborrow2/articles/simulation_study.html","id":"data_list","dir":"Articles","previous_headings":"Bringing your own simulated data","what":"data_list","title":"4. Conduct a simulation study","text":"Figure 1 depicts example data_list object. object list lists two data generation scenarios (e.g., true HR 1.0 true HR 0.8). scenario arranged list matrices generated according data generation scenario. Figure 1 ’ll use simsurv package generate survival data ’ll put similar format. example, ’ll vary two data generation parameters: true HR drift HR (HR comparing external internal controls). Suppose function, sim_single_matrix() can simulate data single matrix. : Using function, let’s simulate list lists matrices four scenarios: True HR = 0.6, drift HR = 1.0 True HR = 1.0, drift HR = 1.0 True HR = 0.6, drift HR = 1.5 True HR = 1.0, drift HR = 1.5 4 scenarios. scenario 100 matrices. lowest level list lists data matrix.","code":"library(simsurv) # function to create a single matrix sim_single_matrix <- function(n = 500, # n simulated pts                               prob = c(                                 0.1, # proportion internal control                                 0.2, # proportion internal treated                                 0.7                               ), # proportion external control                               hr = 0.70, # true HR for the treatment                               drift_hr = 1.0 # HR of external/internal ) {   # checks   if (sum(prob) != 1.0) {     stop(\"prob must sum to 1\")   }    # data frame with the subject IDs and treatment group   df_ids <- data.frame(     id = 1:n,     ext = c(       rep(0L, n * (prob[1] + prob[2])),       rep(1L, n * prob[3])     ),     trt = c(       rep(0L, n * prob[1]),       rep(1L, n * prob[2]),       rep(0L, n * prob[3])     )   )    # simulated event times   df_surv <- simsurv(     lambdas = 0.1,     dist = \"exponential\",     betas = c(       trt = log(hr),       ext = log(drift_hr)     ),     x = df_ids,     maxt = 50   )    df_surv$censor <- 1 - df_surv$status    # merge the simulated event times into data frame   df <- merge(df_ids, df_surv)   df <- df[, c(\"id\", \"ext\", \"trt\", \"eventtime\", \"status\", \"censor\")]   colnames(df) <- c(\"id\", \"ext\", \"trt\", \"time\", \"status\", \"cnsr\")   return(as.matrix(df)) } head(sim_single_matrix(n = 500, hr = 0.5, drift_hr = 1.2)) #      id ext trt       time status cnsr # [1,]  1   0   0  0.3299371      1    0 # [2,]  2   0   0 12.7542019      1    0 # [3,]  3   0   0 15.9001559      1    0 # [4,]  4   0   0 10.8246712      1    0 # [5,]  5   0   0  5.1545299      1    0 # [6,]  6   0   0 29.7555375      1    0 # Seed for reproducibility set.seed(123)  # Number of simulations per scenario n <- 100  # Create list of lists of data my_data_list <- list(   replicate(n,     sim_single_matrix(n = 250, hr = 0.6, drift_hr = 1.0),     simplify = FALSE   ),   replicate(n,     sim_single_matrix(n = 250, hr = 1.0, drift_hr = 1.0),     simplify = FALSE   ),   replicate(n,     sim_single_matrix(n = 250, hr = 0.6, drift_hr = 1.5),     simplify = FALSE   ),   replicate(n,     sim_single_matrix(n = 250, hr = 1.0, drift_hr = 1.5),     simplify = FALSE   ) ) NROW(my_data_list) # [1] 4 NROW(my_data_list[[1]]) # [1] 100 head(my_data_list[[1]][[1]]) #      id ext trt      time status cnsr # [1,]  1   0   0  8.179722      1    0 # [2,]  2   0   0  6.884286      1    0 # [3,]  3   0   0  2.348331      1    0 # [4,]  4   0   0 17.898011      1    0 # [5,]  5   0   0  3.870353      1    0 # [6,]  6   0   0  6.795403      1    0"},{"path":"https://genentech.github.io/psborrow2/articles/simulation_study.html","id":"guide","dir":"Articles","previous_headings":"Bringing your own simulated data > data_list","what":"guide","title":"4. Conduct a simulation study","text":"order summarize results different parameters simulation study, psborrow2 needs know simulation parameters differ. purpose argument guide, data.frame distinguishes simulation study parameters. Three columns required guide, though many can provided. three required columns : true treatment effect (case HR) true drift effect (case HR). Drift effects >1 mean external control arm experiences greater hazard internal control arm. name column indexes data_list example, 4 scenarios summarized guide: guide implies my_sim_data_guide[[1]] list matrices treatment HR 0.6 drift HR 1.0.","code":"my_sim_data_guide <- expand.grid(   true_hr = c(0.6, 1.0),   drift_hr = c(\"No drift HR\", \"Moderate drift HR\") )  my_sim_data_guide$id <- seq(1, NROW(my_sim_data_guide))  my_sim_data_guide #   true_hr          drift_hr id # 1     0.6       No drift HR  1 # 2     1.0       No drift HR  2 # 3     0.6 Moderate drift HR  3 # 4     1.0 Moderate drift HR  4"},{"path":"https://genentech.github.io/psborrow2/articles/simulation_study.html","id":"effect-drift-and-index","dir":"Articles","previous_headings":"Bringing your own simulated data > data_list","what":"effect, drift, and index","title":"4. Conduct a simulation study","text":"last three inputs sim_data_list(), effect, drift, index column names guide correspond true treatment effect, true drift effect, index data_list items, respectively. study, \"true_hr\", \"drift_hr\", \"id\". Putting together, can create object class SimDataList:","code":"my_sim_data_list <- sim_data_list(   data_list = my_data_list,   guide = my_sim_data_guide,   effect = \"true_hr\",   drift = \"drift_hr\",   index = \"id\" )  my_sim_data_list # SimDataList object with  4  different scenarios #   true_hr          drift_hr id n_datasets_per_param # 1     0.6       No drift HR  1                  100 # 2     1.0       No drift HR  2                  100 # 3     0.6 Moderate drift HR  3                  100 # 4     1.0 Moderate drift HR  4                  100"},{"path":"https://genentech.github.io/psborrow2/articles/simulation_study.html","id":"outcome","dir":"Articles","previous_headings":"Bringing your own simulated data","what":"outcome","title":"4. Conduct a simulation study","text":"outcome pass information study outcomes. can pass either single Outcome class object (e.g., produced exp_surv_dist()), list Outcome class objects passed sim_outcome_list(). example, let’s just use single exponential distribution.","code":"my_sim_out <- exp_surv_dist(   time_var = \"time\",   cens_var = \"cnsr\",   baseline_prior = normal_prior(0, 1000) )  my_sim_out # Outcome object with class ExponentialSurvDist  #  # Outcome variables: # time_var cens_var  #   \"time\"   \"cnsr\"  #  # Baseline prior: # Normal Distribution # Parameters: #  Stan  R    Value #  mu    mean    0  #  sigma sd   1000"},{"path":"https://genentech.github.io/psborrow2/articles/simulation_study.html","id":"borrowing","dir":"Articles","previous_headings":"Bringing your own simulated data","what":"borrowing","title":"4. Conduct a simulation study","text":"borrowing input information type borrowing want evaluate. can either single object class Borrowing list objects created sim_borrowing_list(). sake example, let’s assume interested comparing four borrowing scenarios: borrowing BDB, conservative hyperprior BDB, aggressive hyperprior Full borrowing specify want evaluate multiple borrowing methods? ’ll use special list Borrowing objects, ’ll create function sim_borrowing_list().","code":"my_borrowing_list <- sim_borrowing_list(   list(     \"No borrowing\" = borrowing_details(\"No borrowing\", \"ext\"),     \"Full borrowing\" = borrowing_details(\"Full borrowing\", \"ext\"),     \"BDB - conservative\" = borrowing_details(\"BDB\", \"ext\", gamma_prior(0.001, 0.001)),     \"BDB - aggressive\" = borrowing_details(\"BDB\", \"ext\", gamma_prior(1, 0.001))   ) )  my_borrowing_list # SimBorrowingList object with  4  different scenario(s) #   borrowing_scenario # 1       No borrowing # 2     Full borrowing # 3 BDB - conservative # 4   BDB - aggressive"},{"path":"https://genentech.github.io/psborrow2/articles/simulation_study.html","id":"covariate","dir":"Articles","previous_headings":"Bringing your own simulated data","what":"covariate","title":"4. Conduct a simulation study","text":"covariate information covariate adjustment details. can single instance class Covariates add_covariates() list Covariates objects created sim_covariate_list() . also argument required create_simulation_obj. Let’s leave argument empty (.e., let’s adjust covariates).","code":""},{"path":"https://genentech.github.io/psborrow2/articles/simulation_study.html","id":"treatment","dir":"Articles","previous_headings":"Bringing your own simulated data","what":"treatment","title":"4. Conduct a simulation study","text":"treatment input treatment details simulation study. inputs, can single instance class Treatment, list classes, created sim_treatment_list(). Let’s just use single instance:","code":"my_sim_treat <- treatment_details(\"trt\", normal_prior(0, 1000))  my_sim_treat # Treatment object #  # Treatment flag column: trt  #  # Treatment effect prior: # Normal Distribution # Parameters: #  Stan  R    Value #  mu    mean    0  #  sigma sd   1000"},{"path":"https://genentech.github.io/psborrow2/articles/simulation_study.html","id":"create_simulation_obj","dir":"Articles","previous_headings":"Bringing your own simulated data","what":"create_simulation_obj()","title":"4. Conduct a simulation study","text":"Now relevant inputs create_simulation_obj(), let’s call function, generate compile Stan models ready sample behalf. Important: psborrow2 simulate Cartesian product unique list elements data_matrix_list, outcome, borrowing, covariate, treatment. 4 data generation scenarios 4 borrowing scenarios. inputs just one scenario (0 covariate, equivalent one scenario). means expect 4 \\(\\times\\) 4 \\(=\\) 16 combinations parameters. Let’s create simulation object class Simulation: get warning size simulation study, worried limiting MCMC samples example. can access guide see specific scenarios simulated show_guide():","code":"simulation_obj <- create_simulation_obj(   my_sim_data_list,   outcome = my_sim_out,   borrowing = my_borrowing_list,   treatment = my_sim_treat )  simulation_obj # Simulation object with  16  combinations and  1600  analyses ready to sample.  This is a lot of combinations/analyses! Consider breaking the  study into different simulation objects. Or if you  prefer to use these combinations, call `mcmc_sample()` next. show_guide(simulation_obj) #    true_hr          drift_hr id n_datasets_per_param outcome_scenario # 1      0.6       No drift HR  1                  100          default # 2      1.0       No drift HR  2                  100          default # 3      0.6 Moderate drift HR  3                  100          default # 4      1.0 Moderate drift HR  4                  100          default # 5      0.6       No drift HR  1                  100          default # 6      1.0       No drift HR  2                  100          default # 7      0.6 Moderate drift HR  3                  100          default # 8      1.0 Moderate drift HR  4                  100          default # 9      0.6       No drift HR  1                  100          default # 10     1.0       No drift HR  2                  100          default # 11     0.6 Moderate drift HR  3                  100          default # 12     1.0 Moderate drift HR  4                  100          default # 13     0.6       No drift HR  1                  100          default # 14     1.0       No drift HR  2                  100          default # 15     0.6 Moderate drift HR  3                  100          default # 16     1.0 Moderate drift HR  4                  100          default #    borrowing_scenario covariate_scenario treatment_scenario # 1        No borrowing      No adjustment            default # 2        No borrowing      No adjustment            default # 3        No borrowing      No adjustment            default # 4        No borrowing      No adjustment            default # 5      Full borrowing      No adjustment            default # 6      Full borrowing      No adjustment            default # 7      Full borrowing      No adjustment            default # 8      Full borrowing      No adjustment            default # 9  BDB - conservative      No adjustment            default # 10 BDB - conservative      No adjustment            default # 11 BDB - conservative      No adjustment            default # 12 BDB - conservative      No adjustment            default # 13   BDB - aggressive      No adjustment            default # 14   BDB - aggressive      No adjustment            default # 15   BDB - aggressive      No adjustment            default # 16   BDB - aggressive      No adjustment            default"},{"path":"https://genentech.github.io/psborrow2/articles/simulation_study.html","id":"mcmc_sample","dir":"Articles","previous_headings":"Bringing your own simulated data","what":"mcmc_sample()","title":"4. Conduct a simulation study","text":"Now ’ve created simulation object, ’re ready call mcmc_sample() generate draws model. Note one important additional argument mcmc_sample() simulation objects: posterior_quantiles. numeric vector length 2 specifies quantiles null coverage true coverage. instance, 95% credible coverage estimated posterior_quantiles = c(0.025, 0.975), default argument. Note unlike analysis single dataset, mcmc_sample() return CmdStanModel object applied simulation study object. Instead, returns class unique simulation study results: MCMCSimulationResult. evaluation took 13.4 minutes. Let’s look performance simulation study extracting data.frame summarizes results, get_results(): Let’s quickly visualize results using ggplot2. first load ggplot2 factorize borrowing scenarios:","code":"simulation_res <- mcmc_sample(   simulation_obj,   posterior_quantiles = c(0.025, 0.975),   iter_warmup = 400,   iter_sampling = 1000,   chains = 1L,   seed = 112233 ) class(simulation_res) # [1] \"MCMCSimulationResult\" # attr(,\"package\") # [1] \"psborrow2\" simulation_res_df <- get_results(simulation_res) head(simulation_res_df) #   true_hr          drift_hr id n_datasets_per_param outcome_scenario # 1     0.6       No drift HR  1                  100          default # 2     1.0       No drift HR  2                  100          default # 3     0.6 Moderate drift HR  3                  100          default # 4     1.0 Moderate drift HR  4                  100          default # 5     0.6       No drift HR  1                  100          default # 6     1.0       No drift HR  2                  100          default #   borrowing_scenario covariate_scenario treatment_scenario   mse_mean # 1       No borrowing      No adjustment            default 0.05957157 # 2       No borrowing      No adjustment            default 0.13155107 # 3       No borrowing      No adjustment            default 0.04747871 # 4       No borrowing      No adjustment            default 0.12865600 # 5     Full borrowing      No adjustment            default 0.02033351 # 6     Full borrowing      No adjustment            default 0.05067211 #    bias_mean null_coverage true_coverage # 1 0.06379999          0.53          0.96 # 2 0.03894101          0.96          0.96 # 3 0.01517944          0.47          0.95 # 4 0.03225091          0.95          0.95 # 5 0.02193270          0.10          0.96 # 6 0.01079782          0.97          0.97 # Load ggplot2 library(ggplot2)  # Factorize simulation_res_df$borrowing_scenario <- factor(simulation_res_df$borrowing_scenario,   levels = c(     \"No borrowing\",     \"BDB - conservative\",     \"BDB - aggressive\",     \"Full borrowing\"   ) )"},{"path":"https://genentech.github.io/psborrow2/articles/simulation_study.html","id":"mse","dir":"Articles","previous_headings":"Bringing your own simulated data > mcmc_sample()","what":"MSE","title":"4. Conduct a simulation study","text":"","code":"ggplot(simulation_res_df) +   geom_bar(aes(x = factor(true_hr), fill = borrowing_scenario, y = mse_mean),     stat = \"identity\", position = \"dodge\"   ) +   labs(     fill = \"Borrowing scenario\",     x = \"True HR\",     y = \"MSE\"   ) +   facet_wrap(~drift_hr) +   scale_fill_manual(values = c(\"#EF798A\", \"#F7A9A8\", \"#7D82B8\", \"#613F75\"))"},{"path":"https://genentech.github.io/psborrow2/articles/simulation_study.html","id":"type-i-error","dir":"Articles","previous_headings":"Bringing your own simulated data > mcmc_sample()","what":"Type I error","title":"4. Conduct a simulation study","text":"included true HR 1.0, can evaluate type error looking compliment true parameter coverage:","code":"ggplot(simulation_res_df[simulation_res_df$true_hr == 1.0, ]) +   geom_bar(aes(x = factor(drift_hr), fill = borrowing_scenario, y = 1 - true_coverage),     stat = \"identity\", position = \"dodge\"   ) +   labs(     fill = \"Borrowing scenario\",     x = \"drift HR\",     y = \"Type I error\"   ) +   scale_fill_manual(values = c(\"#EF798A\", \"#F7A9A8\", \"#7D82B8\", \"#613F75\")) +   scale_y_continuous(breaks = seq(0, 1, .1), limits = c(0, 1)) +   geom_hline(aes(yintercept = 0.05), linetype = 2)"},{"path":"https://genentech.github.io/psborrow2/articles/simulation_study.html","id":"power","dir":"Articles","previous_headings":"Bringing your own simulated data > mcmc_sample()","what":"Power","title":"4. Conduct a simulation study","text":"can include power looking results true simulation 0.6.","code":"ggplot(simulation_res_df[simulation_res_df$true_hr == 0.6, ]) +   geom_bar(aes(x = factor(drift_hr), fill = borrowing_scenario, y = 1 - null_coverage),     stat = \"identity\", position = \"dodge\"   ) +   labs(     fill = \"Borrowing scenario\",     x = \"drift HR\",     y = \"Power\"   ) +   scale_fill_manual(values = c(\"#EF798A\", \"#F7A9A8\", \"#7D82B8\", \"#613F75\")) +   scale_y_continuous(breaks = seq(0, 1, .1), limits = c(0, 1)) +   geom_hline(aes(yintercept = 0.80), linetype = 2)"},{"path":"https://genentech.github.io/psborrow2/articles/weighting.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"7. Comparison of Fixed Weights","text":"psborrow2 analysis possible specify fixed weights observation’s log-likelihood contribution. similar weighted regression fixed power prior parameter. vignette show weights can specified compare regression model results packages. compare glm model weights, weighted likelihood Stan psborrow2, BayesPPD::glm.fixed.a0 generalized linear models fixed a0 (power prior parameter).","code":"library(psborrow2) library(BayesPPD) library(ggplot2)"},{"path":"https://genentech.github.io/psborrow2/articles/weighting.html","id":"logistic-regression","dir":"Articles","previous_headings":"","what":"Logistic regression","title":"7. Comparison of Fixed Weights","text":"fit logistic regression models external control arm weights (power parameters) equal 0, 0.25, 0.5, 0.75, 1. internal treated control patients weight = 1. model treatment indicator two covariates, resp ~ trt + cov1 + cov2.","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":"https://genentech.github.io/psborrow2/articles/weighting.html","id":"results","dir":"Articles","previous_headings":"Logistic regression","what":"Results","title":"7. Comparison of Fixed Weights","text":"","code":"logistic_res_df <- do.call(   rbind,   c(logistic_glm_reslist, logistic_ppd_reslist, logistic_psb_reslist) )  logistic_res_df$est_ci <- sprintf(   \"%.3f (%.3f, %.3f)\",   logistic_res_df$estimate, logistic_res_df$lower, logistic_res_df$upper )  wide <- reshape(   logistic_res_df[, c(\"fitter\", \"borrowing\", \"variable\", \"est_ci\")],   direction = \"wide\",   timevar = \"fitter\",   idvar = c(\"borrowing\", \"variable\"), ) new_order <- order(wide$variable, wide$borrowing) knitr::kable(wide[new_order, ], digits = 3, row.names = FALSE) logistic_res_df$borrowing_x <- logistic_res_df$borrowing +   (as.numeric(factor(logistic_res_df$fitter)) - 3) / 100  ggplot(logistic_res_df, aes(x = borrowing_x, y = estimate, group = fitter, colour = fitter)) +   geom_errorbar(aes(ymin = lower, ymax = upper)) +   geom_point() +   facet_wrap(~variable, scales = \"free\")"},{"path":"https://genentech.github.io/psborrow2/articles/weighting.html","id":"exponential-models","dir":"Articles","previous_headings":"","what":"Exponential models","title":"7. Comparison of Fixed Weights","text":"Now fit models exponentially distributed outcome. censoring data set. glm use family = Gamma(link = \"log\") specify fixed dispersion = 1 fit exponential model. , external control arm weights (power parameters) equal 0, 0.25, 0.5, 0.75, 1. internal treated control patients weight = 1. model treatment indicator two covariates, eventtime ~ trt + cov1 + cov2.","code":"head(sim_data_exp) #   id  eventtime status trt cov1 cov2 ext censor # 1  1 0.01415794      1   0    0    1   0      0 # 2  2 0.11068091      1   0    1    0   0      0 # 3  3 0.01450650      1   0    1    0   0      0 # 4  4 0.03359306      1   0    1    0   0      0 # 5  5 0.53122173      1   0    0    0   0      0 # 6  6 0.09281095      1   0    1    0   0      0"},{"path":"https://genentech.github.io/psborrow2/articles/weighting.html","id":"results-1","dir":"Articles","previous_headings":"Exponential models","what":"Results","title":"7. Comparison of Fixed Weights","text":"Note: Wald confidence intervals displayed glm exponential models.","code":"res_df <- do.call(rbind, c(glm_reslist, ppd_reslist, psb_reslist))  res_df$est_ci <- sprintf(   \"%.3f (%.3f, %.3f)\",   res_df$estimate, res_df$lower, res_df$upper )  wide <- reshape(   res_df[, c(\"fitter\", \"borrowing\", \"variable\", \"est_ci\")],   direction = \"wide\",   timevar = \"fitter\",   idvar = c(\"borrowing\", \"variable\"), ) new_order <- order(wide$variable, wide$borrowing) knitr::kable(wide[new_order, ], digits = 3, row.names = FALSE) res_df$borrowing_x <- res_df$borrowing +   (as.numeric(factor(res_df$fitter)) - 3) / 100  ggplot(res_df, aes(x = borrowing_x, y = estimate, group = fitter, colour = fitter)) +   geom_errorbar(aes(ymin = lower, ymax = upper)) +   geom_point() +   facet_wrap(~variable, scales = \"free\")"},{"path":"https://genentech.github.io/psborrow2/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Matt Secrest. Maintainer. Isaac Gravestock. Author. Craig Gower-Page. Contributor.","code":""},{"path":"https://genentech.github.io/psborrow2/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Gravestock (2023). psborrow2: R Package Bayesian Dynamic Borrowing Simulation Study Analysis. R package version 0.0.2.0.","code":"@Manual{,   title = {psborrow2: An R Package for Bayesian Dynamic Borrowing Simulation Study and Analysis},   author = {Isaac Gravestock},   year = {2023},   note = {R package version 0.0.2.0}, }"},{"path":[]},{"path":"https://genentech.github.io/psborrow2/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"An R Package for Bayesian Dynamic Borrowing Simulation Study and Analysis","text":"psborrow2 R package conducting Bayesian Dynamic Borrowing (BDB) analyses simulation studies.1 2 psborrow2 two main objectives: Facilitate BDB analyses. psborrow2 user-friendly interface conducting BDB analyses handles computationally-difficult MCMC sampling behalf user. Facilitate simulation studies BDB. psborrow2 includes framework compare different trial BDB characteristics unified way simulation studies inform trial design.","code":""},{"path":"https://genentech.github.io/psborrow2/index.html","id":"background","dir":"","previous_headings":"","what":"Background","title":"An R Package for Bayesian Dynamic Borrowing Simulation Study and Analysis","text":"psborrow2 successor psborrow. psborrow still freely available CRAN validated functionality; however, package actively developed. Major updates psborrow2 include: New, flexible user interface New MCMC software (STAN) Expanded functionality name psborrow combines propensity scoring (ps) Bayesian dynamic borrowing. name implies, package can used combine dynamic borrowing propensity-score adjustment/weighting methods.","code":""},{"path":"https://genentech.github.io/psborrow2/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"An R Package for Bayesian Dynamic Borrowing Simulation Study and Analysis","text":"can install latest version psborrow2 : Please note package requires cmdstanr.","code":"remotes::install_github(\"Genentech/psborrow2\")"},{"path":"https://genentech.github.io/psborrow2/index.html","id":"vignettes","dir":"","previous_headings":"","what":"Vignettes","title":"An R Package for Bayesian Dynamic Borrowing Simulation Study and Analysis","text":"learn use psborrow2 R package, refer package vignettes:","code":"browseVignettes(\"psborrow2\")"},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/Analysis-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Analysis Class — Analysis-class","title":"Analysis Class — Analysis-class","text":"class defining Analysis details. Objects class Analysis created directly constructor create_analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/Analysis-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Analysis Class — Analysis-class","text":"data_matrix matrix. data matrix, including covariates adjusted , relevant outcome variables, treatment arm external control arm flags. covariates Covariate. Object class Covariate output function covariate_details(). outcome Outcome. Object class Outcome output exp_surv_dist(), weib_ph_surv_dist(), logistic_bin_outcome(). borrowing Borrowing. Object class Borrowing output borrowing_details(). treatment Treatment. Object class Treatment output treatment_details(). model_string character. string contains full Stan model code compiled. model CmdStanModel. compiled Stan model output cmdstanr::cmdstan_model() ready_to_sample logical. object ready sample?","code":""},{"path":"https://genentech.github.io/psborrow2/reference/BaselineDataFrame-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Baseline Data Frame Object — BaselineDataFrame-class","title":"Baseline Data Frame Object — BaselineDataFrame-class","text":"data.frame additional slot containing simulation definition","code":""},{"path":"https://genentech.github.io/psborrow2/reference/BaselineDataFrame-class.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Baseline Data Frame Object — BaselineDataFrame-class","text":"BaselineDataFrame","code":""},{"path":"https://genentech.github.io/psborrow2/reference/BaselineDataFrame-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Baseline Data Frame Object — BaselineDataFrame-class","text":"BaselineObject Simulated covariates definitions BaselineObject. See create_baseline_object()","code":""},{"path":"https://genentech.github.io/psborrow2/reference/BaselineObject-class.html","id":null,"dir":"Reference","previous_headings":"","what":"BaselineObject class for data simulation — BaselineObject-class","title":"BaselineObject class for data simulation — BaselineObject-class","text":"BaselineObject class data simulation","code":""},{"path":"https://genentech.github.io/psborrow2/reference/BaselineObject-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"BaselineObject class for data simulation — BaselineObject-class","text":"n_trt_int integer. Number internal treated patients n_ctrl_int integer. Number internal control patients n_ctrl_ext integer. Number external control patients covariates list. List correlated covariates objects, see baseline_covariates() transformations list. List named transformation functions.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/BernoulliPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"BernoulliPrior Class — BernoulliPrior-class","title":"BernoulliPrior Class — BernoulliPrior-class","text":"class defining bernoulli priors translated Stan code. Objects class BernoulliPrior created directly constructor bernoulli_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/BernoulliPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"BernoulliPrior Class — BernoulliPrior-class","text":"stan_code character. Stan implementation prior, placeholders bernoulli stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (1). constraint character. Support prior distribution, \"<lower=0, upper=1>\". theta numeric. Probability ([0, 1]).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/BetaPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"BetaPrior Class — BetaPrior-class","title":"BetaPrior Class — BetaPrior-class","text":"class defining beta priors translated Stan code. Objects class BetaPrior created directly constructor beta_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/BetaPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"BetaPrior Class — BetaPrior-class","text":"stan_code character. Stan implementation prior, placeholders beta stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (2). constraint character. Support prior distribution, \"<lower=0, upper=1>\". alpha numeric. Shape (>=0). beta numeric. Shape (>=0).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/BinaryOutcome-class.html","id":null,"dir":"Reference","previous_headings":"","what":"BinaryOutcome class — BinaryOutcome-class","title":"BinaryOutcome class — BinaryOutcome-class","text":"BinaryOutcome class","code":""},{"path":"https://genentech.github.io/psborrow2/reference/BinaryOutcome-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"BinaryOutcome class — BinaryOutcome-class","text":"function_stan_code character. Code include Stan functions program block. param_stan_code character. Code include Stan parameters program block. likelihood_stan_code character. Code defining likelihood include Stan model program block. data_stan_code character. Code include Stan data program block. n_param integer. Number ancillary parameters model estimate. param_priors list. Named list prior distributions ancillary parameters model. binary_var character. Variable used outcome BinaryOutcome objects. baseline_prior Prior. Object class Prior specifying prior distribution baseline outcome.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/Borrowing-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Borrowing Class — Borrowing-class","title":"Borrowing Class — Borrowing-class","text":"class defining borrowing details. Objects class Borrowing created directly constructor borrowing_details().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/Borrowing-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Borrowing Class — Borrowing-class","text":"method character. type borrowing perform. must one : 'BDB', 'Full borrowing', 'borrowing'. See ?borrowing_details information. ext_flag_col character. name column data matrix corresponds external control flag (1/0 TRUE/FALSE). identifies patient belonging external control cohort. tau_prior Prior. Object class Prior defining hyperprior \"commensurability parameter\". See ?borrowing_details information. data_stan_code string. Code include Stan data program block.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/CauchyPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"CauchyPrior Class — CauchyPrior-class","title":"CauchyPrior Class — CauchyPrior-class","text":"class defining cauchy priors translated Stan code. Objects class CauchyPrior created directly constructor cauchy_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/CauchyPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"CauchyPrior Class — CauchyPrior-class","text":"stan_code character. Stan implementation prior, placeholders cauchy stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (2). constraint character. Support prior distribution, (values allowed cauchy distribution). mu numeric. Location. sigma numeric. Scale (>0).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/Covariates-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Covariate Class — Covariates-class","title":"Covariate Class — Covariates-class","text":"class defining covariate details. Objects class Covariate created directly constructor add_covariates().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/Covariates-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Covariate Class — Covariates-class","text":"covariates character. Names columns data matrix containing covariates adjusted outcome model. Note: external treatment flags go . priors. Either single object class Prior specifying prior distribution apply covariates named list distributions class Prior, one covariate","code":""},{"path":"https://genentech.github.io/psborrow2/reference/ExponentialPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"ExponentialPrior Class — ExponentialPrior-class","title":"ExponentialPrior Class — ExponentialPrior-class","text":"class defining exponential priors translated Stan code. Objects class ExponentialPrior created directly constructor exponential_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/ExponentialPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"ExponentialPrior Class — ExponentialPrior-class","text":"stan_code character. Stan implementation prior, placeholders exponential Stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (1). constraint character. Support prior distribution, \"<lower=0>\". beta numeric. Inverse scale (>0).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/ExponentialSurvDist-class.html","id":null,"dir":"Reference","previous_headings":"","what":"ExponentialSurvDist Class — ExponentialSurvDist-class","title":"ExponentialSurvDist Class — ExponentialSurvDist-class","text":"class defining time--event survival analysis exponential survival distribution. Objects class ExponentialSurvDist created directly constructor exp_surv_dist().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/ExponentialSurvDist-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"ExponentialSurvDist Class — ExponentialSurvDist-class","text":"function_stan_code character. stan function code block containing text interpolate stan model. Empty string ExponentialSurvDist. param_stan_code character. stan parameter code block containing text interpolate stan model. Empty string ExponentialSurvDist. likelihood_stan_code character. stan model likelihood code block containing text interpolate stan model. n_param integer. Number ancillary parameters model estimate (0). param_priors list. Named list prior distributions ancillary parameters model. Empty ExponentialSurvDist. time_var character. Variable used time TimeToEvent objects. cens_var character. Variable used censoring TimeToEvent objects. baseline_prior Prior. Object class Prior specifying prior distribution baseline outcome.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/GammaPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"GammaPrior Class — GammaPrior-class","title":"GammaPrior Class — GammaPrior-class","text":"class defining gamma priors translated Stan code. Objects class GammaPrior created directly constructor gamma_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/GammaPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"GammaPrior Class — GammaPrior-class","text":"stan_code character. Stan implementation prior, placeholders gamma stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (2). constraint character. Support prior distribution, \"<lower=0>\". alpha numeric. Shape (>0). beta numeric. Inverse scale (>=0).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/HalfCauchyPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"HalfCauchyPrior Class — HalfCauchyPrior-class","title":"HalfCauchyPrior Class — HalfCauchyPrior-class","text":"class defining half cauchy priors translated Stan code. Objects class HalfCauchyPrior created directly constructor half_cauchy_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/HalfCauchyPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"HalfCauchyPrior Class — HalfCauchyPrior-class","text":"stan_code character. Stan implementation prior, placeholders half cauchy stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (2). constraint character. Support prior distribution. half cauchy prior, constraint mu mu numeric. Location. sigma numeric. Scale (>0).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/HalfNormalPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"HalfNormalPrior Class — HalfNormalPrior-class","title":"HalfNormalPrior Class — HalfNormalPrior-class","text":"class defining half normal priors translated Stan code. Objects class HalfNormalPrior created directly constructor half_normal_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/HalfNormalPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"HalfNormalPrior Class — HalfNormalPrior-class","text":"stan_code character. Stan implementation prior, placeholders half normal stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (2). constraint character. Support prior distribution. half normal prior, constraint mu mu numeric. Location. sigma numeric. Scale (>0).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/LogisticBinaryOutcome-class.html","id":null,"dir":"Reference","previous_headings":"","what":"LogisticBinaryOutcome class — LogisticBinaryOutcome-class","title":"LogisticBinaryOutcome class — LogisticBinaryOutcome-class","text":"class defining logistic regression binary outcome translated Stan code. Objects class LogisticBinaryOutcome created directly constructor logistic_bin_outcome().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/LogisticBinaryOutcome-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"LogisticBinaryOutcome class — LogisticBinaryOutcome-class","text":"function_stan_code character. stan function code block containing text interpolate stan model. Empty string LogisticBinaryOutcome. param_stan_code character. stan parameter code block containing text interpolate stan model. Empty string LogisticBinaryOutcome. likelihood_stan_code character. stan model likelihood code block containing text interpolate stan model. n_param integer. Number ancillary parameters model estimate (0). param_priors list. Named list prior distributions ancillary parameters model. Empty LogisticBinaryOutcome. binary_var character. Variable used outcome LogisticBinaryOutcome objects. baseline_prior Prior. Object class Prior specifying prior distribution baseline outcome.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/MCMCSimulationResult-class.html","id":null,"dir":"Reference","previous_headings":"","what":"MCMCSimulationResult Class — MCMCSimulationResult-class","title":"MCMCSimulationResult Class — MCMCSimulationResult-class","text":"class defining Simulation study results. Objects class MCMCSimulationResult created directly mcmc_sample().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/MCMCSimulationResult-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"MCMCSimulationResult Class — MCMCSimulationResult-class","text":"results data.frame. results simulation study summarized data.frame cmd_stan_models list. List lists CmdStanmodels corresponding different parameters Simulation@guide different datasets Simulation@data_matrix_list.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/NormalPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"NormalPrior Class — NormalPrior-class","title":"NormalPrior Class — NormalPrior-class","text":"class defining normal priors translated Stan code. Objects class NormalPrior created directly constructor normal_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/NormalPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"NormalPrior Class — NormalPrior-class","text":"stan_code character. Stan implementation prior, placeholders normal stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (2). constraint character. Support prior distribution, (values allowed normal distribution). mu numeric. Location. sigma numeric. Scale (>0).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/Outcome-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Outcome class — Outcome-class","title":"Outcome class — Outcome-class","text":"Outcome class","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/PoissonPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"PoissonPrior Class — PoissonPrior-class","title":"PoissonPrior Class — PoissonPrior-class","text":"class defining poisson priors translated Stan code. Objects class PoissonPrior created directly constructor poisson_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/PoissonPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"PoissonPrior Class — PoissonPrior-class","text":"stan_code character. Stan implementation prior, placeholders poisson stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (1). constraint character. Support prior distribution, \"<lower=0>\". lambda numeric. Rate (>0).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/Prior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior Class — Prior-class","title":"Prior Class — Prior-class","text":"class defining priors translated Stan code. Objects class Prior created directly one specific prior class constructors.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/Prior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Prior Class — Prior-class","text":"stan_code character. Stan implementation prior, placeholders parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters. constraint character. Support prior distribution expressed Stan constraint, e.g. \"<lower=0, upper=1>\".","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/SimBorrowingList-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimBorrowingList Class — SimBorrowingList-class","title":"SimBorrowingList Class — SimBorrowingList-class","text":"class borrowing details part simulation study. Objects class SimBorrowingList created directly constructor sim_borrowing_list().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimBorrowingList-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimBorrowingList Class — SimBorrowingList-class","text":"borrowing_list named list object class Borrowing, one object parameter variation.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimCovariateList-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimCovariateList Class — SimCovariateList-class","title":"SimCovariateList Class — SimCovariateList-class","text":"class covariate details part simulation study. Objects class SimCovariateList created directly constructor sim_covariate_list().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimCovariateList-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimCovariateList Class — SimCovariateList-class","text":"covariate_list named list object class Covariate, one object parameter variation.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimCovariates-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimCovariates Class — SimCovariates-class","title":"SimCovariates Class — SimCovariates-class","text":"class specifying covariate distributions covariance simulation studies.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimCovariates-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimCovariates Class — SimCovariates-class","text":"covariates list. List covariate mean values probabilities generated bin_var() (class SimVarBin cont_var() (class SimVarCont). covariance_internal matrix. Covariance matrix binarization internal patients. covariance_external matrix. Covariance matrix binarization external patients.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimDataList-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimDataList Class — SimDataList-class","title":"SimDataList Class — SimDataList-class","text":"class defining generated data use part simulation study. Objects class SimDataList created directly constructor sim_data_list().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimDataList-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimDataList Class — SimDataList-class","text":"data_list list lists matrices. lists highest level differ parameters used generate data. matrices lowest level different iterations data generation parameters. guide data.frame. guide contains information parameters differ highest level data_list. effect character. column guide corresponds true treatment effect estimate (hazard ratio odds ratio). drift character. column guide corresponds drift external internal control arms. drift >1 means external arm experiences greater effects. index character. column guide corresponds index parameter situations data_list.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimOutcomeList-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimOutcomeList Class — SimOutcomeList-class","title":"SimOutcomeList Class — SimOutcomeList-class","text":"class outcome details part simulation study. Objects class SimOutcomeList created directly constructor sim_outcome_list().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimOutcomeList-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimOutcomeList Class — SimOutcomeList-class","text":"outcome_list named list object class Outcome, one object parameter variation.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimSampleSize-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimSampleSize Class — SimSampleSize-class","title":"SimSampleSize Class — SimSampleSize-class","text":"class creating matrices simulation studies containing flags specifying whether patient concurrent trial (ext = 0 concurrent trial, ext = 1 historical data) whether patient experimental therapy (trt = 0 experimental therapy, trt = 1 experimental therapy).","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimSampleSize-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimSampleSize Class — SimSampleSize-class","text":"n_internal_control integer. Number patients simulated internal control arm. n_external_control integer. Number patients simulated external control arm. n_internal_experimental integer. Number patients simulated internal experimental arm. mat matrix. Matrix two columns, ext (flag external data source) trt (flag receiving experimental treatment)","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimTreatmentList-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimTreatmentList Class — SimTreatmentList-class","title":"SimTreatmentList Class — SimTreatmentList-class","text":"class treatment details part simulation study. Objects class SimTreatmentList created directly constructor sim_treatment_list().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimTreatmentList-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimTreatmentList Class — SimTreatmentList-class","text":"treatment_list named list object class Treatment, one object parameter variation.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimVar-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimVar Class — SimVar-class","title":"SimVar Class — SimVar-class","text":"parent class defining covariates created simulation study calls add_covariates().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimVarBin-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimVarBin class — SimVarBin-class","title":"SimVarBin class — SimVarBin-class","text":"constructor making objects class SimVarBin. Objects class SimVarBin used hold proportions binary variables specified simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimVarBin-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimVarBin class — SimVarBin-class","text":"prob_internal numeric. Proportion internal arms. prob_external numeric. Proportion external arm. mu_internal_before_bin numeric. Mean value covariate binarization internal arms. mu_external_before_bin numeric. Mean value covariate binarization external arm. printval_int numeric. Value print summarize internal arms. printval_ext numeric. Value print summarize external arm. type_string character. 'binary'","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/SimVarCont-class.html","id":null,"dir":"Reference","previous_headings":"","what":"SimVarCont class — SimVarCont-class","title":"SimVarCont class — SimVarCont-class","text":"constructor making objects class SimVarCont. Objects class SimVarCont used hold mean values continuous variables specified simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/SimVarCont-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"SimVarCont class — SimVarCont-class","text":"mu_internal numeric. Mean covariate value internal arms. mu_external numeric. Mean covariate value external arm. printval_int numeric. Value print summarize internal arms. printval_ext numeric. Value print summarize external arm. type_string character. 'continuous'","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/Simulation-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulation Class — Simulation-class","title":"Simulation Class — Simulation-class","text":"class defining Simulation study details. Objects class Simulation created directly constructor create_simulation_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/Simulation-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Simulation Class — Simulation-class","text":"data_matrix_list SimDataList. list lists data matrices created sim_data_list(). outcome SimOutcomeList. List Outcome objects created sim_outcome_list(). borrowing SimBorrowingList. List Borrowing objects created sim_borrowing_list(). covariate SimCovariateList NULL. List Covariate objects created sim_covariate_list() NULL (covariate adjustment). treatment SimTreatmentList. List Treatment objects created sim_treatment_list(). guide data.frame. Data.frame containing information combinations evaluated. n_combos integer. Number combinations parameters evaluated. n_analyses integer. Number analyses (combos x datasets performed). `analysis_obj_list` list. List analysis objects indexed according guide.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/TimeToEvent-class.html","id":null,"dir":"Reference","previous_headings":"","what":"TimeToEvent class — TimeToEvent-class","title":"TimeToEvent class — TimeToEvent-class","text":"TimeToEvent class","code":""},{"path":"https://genentech.github.io/psborrow2/reference/TimeToEvent-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"TimeToEvent class — TimeToEvent-class","text":"function_stan_code character. Code include Stan functions program block. param_stan_code character. Code include Stan parameters program block. likelihood_stan_code character. Code defining likelihood include Stan model program block. data_stan_code character. Code include Stan data program block. n_param integer. Number ancillary parameters model estimate. param_priors list. Named list prior distributions ancillary parameters model. time_var character. Variable used time TimeToEvent objects. cens_var character. Variable used censoring TimeToEvent objects. baseline_prior Prior. Object class Prior specifying prior distribution baseline outcome.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/Treatment-class.html","id":null,"dir":"Reference","previous_headings":"","what":"Treatment Class — Treatment-class","title":"Treatment Class — Treatment-class","text":"class defining treatment details. Objects class Treatment created directly constructor treatment_details().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/Treatment-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"Treatment Class — Treatment-class","text":"trt_flag_col character. Character specifying name column model matrix corresponds treatment flag (1/0 TRUE/FALSE). identifies patients belonging experimental treatment arm. trt_prior Prior. Object class Prior specifying prior distribution log effect estimate (log hazard ratio time event endpoints log odds ratio binary endpoints).","code":""},{"path":"https://genentech.github.io/psborrow2/reference/UniformPrior-class.html","id":null,"dir":"Reference","previous_headings":"","what":"UniformPrior Class — UniformPrior-class","title":"UniformPrior Class — UniformPrior-class","text":"class defining uniform priors translated Stan code. Objects class UniformPrior created directly constructor uniform_prior().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/UniformPrior-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"UniformPrior Class — UniformPrior-class","text":"stan_code character. Stan implementation prior, placeholders uniform stan function parameters surrounded {{ }} replaced glue::glue(). n_param integer. Number prior parameters (2). constraint character. Support prior distribution, \"<lower=alpha, upper=beta>\". alpha numeric. Lower bound. beta numeric. Upper bound (>alpha).","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/WeibullPHSurvDist-class.html","id":null,"dir":"Reference","previous_headings":"","what":"WeibullPHSurvDist Class — WeibullPHSurvDist-class","title":"WeibullPHSurvDist Class — WeibullPHSurvDist-class","text":"class defining time--event survival analysis Weibull proportional hazards survival distribution. Objects class WeibullPHSurvDist created directly constructor weib_ph_surv_dist().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/WeibullPHSurvDist-class.html","id":"slots","dir":"Reference","previous_headings":"","what":"Slots","title":"WeibullPHSurvDist Class — WeibullPHSurvDist-class","text":"function_stan_code character. Stan function code block containing text interpolate Stan model. param_stan_code character. Stan parameter code block containing text interpolate Stan model. likelihood_stan_code character. Stan model likelihood code block containing text interpolate Stan model. n_param integer. Number ancillary parameters model estimate (1). param_priors list. Named list prior distributions ancillary parameters model. time_var character. Variable used time TimeToEvent objects. cens_var character. Variable used censoring TimeToEvent objects. baseline_prior Prior. Object class Prior specifying prior distribution baseline outcome.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/add_covariates.html","id":null,"dir":"Reference","previous_headings":"","what":"Add Covariates for Model Adjustment — add_covariates","title":"Add Covariates for Model Adjustment — add_covariates","text":"Specify column names adjustment variables model matrix prior distributions model parameters covariates (.e., betas)","code":""},{"path":"https://genentech.github.io/psborrow2/reference/add_covariates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add Covariates for Model Adjustment — add_covariates","text":"","code":"add_covariates(covariates, priors)"},{"path":"https://genentech.github.io/psborrow2/reference/add_covariates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add Covariates for Model Adjustment — add_covariates","text":"covariates character. Names columns data matrix containing covariates adjusted outcome model. Note: external treatment flags go . priors Either single object class Prior specifying prior distribution apply covariates named list distributions class Prior, one covariate","code":""},{"path":"https://genentech.github.io/psborrow2/reference/add_covariates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add Covariates for Model Adjustment — add_covariates","text":"Object class Covariates.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/add_covariates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add Covariates for Model Adjustment — add_covariates","text":"","code":"add_covariates(   covariates = c(\"a\", \"b\"),   priors = list(     \"a\" = normal_prior(0, 1),     \"b\" = normal_prior(0, 2)   ) ) #> Covariate object with priors for variables: #> a, b  #>  #> Prior for a: #> Normal Distribution #> Parameters: #>  Stan  R    Value #>  mu    mean 0     #>  sigma sd   1     #>  #> Prior for b: #> Normal Distribution #> Parameters: #>  Stan  R    Value #>  mu    mean 0     #>  sigma sd   2     #>"},{"path":"https://genentech.github.io/psborrow2/reference/baseline_covariates.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify Correlated Baseline Covariates — baseline_covariates","title":"Specify Correlated Baseline Covariates — baseline_covariates","text":"Set parameters generate correlated multivariate normal data internal external patients.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/baseline_covariates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify Correlated Baseline Covariates — baseline_covariates","text":"","code":"baseline_covariates(   names,   means_int,   means_ext = means_int,   covariance_int,   covariance_ext = covariance_int )"},{"path":"https://genentech.github.io/psborrow2/reference/baseline_covariates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify Correlated Baseline Covariates — baseline_covariates","text":"names character vector variable names. means_int numeric vector means internal patients. Must length names means_ext numeric vector means external patients. Must length names covariance_int variance-covariance matrix generating multivariate normal internal patients. Must square matrix number rows length(names) covariance_ext variance-covariance matrix generating multivariate normal data external patients. Must square matrix number rows length(names)","code":""},{"path":"https://genentech.github.io/psborrow2/reference/baseline_covariates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify Correlated Baseline Covariates — baseline_covariates","text":"BaselineObject build simulated dataset","code":""},{"path":"https://genentech.github.io/psborrow2/reference/baseline_covariates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Specify Correlated Baseline Covariates — baseline_covariates","text":"","code":"corr_covs <- baseline_covariates(   names = c(\"b1\", \"b2\"),   means_int = c(5, 25),   covariance_int = covariance_matrix(diag = c(1, 1), upper_tri = 0.4) )"},{"path":"https://genentech.github.io/psborrow2/reference/bernoulli_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior bernoulli distribution — bernoulli_prior","title":"Prior bernoulli distribution — bernoulli_prior","text":"Prior bernoulli distribution","code":""},{"path":"https://genentech.github.io/psborrow2/reference/bernoulli_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior bernoulli distribution — bernoulli_prior","text":"","code":"bernoulli_prior(theta)"},{"path":"https://genentech.github.io/psborrow2/reference/bernoulli_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior bernoulli distribution — bernoulli_prior","text":"theta numeric. Probability ([0, 1]).","code":""},{"path":"https://genentech.github.io/psborrow2/reference/bernoulli_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior bernoulli distribution — bernoulli_prior","text":"Object class BernoulliPrior.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/bernoulli_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior bernoulli distribution — bernoulli_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/bernoulli-distribution.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/bernoulli_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior bernoulli distribution — bernoulli_prior","text":"","code":"bp <- bernoulli_prior(0.23)"},{"path":"https://genentech.github.io/psborrow2/reference/beta_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior beta distribution — beta_prior","title":"Prior beta distribution — beta_prior","text":"Prior beta distribution","code":""},{"path":"https://genentech.github.io/psborrow2/reference/beta_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior beta distribution — beta_prior","text":"","code":"beta_prior(alpha, beta)"},{"path":"https://genentech.github.io/psborrow2/reference/beta_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior beta distribution — beta_prior","text":"alpha numeric. Shape (>=0). beta numeric. Shape (>=0).","code":""},{"path":"https://genentech.github.io/psborrow2/reference/beta_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior beta distribution — beta_prior","text":"Object class BetaPrior","code":""},{"path":"https://genentech.github.io/psborrow2/reference/beta_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior beta distribution — beta_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/beta-distribution.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/beta_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior beta distribution — beta_prior","text":"","code":"bp <- beta_prior(9, 235)"},{"path":"https://genentech.github.io/psborrow2/reference/bin_var.html","id":null,"dir":"Reference","previous_headings":"","what":"Create binary covariate — bin_var","title":"Create binary covariate — bin_var","text":"Create object class SimVarBin hold proportions binary variables specified simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/bin_var.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create binary covariate — bin_var","text":"","code":"bin_var(   prob_internal,   prob_external,   mu_internal_before_bin = 0,   mu_external_before_bin = 0 )"},{"path":"https://genentech.github.io/psborrow2/reference/bin_var.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create binary covariate — bin_var","text":"prob_internal numeric. Proportion internal arms. prob_external numeric. Proportion external arm. mu_internal_before_bin numeric. Mean value covariate binarization internal arms. default 0. See details information. mu_external_before_bin numeric. Mean value covariate binarization external arm. default 0. See details information.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/bin_var.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create binary covariate — bin_var","text":"function contains information necessary create binary covariates part simulation study. binary covariates created binarizing multivariate normal distributions achieve probabilities specified prob_internal prob_external. user may choose change default mean value variable prior binarization specifying mu_internal_before_bin mu_external_before_bin ensure correct scales used covariance matrix, though ultimate proportions depend prob_internal prob_external. default values mu_internal_before_bin mu_external_before_bin 0, recommended change without good reason.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/bin_var.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create binary covariate — bin_var","text":"","code":"cv1 <- bin_var(0.50, 0.80) #> Loading required namespace: testthat cv2 <- bin_var(.95, .92)"},{"path":"https://genentech.github.io/psborrow2/reference/binary_cutoff.html","id":null,"dir":"Reference","previous_headings":"","what":"Binary Cut-Off Transformation — binary_cutoff","title":"Binary Cut-Off Transformation — binary_cutoff","text":"Binary Cut-Transformation","code":""},{"path":"https://genentech.github.io/psborrow2/reference/binary_cutoff.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Binary Cut-Off Transformation — binary_cutoff","text":"","code":"binary_cutoff(name, int_cutoff, ext_cutoff)"},{"path":"https://genentech.github.io/psborrow2/reference/binary_cutoff.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Binary Cut-Off Transformation — binary_cutoff","text":"name variable transform int_cutoff cut-internal patients, numeric 0 1 ext_cutoff cut-external patients, numeric 0 1","code":""},{"path":"https://genentech.github.io/psborrow2/reference/binary_cutoff.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Binary Cut-Off Transformation — binary_cutoff","text":"Transformation function used create_baseline_object(). Sets quantile values larger cut-value TRUE otherwise FALSE.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/binary_cutoff.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Binary Cut-Off Transformation — binary_cutoff","text":"","code":"# Creates a simple function, where `data` is a `BaselineDataFrame`: function(data) {   ext <- data$ext == 0   q <- get_quantiles(data, name)   ifelse(ext, q > int_cutoff, q > ext_cutoff) } #> function(data) { #>   ext <- data$ext == 0 #>   q <- get_quantiles(data, name) #>   ifelse(ext, q > int_cutoff, q > ext_cutoff) #> } #> <environment: 0x561a3bf7a4d8>"},{"path":"https://genentech.github.io/psborrow2/reference/borrowing_details.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify Borrowing Model — borrowing_details","title":"Specify Borrowing Model — borrowing_details","text":"Specify type borrowing , Bayesian Dynamic Borrowing, set hyperprior commensurability parameter tau.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/borrowing_details.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify Borrowing Model — borrowing_details","text":"","code":"borrowing_details(method, ext_flag_col, tau_prior = NULL)"},{"path":"https://genentech.github.io/psborrow2/reference/borrowing_details.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify Borrowing Model — borrowing_details","text":"method character. type borrowing perform. must one : 'BDB', 'Full borrowing', 'borrowing'. See Details information. ext_flag_col character. name column data matrix corresponds external control flag (1/0 TRUE/FALSE). identifies patient belonging external control cohort. tau_prior Object class Prior defining hyperprior \"commensurability parameter\". See Details information.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/borrowing_details.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify Borrowing Model — borrowing_details","text":"Object class Borrowing.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/borrowing_details.html","id":"method","dir":"Reference","previous_headings":"","what":"Method","title":"Specify Borrowing Model — borrowing_details","text":"method argument specifies type borrowing implemented. currently three types borrowing supported: 'BDB' Bayesian Dynamic Borrowing. Bayesian Dynamic Borrowing, external control information borrowed extent outcomes (.e., log hazard rates log odds) similar external internal control populations. See Viele et. al. 2014. 'Full borrowing' pooling historical concurrent controls. distinction patients internal external control arms. ext_flag_col must still specified, used. 'borrowing' evaluating internal comparison, ignoring historical controls. Note method filter model matrix based values ext_flag_col. Though ultimate model specification 'Full borrowing' 'borrowing', available options facilitate comparison methods.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/borrowing_details.html","id":"external-control","dir":"Reference","previous_headings":"","what":"External Control","title":"Specify Borrowing Model — borrowing_details","text":"ext_flag_col argument refers column data matrix contains flag indicating patient external control cohort. column used 'Full borrowing', must still specified.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/borrowing_details.html","id":"tau-prior","dir":"Reference","previous_headings":"","what":"Tau Prior","title":"Specify Borrowing Model — borrowing_details","text":"tau_prior argument specifies hyperprior precision parameter commonly referred commensurability parameter. See Viele et. al. 2014 details. hyperprior determines (along comparability outcomes internal external controls) much borrowing external control group performed. Example hyperpriors include largely uninformative inverse gamma distributions [e.g., gamma_prior(alpha = .001, beta = .001)] well informative distributions [e.g., gamma_prior(alpha = 1, beta = .001)], though distribution \\(x \\(0, \\infty)\\) can used. Distributions density higher values \\(x\\) (.e., higher precision) lead borrowing.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/borrowing_details.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Specify Borrowing Model — borrowing_details","text":"Viele, K., Berry, S., Neuenschwander, B., Amzal, B., Chen, F., Enas, N., Hobbs, B., Ibrahim, J.G., Kinnersley, N., Lindborg, S., Micallef, S., Roychoudhury, S. Thompson, L. (2014), Use historical control data assessing treatment effects clinical trials. Pharmaceut. Statist., 13: 41--54. doi:10.1002/pst.1589","code":""},{"path":"https://genentech.github.io/psborrow2/reference/borrowing_details.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Specify Borrowing Model — borrowing_details","text":"","code":"sb <- borrowing_details(   method = \"BDB\",   ext_flag_col = \"ext\",   tau_prior = gamma_prior(0.001, 0.001) )"},{"path":"https://genentech.github.io/psborrow2/reference/cauchy_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior cauchy distribution — cauchy_prior","title":"Prior cauchy distribution — cauchy_prior","text":"Prior cauchy distribution","code":""},{"path":"https://genentech.github.io/psborrow2/reference/cauchy_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior cauchy distribution — cauchy_prior","text":"","code":"cauchy_prior(mu, sigma)"},{"path":"https://genentech.github.io/psborrow2/reference/cauchy_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior cauchy distribution — cauchy_prior","text":"mu numeric. Location. sigma numeric. Scale (>0).","code":""},{"path":"https://genentech.github.io/psborrow2/reference/cauchy_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior cauchy distribution — cauchy_prior","text":"Object class CauchyPrior.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/cauchy_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior cauchy distribution — cauchy_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/cauchy-distribution.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/cauchy_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior cauchy distribution — cauchy_prior","text":"","code":"cp <- cauchy_prior(1, 1)"},{"path":"https://genentech.github.io/psborrow2/reference/check_cmdstanr.html","id":null,"dir":"Reference","previous_headings":"","what":"Check Stan — check_cmdstanr","title":"Check Stan — check_cmdstanr","text":"Check whether cmdstanr available prints version logistic example.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/check_cmdstanr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check Stan — check_cmdstanr","text":"","code":"check_cmdstanr(check_sampling = FALSE)"},{"path":"https://genentech.github.io/psborrow2/reference/check_cmdstanr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check Stan — check_cmdstanr","text":"check_sampling Compile sample \"logistic\" example model.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/check_cmdstanr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check Stan — check_cmdstanr","text":"","code":"check_cmdstanr() #> cmdstan version:  #> [1] \"2.33.1\" #> Example program: #> data { #>   int<lower=0> N; #>   int<lower=0> K; #>   array[N] int<lower=0, upper=1> y; #>   matrix[N, K] X; #> } #> parameters { #>   real alpha; #>   vector[K] beta; #> } #> model { #>   target += normal_lpdf(alpha | 0, 1); #>   target += normal_lpdf(beta | 0, 1); #>   target += bernoulli_logit_glm_lpmf(y | X, alpha, beta); #> } #> generated quantities { #>   vector[N] log_lik; #>   for (n in 1 : N) { #>     log_lik[n] = bernoulli_logit_lpmf(y[n] | alpha + X[n] * beta); #>   } #> }"},{"path":"https://genentech.github.io/psborrow2/reference/check_data_matrix_has_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Check Data Matrix for Required Columns — check_data_matrix_has_columns","title":"Check Data Matrix for Required Columns — check_data_matrix_has_columns","text":"Check Analysis object's data_matrix required variables.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/check_data_matrix_has_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check Data Matrix for Required Columns — check_data_matrix_has_columns","text":"","code":"check_data_matrix_has_columns(object)"},{"path":"https://genentech.github.io/psborrow2/reference/check_data_matrix_has_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check Data Matrix for Required Columns — check_data_matrix_has_columns","text":"object Analysis. Object check.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/check_data_matrix_has_columns.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check Data Matrix for Required Columns — check_data_matrix_has_columns","text":"stop() columns missing.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/check_data_matrix_has_columns.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check Data Matrix for Required Columns — check_data_matrix_has_columns","text":"","code":"anls <- psborrow2:::.analysis_obj(   data_matrix = example_matrix,   covariates = add_covariates(     covariates = c(\"cov1\", \"cov2\"),     priors = normal_prior(0, 1000)   ),   outcome = exp_surv_dist(     \"time\",     \"cnsr\",     baseline_prior = normal_prior(0, 1000)   ),   borrowing = borrowing_details(     \"BDB\",     \"ext\",     exponential_prior(.001)   ),   treatment = treatment_details(     \"trt\",     normal_prior(0, 1000)   ),   ready_to_sample = FALSE )  check_data_matrix_has_columns(anls)"},{"path":"https://genentech.github.io/psborrow2/reference/cont_var.html","id":null,"dir":"Reference","previous_headings":"","what":"Create continuous covariate — cont_var","title":"Create continuous covariate — cont_var","text":"Create object class SimVarCont hold mean values continuous variables specified simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/cont_var.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create continuous covariate — cont_var","text":"","code":"cont_var(mu_internal, mu_external)"},{"path":"https://genentech.github.io/psborrow2/reference/cont_var.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create continuous covariate — cont_var","text":"mu_internal numeric. Mean covariate value internal arms. mu_external numeric. Mean covariate value external arm.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/cont_var.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create continuous covariate — cont_var","text":"","code":"cv1 <- cont_var(0.5, 1) cv2 <- cont_var(10, 10)"},{"path":"https://genentech.github.io/psborrow2/reference/covariance_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Covariance Matrix — covariance_matrix","title":"Create Covariance Matrix — covariance_matrix","text":"Create Covariance Matrix","code":""},{"path":"https://genentech.github.io/psborrow2/reference/covariance_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Covariance Matrix — covariance_matrix","text":"","code":"covariance_matrix(diag, upper_tri)"},{"path":"https://genentech.github.io/psborrow2/reference/covariance_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Covariance Matrix — covariance_matrix","text":"diag Diagonal entries covariance matrix upper_tri Upper triangle entries matrix, specified column wise.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/covariance_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Covariance Matrix — covariance_matrix","text":"symmetric matrix diag values main diagonal upper_tri values lower upper triangles.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/covariance_matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create Covariance Matrix — covariance_matrix","text":"","code":"m1 <- covariance_matrix(c(1, 1, 1, 1), c(.8, .3, .8, 0, 0, 0)) m1 #>      [,1] [,2] [,3] [,4] #> [1,]  1.0  0.8  0.3    0 #> [2,]  0.8  1.0  0.8    0 #> [3,]  0.3  0.8  1.0    0 #> [4,]  0.0  0.0  0.0    1 mvtnorm::rmvnorm(5, mean = c(0, 0, 0, 0), sigma = m1) #>            [,1]       [,2]       [,3]       [,4] #> [1,]  0.6148271  0.5585870  0.4211300 -0.1209310 #> [2,]  0.1047840  1.2428587  1.4699268  0.8257669 #> [3,] -1.1223699 -0.9823901 -0.3008945 -0.6023567 #> [4,]  0.5414337  1.1301685  1.1932900 -0.8547885 #> [5,]  0.6256225  0.5449697  0.2189678  0.5553852  # No correlation covariance_matrix(c(1, 2, 3)) #>      [,1] [,2] [,3] #> [1,]    1    0    0 #> [2,]    0    2    0 #> [3,]    0    0    3"},{"path":"https://genentech.github.io/psborrow2/reference/create_analysis_obj.html","id":null,"dir":"Reference","previous_headings":"","what":"Compile MCMC sampler using STAN and create analysis object — create_analysis_obj","title":"Compile MCMC sampler using STAN and create analysis object — create_analysis_obj","text":"Compile MCMC sampler using STAN create analysis object","code":""},{"path":"https://genentech.github.io/psborrow2/reference/create_analysis_obj.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compile MCMC sampler using STAN and create analysis object — create_analysis_obj","text":"","code":"create_analysis_obj(   data_matrix,   covariates = NULL,   outcome,   borrowing,   treatment,   quiet = FALSE )"},{"path":"https://genentech.github.io/psborrow2/reference/create_analysis_obj.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compile MCMC sampler using STAN and create analysis object — create_analysis_obj","text":"data_matrix matrix. data matrix, including covariates adjusted , relevant outcome variables, treatment arm external control arm flags. covariates Covariates. Object class Covariates output function add_covariates(). outcome Outcome. Object class Outcome output exp_surv_dist(), weib_ph_surv_dist(), logistic_bin_outcome(). borrowing Borrowing. Object class Borrowing output borrowing_details(). treatment Treatment. Object class Treatment output treatment_details(). quiet logical. Whether suppress messages (TRUE) (FALSE, default)","code":""},{"path":"https://genentech.github.io/psborrow2/reference/create_analysis_obj.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compile MCMC sampler using STAN and create analysis object — create_analysis_obj","text":"Object class Analysis.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/create_analysis_obj.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compile MCMC sampler using STAN and create analysis object — create_analysis_obj","text":"","code":"anls <- create_analysis_obj(   data_matrix = example_matrix,   covariates = add_covariates(     covariates = c(\"cov1\", \"cov2\"),     priors = normal_prior(0, 1000)   ),   outcome = exp_surv_dist(     \"time\",     \"cnsr\",     baseline_prior = normal_prior(0, 1000)   ),   borrowing = borrowing_details(     \"BDB\",     \"ext\",     exponential_prior(.001)   ),   treatment = treatment_details(     \"trt\",     normal_prior(0, 1000)   ) ) #> Inputs look good. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`."},{"path":"https://genentech.github.io/psborrow2/reference/create_baseline_object.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Baseline Data Simulation Object — create_baseline_object","title":"Create Baseline Data Simulation Object — create_baseline_object","text":"Create Baseline Data Simulation Object","code":""},{"path":"https://genentech.github.io/psborrow2/reference/create_baseline_object.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Baseline Data Simulation Object — create_baseline_object","text":"","code":"create_baseline_object(   n_trt_int,   n_ctrl_int,   n_ctrl_ext,   covariates,   transformations )"},{"path":"https://genentech.github.io/psborrow2/reference/create_baseline_object.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Baseline Data Simulation Object — create_baseline_object","text":"n_trt_int Number internal treated patients n_ctrl_int Number internal control patients n_ctrl_ext Number external control patients covariates List correlated covariates objects, see baseline_covariates() transformations List named transformation functions.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/create_baseline_object.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Baseline Data Simulation Object — create_baseline_object","text":"BaselineObject","code":""},{"path":"https://genentech.github.io/psborrow2/reference/create_baseline_object.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create Baseline Data Simulation Object — create_baseline_object","text":"Transformation functions evaluated order create overwrite column data.frame name. function take data.frame (specifically BaselineDataFrame object generate(BaselineObject)) return vector length identical total number patients. @BaselineObject slot may accessed directly get_quantiles() create transformations. See binary_cutoff()","code":""},{"path":"https://genentech.github.io/psborrow2/reference/create_baseline_object.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create Baseline Data Simulation Object — create_baseline_object","text":"","code":"bl_no_covs <- create_baseline_object(   n_trt_int = 100,   n_ctrl_int = 50,   n_ctrl_ext = 100 )   bl_biomarkers <- create_baseline_object(   n_trt_int = 100,   n_ctrl_int = 50,   n_ctrl_ext = 100,   covariates = baseline_covariates(     c(\"b1\", \"b2\", \"b3\"),     means_int = c(0, 0, 0),     covariance_int = covariance_matrix(c(1, 1, 1), c(.8, .3, .8))   ),   transformations = list(     exp_b1 = function(data) exp(data$b1),     b2 = binary_cutoff(\"b2\", int_cutoff = 0.7, ext_cutoff = 0.5)   ) )"},{"path":"https://genentech.github.io/psborrow2/reference/create_data_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Data Matrix — create_data_matrix","title":"Create Data Matrix — create_data_matrix","text":"Creates matrix suitable create_analysis_obj(). Creates dummy variables factors allows transformations covariates specified formula.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/create_data_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Data Matrix — create_data_matrix","text":"","code":"create_data_matrix(   data,   outcome,   trt_flag_col,   ext_flag_col,   covariates = NULL,   weight_var = NULL )"},{"path":"https://genentech.github.io/psborrow2/reference/create_data_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Data Matrix — create_data_matrix","text":"data data.frame. Data containing variables outcome character. outcome variable binary outcomes time censoring variables. trt_flag_col character. treatment indicator variable. ext_flag_col character. external cohort indicator. covariates character formula. covariates model adjustment. weight_var character. optional weight variable.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/create_data_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Data Matrix — create_data_matrix","text":"Invisibly returns matrix containing variables pass create_analysis_obj(). Prints names covariates columns use add_covariates().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/create_data_matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create Data Matrix — create_data_matrix","text":"","code":"dat <- survival::diabetic dat$ext <- dat$trt == 0 & dat$id > 1000 data_mat <- create_data_matrix(   dat,   outcome = c(\"time\", \"status\"),   trt_flag_col = \"trt\",   ext_flag_col = \"ext\",   covariates = ~ age + laser + log(risk) ) #> Call `add_covariates()` with `covariates =  c(\"age\", \"laserargon\", \"log(risk)\") ` data_mat #>      time status trt extTRUE age laserargon log(risk) #> 1   46.23      0   0       0  28          1  2.197225 #> 2   46.23      0   1       0  28          1  2.197225 #> 3   42.50      0   1       0  12          0  2.079442 #> 4   31.30      1   0       0  12          0  1.791759 #> 5   42.27      0   1       0   9          0  2.397895 #> 6   42.27      0   0       0   9          0  2.397895 #> 7   20.60      0   0       0   9          0  2.397895 #> 8   20.60      0   1       0   9          0  2.397895 #> 9    0.30      1   0       0  13          0  2.302585 #> 10  38.77      0   1       0  13          0  2.197225 #> 11  65.23      0   1       0  12          0  2.197225 #> 12  54.27      1   0       0  12          0  2.197225 #> 13  63.50      0   1       0   8          0  2.079442 #> 14  10.80      1   0       0   8          0  1.791759 #> 15  23.17      0   1       0  12          0  2.079442 #> 16  23.17      0   0       0  12          0  2.197225 #> 17   1.47      0   1       0  16          0  2.197225 #> 18   1.47      0   0       0  16          0  2.302585 #> 19  58.07      0   1       0  21          1  2.197225 #> 20  13.83      1   0       0  21          1  2.197225 #> 21  48.53      0   0       0  23          1  2.197225 #> 22  46.43      1   1       0  23          1  2.197225 #> 23  44.40      0   1       0  44          1  2.397895 #> 24   7.90      1   0       0  44          1  2.484907 #> 25  39.57      0   0       0  47          1  1.791759 #> 26  39.57      0   1       0  47          1  2.397895 #> 27  30.83      1   1       0  48          1  1.791759 #> 28  38.57      1   0       0  48          1  2.302585 #> 29  66.27      0   1       0  26          1  2.302585 #> 30  14.10      1   0       0  26          1  2.197225 #> 31   6.90      1   0       0  10          0  2.302585 #> 32  20.17      1   1       0  10          0  2.197225 #> 33  41.40      1   0       0  23          1  2.197225 #> 34  58.43      0   1       0  23          1  2.484907 #> 35  58.20      0   1       0   5          0  2.197225 #> 36  58.20      0   0       0   5          0  2.197225 #> 37  57.43      0   1       0  46          1  1.791759 #> 38  57.43      0   0       0  46          1  2.079442 #> 39  56.03      0   1       0   5          0  2.397895 #> 40  56.03      0   0       0   5          0  2.484907 #> 41  67.53      0   0       0  13          0  2.197225 #> 42  67.53      0   1       0  13          0  2.197225 #> 43  61.40      0   1       0  45          1  2.197225 #> 44   0.60      1   0       0  45          1  2.484907 #> 45  10.27      1   1       0  11          0  2.302585 #> 46   1.63      1   0       0  11          0  2.302585 #> 47  66.20      0   0       0   1          0  2.397895 #> 48  66.20      0   1       0   1          0  2.484907 #> 49  13.83      1   0       0  10          0  2.197225 #> 50   5.67      1   1       0  10          0  2.484907 #> 51  58.83      0   1       0  12          0  2.197225 #> 52  29.97      1   0       0  12          0  2.397895 #> 53  60.27      0   1       0  36          1  2.197225 #> 54  26.37      1   0       0  36          1  2.397895 #> 55   1.33      1   0       0  53          1  2.484907 #> 56   5.77      1   1       0  53          1  2.302585 #> 57  35.53      1   0       0  10          0  2.397895 #> 58   5.90      1   1       0  10          0  2.397895 #> 59  21.90      1   0       0  25          1  2.197225 #> 60  25.63      1   1       0  25          1  2.302585 #> 61  14.80      1   0       0  14          0  2.197225 #> 62  33.90      1   1       0  14          0  2.197225 #> 63   6.20      1   0       0  16          0  2.079442 #> 64   1.73      1   1       0  16          0  2.302585 #> 65  22.00      1   0       0  38          1  2.079442 #> 66  46.90      0   1       0  38          1  2.197225 #> 67  31.13      0   0       0  14          0  2.197225 #> 68  31.13      0   1       0  14          0  2.197225 #> 69  22.00      1   0       0  10          0  2.397895 #> 70  30.20      1   1       0  10          0  2.197225 #> 71  70.90      0   0       0  17          0  2.484907 #> 72  70.90      0   1       0  17          0  2.397895 #> 73  25.80      1   1       0  44          1  2.397895 #> 74  13.87      1   0       0  44          1  2.079442 #> 75  48.30      1   0       0  21          1  2.197225 #> 76   5.73      1   1       0  21          1  2.197225 #> 77  53.43      0   0       0  19          0  2.197225 #> 78  53.43      0   1       0  19          0  2.197225 #> 79   1.90      1   1       0  13          0  2.302585 #> 80  51.10      0   0       0  13          0  2.484907 #> 81   9.90      1   0       0  40          1  2.197225 #> 82   9.90      1   1       0  40          1  2.302585 #> 83  34.20      0   1       0   9          0  2.079442 #> 84  34.20      0   0       0   9          0  2.484907 #> 85   2.67      1   0       0  48          1  2.484907 #> 86  46.73      0   1       0  48          1  2.302585 #> 87  18.73      0   1       0  42          1  2.302585 #> 88  13.83      1   0       0  42          1  2.302585 #> 89  32.03      0   1       0  24          1  2.397895 #> 90   4.27      1   0       0  24          1  2.302585 #> 91  13.90      1   0       0  55          1  2.302585 #> 92  69.87      0   1       0  55          1  2.302585 #> 93  66.80      0   0       0  17          0  2.197225 #> 94  66.80      0   1       0  17          0  2.397895 #> 95  64.73      0   1       0   5          0  2.197225 #> 96  64.73      0   0       0   5          0  2.079442 #> 97   1.70      1   1       0   6          0  2.302585 #> 98   1.70      1   0       0   6          0  1.791759 #> 99   1.77      1   1       0  19          0  2.197225 #> 100 43.03      1   0       0  19          0  2.484907 #> 101 29.03      0   1       0  12          0  2.079442 #> 102 29.03      0   0       0  12          0  2.079442 #> 103 56.57      0   0       0  45          1  2.197225 #> 104 56.57      0   1       0  45          1  2.197225 #> 105  8.30      1   0       0  27          1  2.302585 #> 106  8.30      1   1       0  27          1  2.197225 #> 107 21.57      0   1       0  43          1  2.079442 #> 108 18.43      1   0       0  43          1  2.197225 #> 109 31.57      0   0       0   4          0  2.079442 #> 110 31.57      0   1       0   4          0  2.197225 #> 111 31.63      1   0       0  45          1  2.197225 #> 112 31.63      0   1       0  45          1  2.302585 #> 113 39.77      0   1       0  32          1  2.397895 #> 114 39.77      0   0       0  32          1  2.302585 #> 115  6.53      1   0       0   3          0  2.397895 #> 116 18.70      1   1       0   3          0  2.302585 #> 117 18.90      0   1       0  14          0  2.079442 #> 118 18.90      0   0       0  14          0  2.197225 #> 119 56.80      0   1       0  13          0  2.302585 #> 120 22.23      1   0       0  13          0  2.079442 #> 121 55.60      0   1       0  15          0  2.302585 #> 122 14.00      1   0       0  15          0  2.197225 #> 123 42.17      1   0       0  10          0  2.302585 #> 124 42.17      1   1       0  10          0  2.197225 #> 125  5.33      1   0       0   6          0  2.197225 #> 126 10.70      0   1       0   6          0  2.197225 #> 127 59.80      1   0       0  17          0  2.302585 #> 128 66.33      0   1       0  17          0  2.197225 #> 129  5.83      1   0       0  37          1  2.397895 #> 130 52.33      0   1       0  37          1  2.484907 #> 131 58.17      0   1       0  18          0  2.197225 #> 132  2.17      1   0       0  18          0  2.484907 #> 133 48.43      1   0       0  13          0  2.079442 #> 134 14.30      1   1       0  13          0  2.197225 #> 135 25.83      0   0       0  14          0  2.302585 #> 136 25.83      0   1       0  14          0  2.484907 #> 137 45.40      0   1       0  12          0  2.302585 #> 138 45.40      0   0       0  12          0  2.197225 #> 139 47.60      0   1       0   9          0  1.791759 #> 140 47.60      0   0       0   9          0  2.197225 #> 141  9.60      1   0       0  11          0  2.302585 #> 142 13.33      1   1       0  11          0  2.484907 #> 143 42.10      0   0       0  10          0  2.397895 #> 144 42.10      0   1       0  10          0  2.397895 #> 145 39.93      0   1       0   5          0  2.197225 #> 146 39.93      0   0       0   5          0  1.791759 #> 147  7.60      1   0       0  15          0  2.484907 #> 148 14.27      1   1       0  15          0  2.197225 #> 149  1.80      1   0       0   7          0  2.484907 #> 150 34.57      1   1       0   7          0  2.484907 #> 151  4.30      1   0       0   2          0  2.484907 #> 152 65.80      0   1       0   2          0  2.197225 #> 153 12.20      1   0       0  22          1  1.791759 #> 154  4.10      1   1       0  22          1  2.079442 #> 155 60.93      0   0       0   5          0  2.484907 #> 156 60.93      0   1       0   5          0  2.397895 #> 157 57.20      0   0       0   4          0  2.197225 #> 158 57.20      0   1       0   4          0  2.302585 #> 159 38.07      0   1       0  27          1  2.079442 #> 160 12.73      1   0       0  27          1  2.302585 #> 161 54.10      0   1       0  53          1  2.397895 #> 162 54.10      1   0       0  53          1  2.397895 #> 163 59.27      0   1       0  10          0  2.197225 #> 164  9.40      1   0       0  10          0  2.484907 #> 165  9.90      1   0       0  13          0  2.302585 #> 166 21.57      1   1       0  13          0  2.484907 #> 167 54.10      0   0       0  12          0  2.079442 #> 168 54.10      0   1       0  12          0  2.079442 #> 169 50.47      0   0       0  24          1  2.397895 #> 170 50.47      0   1       0  24          1  2.197225 #> 171 46.17      0   0       0  17          0  2.484907 #> 172 46.17      0   1       0  17          0  2.197225 #> 173 46.30      0   0       0   8          0  2.397895 #> 174 46.30      0   1       0   8          0  2.397895 #> 175 38.83      0   1       0  58          1  2.484907 #> 176 38.83      0   0       0  58          1  2.197225 #> 177 44.60      0   0       0  17          0  2.197225 #> 178 44.60      0   1       0  17          0  2.197225 #> 179 43.07      0   0       0  12          0  2.197225 #> 180 43.07      0   1       0  12          0  2.484907 #> 181 40.03      0   0       0  25          1  2.079442 #> 182 26.23      1   1       0  25          1  2.079442 #> 183 41.60      0   1       0  15          0  2.197225 #> 184 18.03      1   0       0  15          0  2.397895 #> 185 38.07      0   0       0  21          1  2.397895 #> 186 38.07      0   1       0  21          1  2.397895 #> 187 65.23      0   1       0  20          1  2.197225 #> 188 65.23      0   0       0  20          1  2.197225 #> 189  7.07      1   1       0  23          1  2.302585 #> 190 66.77      0   0       0  23          1  2.484907 #> 191 13.77      1   0       0  13          0  2.484907 #> 192 13.77      1   1       0  13          0  2.302585 #> 193  9.63      1   0       0  45          1  2.484907 #> 194  9.63      0   1       0  45          1  2.302585 #> 195 46.23      0   1       0   5          0  2.484907 #> 196 46.23      0   0       0   5          0  2.484907 #> 197  1.50      1   0       0   8          0  2.484907 #> 198 45.73      0   1       0   8          0  2.197225 #> 199 33.63      1   0       0  30          1  2.197225 #> 200 33.63      1   1       0  30          1  2.197225 #> 201 40.17      0   0       0   7          0  1.791759 #> 202 40.17      0   1       0   7          0  2.079442 #> 203 27.60      1   0       0  39          1  2.302585 #> 204 63.33      1   1       0  39          1  2.397895 #> 205 38.47      1   1       0  26          1  2.302585 #> 206  1.63      1   0       0  26          1  2.302585 #> 207 55.23      0   1       0  50          1  1.791759 #> 208 55.23      0   0       0  50          1  2.079442 #> 209 25.30      1   0       0  34          1  2.302585 #> 210 52.77      0   1       0  34          1  1.791759 #> 211 46.20      1   0       0  10          0  2.079442 #> 212 57.17      0   1       0  10          0  1.791759 #> 213  9.87      0   1       0  40          1  2.302585 #> 214  1.70      1   0       0  40          1  2.302585 #> 215 57.90      0   0       0  13          0  2.397895 #> 216 57.90      0   1       0  13          0  2.484907 #> 217  5.90      0   0       0   7          0  2.484907 #> 218  5.90      0   1       0   7          0  2.302585 #> 219 32.20      0   0       0  11          0  2.484907 #> 220 32.20      0   1       0  11          0  2.484907 #> 221 10.33      1   1       0  13          0  2.197225 #> 222  0.83      1   0       0  13          0  2.302585 #> 223 50.90      0   0       0   9          0  2.197225 #> 224  6.13      1   1       0   9          0  2.484907 #> 225 25.93      1   0       0   5          0  2.197225 #> 226 43.67      0   1       0   5          0  2.197225 #> 227 38.30      0   0       0  10          0  2.197225 #> 228 38.30      0   1       0  10          0  2.197225 #> 229 38.77      0   1       0  23          1  2.197225 #> 230 19.40      1   0       0  23          1  2.302585 #> 231 21.97      1   0       0   2          0  2.302585 #> 232 38.07      0   1       0   2          0  2.484907 #> 233 38.30      0   1       0  12          0  2.397895 #> 234 38.30      0   0       0  12          0  2.397895 #> 235 70.03      0   0       0   7          0  2.197225 #> 236 26.20      1   1       0   7          0  2.302585 #> 237 18.03      1   0       1  13          0  2.397895 #> 238 62.57      0   1       0  13          0  2.197225 #> 239  1.57      1   0       1  50          1  2.197225 #> 240 13.83      1   1       0  50          1  2.079442 #> 241 46.50      0   1       0  20          1  2.484907 #> 242 13.37      1   0       1  20          1  2.484907 #> 243  1.97      1   0       1  15          0  2.197225 #> 244 11.07      1   1       0  15          0  2.397895 #> 245 42.47      0   1       0  30          1  2.197225 #> 246 22.20      1   0       1  30          1  2.197225 #> 247 38.73      0   0       1  32          1  2.197225 #> 248 38.73      0   1       0  32          1  2.197225 #> 249 51.13      0   0       1  39          1  2.397895 #> 250 51.13      0   1       0  39          1  2.397895 #> 251 46.50      0   0       1   4          0  2.397895 #> 252  6.10      1   1       0   4          0  2.302585 #> 253 11.30      1   0       1   3          0  2.397895 #> 254  2.10      1   1       0   3          0  2.302585 #> 255 17.73      1   1       0  10          0  2.302585 #> 256 42.30      0   0       1  10          0  2.197225 #> 257 26.47      0   0       1   6          0  2.302585 #> 258 26.47      0   1       0   6          0  2.197225 #> 259 10.77      0   1       0  15          0  2.397895 #> 260 10.77      0   0       1  15          0  2.397895 #> 261 55.33      0   1       0  33          1  2.484907 #> 262 55.33      0   0       1  33          1  2.302585 #> 263 58.67      0   1       0  15          0  2.197225 #> 264 58.67      0   0       1  15          0  2.197225 #> 265  4.97      1   0       1  44          1  2.197225 #> 266 12.93      1   1       0  44          1  2.302585 #> 267 26.47      1   0       1  48          1  2.484907 #> 268 54.20      0   1       0  48          1  2.197225 #> 269 49.57      0   0       1   4          0  2.197225 #> 270 49.57      0   1       0   4          0  2.302585 #> 271  9.87      1   0       1  46          1  2.397895 #> 272 24.43      1   1       0  46          1  2.484907 #> 273 50.23      0   0       1  25          1  2.197225 #> 274 50.23      0   1       0  25          1  2.197225 #> 275 30.40      1   0       1  12          0  2.484907 #> 276 13.97      1   1       0  12          0  2.397895 #> 277 43.33      0   1       0  12          0  1.791759 #> 278 43.33      1   0       1  12          0  2.302585 #> 279 42.23      0   1       0  26          1  2.079442 #> 280 42.23      0   0       1  26          1  2.079442 #> 281 74.93      0   0       1  11          0  2.197225 #> 282 74.93      0   1       0  11          0  2.197225 #> 283 66.93      0   1       0  36          1  2.197225 #> 284 66.93      0   0       1  36          1  2.197225 #> 285 73.43      0   1       0  12          0  2.197225 #> 286 73.43      0   0       1  12          0  2.197225 #> 287 67.47      0   1       0  50          1  2.484907 #> 288 38.57      1   0       1  50          1  2.397895 #> 289  3.67      0   1       0  44          1  2.197225 #> 290  3.67      1   0       1  44          1  2.302585 #> 291 67.03      0   0       1   8          0  2.197225 #> 292 48.87      1   1       0   8          0  2.302585 #> 293 65.60      0   1       0  14          0  2.197225 #> 294 65.60      0   0       1  14          0  2.197225 #> 295 15.83      1   0       1  18          0  2.302585 #> 296 15.83      0   1       0  18          0  2.302585 #> 297 20.07      0   1       0  56          1  2.397895 #> 298  8.83      1   0       1  56          1  2.079442 #> 299 67.43      0   0       1   9          0  2.197225 #> 300 67.43      0   1       0   9          0  2.302585 #> 301  1.47      0   1       0  15          0  2.197225 #> 302  1.47      0   0       1  15          0  1.791759 #> 303 62.93      0   1       0   5          0  2.397895 #> 304 22.13      1   0       1   5          0  2.197225 #> 305  6.30      1   1       0   1          0  2.197225 #> 306 56.97      0   0       1   1          0  2.397895 #> 307 59.70      0   1       0   1          0  2.302585 #> 308 18.93      1   0       1   1          0  2.302585 #> 309 19.00      1   0       1  14          0  2.197225 #> 310 13.80      1   1       0  14          0  2.302585 #> 311 55.13      0   1       0  57          1  1.791759 #> 312 55.13      0   0       1  57          1  1.791759 #> 313  5.43      1   0       1   8          0  2.397895 #> 314 13.57      1   1       0   8          0  2.397895 #> 315 42.20      0   1       0  33          1  2.397895 #> 316 42.20      0   0       1  33          1  2.397895 #> 317 38.27      0   0       1  46          1  2.197225 #> 318 38.27      0   1       0  46          1  2.302585 #> 319  7.10      0   1       0   3          0  2.079442 #> 320  7.10      1   0       1   3          0  2.484907 #> 321 26.17      1   0       1  35          1  2.397895 #> 322 63.63      0   1       0  35          1  2.397895 #> 323 24.73      1   0       1   8          0  2.397895 #> 324 59.00      0   1       0   8          0  2.397895 #> 325 54.37      0   1       0  30          1  2.197225 #> 326 54.37      0   0       1  30          1  2.302585 #> 327 54.60      0   1       0  51          1  2.079442 #> 328 10.97      1   0       1  51          1  2.484907 #> 329 21.10      1   0       1  42          1  2.197225 #> 330 63.87      0   1       0  42          1  2.197225 #> 331 62.37      0   1       0  20          1  2.197225 #> 332 43.70      1   0       1  20          1  2.079442 #> 333 62.80      0   0       1  23          1  2.197225 #> 334 62.80      0   1       0  23          1  2.397895 #> 335 63.33      0   1       0  22          1  2.397895 #> 336 14.37      1   0       1  22          1  2.197225 #> 337 58.53      0   0       1  25          1  2.197225 #> 338 58.53      0   1       0  25          1  2.197225 #> 339 58.07      0   0       1  45          1  2.397895 #> 340 58.07      0   1       0  45          1  2.484907 #> 341 58.50      0   0       1  20          1  2.197225 #> 342 58.50      0   1       0  20          1  2.302585 #> 343 14.37      0   0       1  41          1  2.197225 #> 344  1.50      1   1       0  41          1  2.197225 #> 345 54.73      0   1       0  19          0  2.484907 #> 346 38.40      1   0       1  19          0  2.302585 #> 347 50.63      0   1       0   4          0  2.484907 #> 348  2.83      1   0       1   4          0  2.397895 #> 349 51.10      0   0       1  36          1  2.197225 #> 350 51.10      0   1       0  36          1  2.302585 #> 351 49.93      0   1       0  20          1  2.197225 #> 352  6.57      1   0       1  20          1  2.197225 #> 353 46.27      0   1       0  24          1  2.197225 #> 354 46.27      1   0       1  24          1  2.197225 #> 355 10.60      0   1       0  28          1  2.197225 #> 356 10.60      0   0       1  28          1  2.302585 #> 357 42.77      0   1       0  51          1  2.079442 #> 358 42.77      0   0       1  51          1  2.484907 #> 359 34.37      1   1       0  16          0  2.197225 #> 360 42.27      0   0       1  16          0  2.302585 #> 361 42.07      0   1       0  16          0  2.302585 #> 362 42.07      0   0       1  16          0  2.302585 #> 363 38.77      0   0       1  10          0  2.197225 #> 364 38.77      0   1       0  10          0  2.197225 #> 365 61.83      1   0       1  20          1  2.484907 #> 366 74.97      0   1       0  20          1  2.197225 #> 367 66.97      0   0       1  10          0  2.484907 #> 368  6.57      1   1       0  10          0  2.302585 #> 369 38.87      1   1       0  16          0  1.791759 #> 370 68.30      0   0       1  16          0  1.791759 #> 371 46.63      1   0       1  10          0  2.197225 #> 372 42.43      1   1       0  10          0  2.397895 #> 373 67.07      0   1       0  11          0  2.197225 #> 374 67.07      0   0       1  11          0  2.197225 #> 375  2.70      1   1       0   1          0  2.302585 #> 376  2.70      0   0       1   1          0  2.484907 #> 377 63.80      0   0       1  17          0  2.079442 #> 378 63.80      0   1       0  17          0  1.791759 #> 379 32.63      0   0       1   7          0  2.197225 #> 380 32.63      0   1       0   7          0  2.197225 #> 381 62.00      0   1       0  29          1  2.302585 #> 382 62.00      0   0       1  29          1  2.079442 #> 383 54.80      0   0       1   5          0  2.302585 #> 384 13.10      1   1       0   5          0  2.397895 #> 385  8.00      0   0       1   1          0  2.079442 #> 386  8.00      0   1       0   1          0  2.079442 #> 387 42.33      1   0       1  22          1  2.397895 #> 388 51.60      0   1       0  22          1  2.484907 #> 389 49.97      0   1       0  33          1  2.197225 #> 390  2.90      1   0       1  33          1  2.302585 #> 391 45.90      0   1       0   3          0  2.302585 #> 392  1.43      1   0       1   3          0  2.302585 #> 393 41.93      0   1       0  32          1  2.197225 #> 394 41.93      0   0       1  32          1  2.197225"},{"path":"https://genentech.github.io/psborrow2/reference/create_simulation_obj.html","id":null,"dir":"Reference","previous_headings":"","what":"Compile MCMC sampler using STAN and create simulation object — create_simulation_obj","title":"Compile MCMC sampler using STAN and create simulation object — create_simulation_obj","text":"Compile MCMC sampler using STAN create simulation object","code":""},{"path":"https://genentech.github.io/psborrow2/reference/create_simulation_obj.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compile MCMC sampler using STAN and create simulation object — create_simulation_obj","text":"","code":"create_simulation_obj(   data_matrix_list,   covariate = NULL,   outcome,   borrowing,   treatment,   quiet = TRUE )"},{"path":"https://genentech.github.io/psborrow2/reference/create_simulation_obj.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compile MCMC sampler using STAN and create simulation object — create_simulation_obj","text":"data_matrix_list SimDataList. list lists data matrices created sim_data_list(). covariate SimCovariateList Covariate NULL. List Covariate objects created sim_covariate(), single Covariate object created add_covariates(), NULL (covariate adjustment). outcome SimOutcomeList Outcome. List Outcome objects created sim_outcome(), single Outcome object (e.g., created exp_surv_dist()). borrowing SimBorrowingList Borrowing. List Borrowing objects created sim_borrowing(), single Borrowing object created borrowing_details(). treatment SimTreatmentList Treatment. List Treatment objects created sim_treatment() single Treatment object created treatment_details(). quiet logical. Whether print messages (quiet = FALSE) (quiet = TRUE, default)","code":""},{"path":"https://genentech.github.io/psborrow2/reference/create_simulation_obj.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compile MCMC sampler using STAN and create simulation object — create_simulation_obj","text":"Object class Simulation.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/create_simulation_obj.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compile MCMC sampler using STAN and create simulation object — create_simulation_obj","text":"","code":"base_mat <- matrix(   c(     rep(0, 200), rep(0, 200), rep(1, 200),     rep(1, 200), rep(0, 200), rep(0, 200),     rep(0, 600)   ),   ncol = 3,   dimnames = list(NULL, c(\"ext\", \"trt\", \"driftOR\")) )  add_binary_endpoint <- function(odds_ratio,                                 base_matrix = base_mat) {   linear_predictor <- base_matrix[, \"trt\"] * log(odds_ratio)   prob <- 1 / (1 + exp(-linear_predictor))    bin_endpoint <- rbinom(     NROW(base_matrix),     1,     prob   )    cbind(base_matrix, matrix(bin_endpoint, ncol = 1, dimnames = list(NULL, \"ep\"))) }  data_list <- list(   list(add_binary_endpoint(1.5), add_binary_endpoint(1.5)),   list(add_binary_endpoint(2.5), add_binary_endpoint(2.5)) )  guide <- data.frame(   trueOR = c(1.5, 2.5),   driftOR = c(1.0, 1.0),   index = 1:2 )  sdl <- sim_data_list(   data_list = data_list,   guide = guide,   effect = \"trueOR\",   drift = \"driftOR\",   index = \"index\" )  sim_object <- create_simulation_obj(   data_matrix_list = sdl,   outcome = logistic_bin_outcome(\"ep\", normal_prior(0, 1000)),   borrowing = sim_borrowing_list(list(     full_borrowing = borrowing_details(\"Full borrowing\", \"ext\"),     bdb = borrowing_details(\"BDB\", \"ext\", exponential_prior(0.0001))   )),   treatment = treatment_details(\"trt\", normal_prior(0, 1000)) )"},{"path":"https://genentech.github.io/psborrow2/reference/eval_constraints.html","id":null,"dir":"Reference","previous_headings":"","what":"Evaluate constraints — eval_constraints","title":"Evaluate constraints — eval_constraints","text":"Evaluate constraints called","code":""},{"path":"https://genentech.github.io/psborrow2/reference/eval_constraints.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Evaluate constraints — eval_constraints","text":"","code":"eval_constraints(object)  # S4 method for Prior eval_constraints(object)"},{"path":"https://genentech.github.io/psborrow2/reference/eval_constraints.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Evaluate constraints — eval_constraints","text":"object Prior object","code":""},{"path":"https://genentech.github.io/psborrow2/reference/example_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Example data matrix — example_matrix","title":"Example data matrix — example_matrix","text":"matrix containing data clinical trial treatment arm control arm, well data external control. simulated dataset, true hazard ratio (HR) time--event endpoint comparing experimental treatment control treatment 0.70. true odds ratio () binary response endpoint comparing experimental treatment control treatment 1.20.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/example_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Example data matrix — example_matrix","text":"","code":"example_matrix"},{"path":"https://genentech.github.io/psborrow2/reference/example_matrix.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Example data matrix — example_matrix","text":"data frame 500 rows 11 columns. distributions patients : 50 internal control patients, 100 internal experimental patients, 350 external control patients. id patient identifier ext 0/1, flag external controls trt 0/1, flag treatment arm cov1 0/1, baseline covariate cov2 0/1, baseline covariate cov3 0/1, baseline covariate cov4 0/1, baseline covariate time numeric >0, survival time status 0/1, indicator event status (1 = event, 0 = event) cnsr 0/1, censoring indicator (1 = censored, 0 = censored) resp 0/1, indicator response outcome (1 = response, 0 = response)","code":""},{"path":"https://genentech.github.io/psborrow2/reference/example_surv.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulated Survival Data — example_surv","title":"Simulated Survival Data — example_surv","text":"data frame containing simulated data clinical trial treatment arm (n=200) control arm (n=158), well data external control (n=242).","code":""},{"path":"https://genentech.github.io/psborrow2/reference/example_surv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulated Survival Data — example_surv","text":"","code":"example_surv"},{"path":"https://genentech.github.io/psborrow2/reference/example_surv.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Simulated Survival Data — example_surv","text":"data frame 600 rows 6 variables: trt 0/1, flag treatment arm ext 0/1, flag external controls eventtime numeric >0, survival time status 0/1, event indicator censor 0/1, censoring indicator cov1 0/1, binary baseline covariate 1 cov2 integer [0, 15], baseline covariate 2 cov3 continuous numeric, baseline covariate 3","code":""},{"path":"https://genentech.github.io/psborrow2/reference/exp_surv_dist.html","id":null,"dir":"Reference","previous_headings":"","what":"Exponential survival distribution — exp_surv_dist","title":"Exponential survival distribution — exp_surv_dist","text":"Exponential survival distribution","code":""},{"path":"https://genentech.github.io/psborrow2/reference/exp_surv_dist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Exponential survival distribution — exp_surv_dist","text":"","code":"exp_surv_dist(time_var, cens_var, baseline_prior, weight_var = \"\")"},{"path":"https://genentech.github.io/psborrow2/reference/exp_surv_dist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Exponential survival distribution — exp_surv_dist","text":"time_var character. Name time variable column model matrix cens_var character. Name censorship variable flag model matrix baseline_prior Prior. Object class Prior specifying prior distribution baseline outcome. See Details information. weight_var character. Optional name variable model matrix weighting log likelihood.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/exp_surv_dist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Exponential survival distribution — exp_surv_dist","text":"Object class ExponentialSurvDist.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/exp_surv_dist.html","id":"baseline-prior","dir":"Reference","previous_headings":"","what":"Baseline Prior","title":"Exponential survival distribution — exp_surv_dist","text":"baseline_prior argument specifies prior distribution baseline log hazard rate. interpretation baseline_prior differs slightly methods selected borrowing_details(): 'BDB': baseline_prior Bayesian Dynamic Borrowing refers log hazard rate external control arm. 'Full borrowing' 'borrowing': baseline_prior borrowing methods refers log hazard rate internal control arm.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/exp_surv_dist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Exponential survival distribution — exp_surv_dist","text":"","code":"es <- exp_surv_dist(   time_var = \"time\",   cens_var = \"cens\",   baseline_prior = normal_prior(0, 1000) )"},{"path":"https://genentech.github.io/psborrow2/reference/exponential_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior exponential distribution — exponential_prior","title":"Prior exponential distribution — exponential_prior","text":"Prior exponential distribution","code":""},{"path":"https://genentech.github.io/psborrow2/reference/exponential_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior exponential distribution — exponential_prior","text":"","code":"exponential_prior(beta)"},{"path":"https://genentech.github.io/psborrow2/reference/exponential_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior exponential distribution — exponential_prior","text":"beta numeric. Inverse scale (>0).","code":""},{"path":"https://genentech.github.io/psborrow2/reference/exponential_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior exponential distribution — exponential_prior","text":"Object class ExponentialPrior.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/exponential_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior exponential distribution — exponential_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/exponential-distribution.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/exponential_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior exponential distribution — exponential_prior","text":"","code":"ep <- exponential_prior(1)"},{"path":"https://genentech.github.io/psborrow2/reference/gamma_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior gamma distribution — gamma_prior","title":"Prior gamma distribution — gamma_prior","text":"Prior gamma distribution","code":""},{"path":"https://genentech.github.io/psborrow2/reference/gamma_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior gamma distribution — gamma_prior","text":"","code":"gamma_prior(alpha, beta)"},{"path":"https://genentech.github.io/psborrow2/reference/gamma_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior gamma distribution — gamma_prior","text":"alpha numeric. Shape (>0). beta numeric. Inverse scale (>=0).","code":""},{"path":"https://genentech.github.io/psborrow2/reference/gamma_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior gamma distribution — gamma_prior","text":"Object class GammaPrior.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/gamma_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior gamma distribution — gamma_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/gamma-distribution.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/gamma_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior gamma distribution — gamma_prior","text":"","code":"gp <- gamma_prior(0.001, 0.001)"},{"path":"https://genentech.github.io/psborrow2/reference/generate-BaselineObject-method.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Data for a BaselineObject — generate,BaselineObject-method","title":"Generate Data for a BaselineObject — generate,BaselineObject-method","text":"Generate Data BaselineObject","code":""},{"path":"https://genentech.github.io/psborrow2/reference/generate-BaselineObject-method.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Data for a BaselineObject — generate,BaselineObject-method","text":"","code":"# S4 method for BaselineObject generate(x, ...)"},{"path":"https://genentech.github.io/psborrow2/reference/generate-BaselineObject-method.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Data for a BaselineObject — generate,BaselineObject-method","text":"x BaselineObject object created create_baseline_object ... additional parameters ignored","code":""},{"path":"https://genentech.github.io/psborrow2/reference/generate-BaselineObject-method.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate Data for a BaselineObject — generate,BaselineObject-method","text":"BaselineDataFrame object","code":""},{"path":"https://genentech.github.io/psborrow2/reference/generate-BaselineObject-method.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate Data for a BaselineObject — generate,BaselineObject-method","text":"","code":"bl_biomarkers <- create_baseline_object(   n_trt_int = 100,   n_ctrl_int = 50,   n_ctrl_ext = 100,   covariates = baseline_covariates(     c(\"b1\", \"b2\", \"b3\"),     means_int = c(0, 0, 0),     covariance_int = covariance_matrix(c(1, 1, 1), c(.8, .3, .8))   ),   transformations = list(     exp_b1 = function(data) exp(data$b1),     b2 = binary_cutoff(\"b2\", int_cutoff = 0.7, ext_cutoff = 0.5)   ) ) generate(bl_biomarkers) #>     patid ext trt           b1 b2           b3      exp_b1 #> 1       1   0   1 -1.259823561  0 -0.218094267  0.28370408 #> 2       2   0   1  0.076488454  0 -1.186091112  1.07948973 #> 3       3   0   1 -1.032881817  0 -0.417657669  0.35597961 #> 4       4   0   1 -0.006622109  0 -0.760520829  0.99339977 #> 5       5   0   1 -0.758784637  0 -0.736115389  0.46823516 #> 6       6   0   1  0.871689130  0 -0.284917526  2.39094606 #> 7       7   0   1 -0.274913295  0  0.479527971  0.75963799 #> 8       8   0   1 -0.094303177  0  0.456780798  0.91000683 #> 9       9   0   1  0.875498020  1 -0.227872459  2.40007028 #> 10     10   0   1  0.121393319  0 -2.263670616  1.12906891 #> 11     11   0   1 -0.820580489  0 -0.566455870  0.44017606 #> 12     12   0   1 -0.641643665  0 -1.554761045  0.52642644 #> 13     13   0   1  0.942158886  1  0.490917583  2.56551410 #> 14     14   0   1 -1.208307203  0 -0.120535288  0.29870249 #> 15     15   0   1  0.396282680  1  0.780979290  1.48628940 #> 16     16   0   1  0.230815109  1  1.469401991  1.25962632 #> 17     17   0   1  0.178158219  0 -0.151190837  1.19501438 #> 18     18   0   1  2.087081997  1  0.020618234  8.06135775 #> 19     19   0   1 -0.748301549  0  1.046688805  0.47316953 #> 20     20   0   1 -0.115849473  0 -1.132377653  0.89060927 #> 21     21   0   1  0.581619807  0 -0.675307774  1.78893381 #> 22     22   0   1 -1.716159997  0 -0.895030964  0.17975508 #> 23     23   0   1  1.777742453  1  0.939913650  5.91648459 #> 24     24   0   1 -0.677564487  0  1.188140040  0.50785237 #> 25     25   0   1 -0.265913276  0 -0.120040631  0.76650560 #> 26     26   0   1 -0.037254163  0  0.724908731  0.96343124 #> 27     27   0   1  0.200549417  0  0.290842922  1.22207400 #> 28     28   0   1 -0.599559262  0 -0.571406471  0.54905357 #> 29     29   0   1  0.609684256  1  0.261891867  1.83985038 #> 30     30   0   1  1.003262928  1  0.336085291  2.72716587 #> 31     31   0   1  0.846135401  1  0.365926414  2.33062250 #> 32     32   0   1  2.146220345  1  0.299578875  8.55247184 #> 33     33   0   1 -0.153489155  0 -1.202587169  0.85771007 #> 34     34   0   1  0.417238010  1  0.844175109  1.51776371 #> 35     35   0   1  1.615597585  0 -1.412073723  5.03089341 #> 36     36   0   1 -3.069317366  0 -0.270941813  0.04645285 #> 37     37   0   1 -1.690608468  0 -0.471514670  0.18440728 #> 38     38   0   1 -2.022213293  0 -1.273983857  0.13236218 #> 39     39   0   1 -0.818796823  0 -1.614217299  0.44096189 #> 40     40   0   1 -0.225078081  0 -0.213953998  0.79845387 #> 41     41   0   1  0.635273317  0  0.267563861  1.88753797 #> 42     42   0   1 -0.012076579  0 -2.486301791  0.98799605 #> 43     43   0   1  0.204994873  0 -1.266564171  1.22751877 #> 44     44   0   1 -1.379766281  0  0.169384686  0.25163736 #> 45     45   0   1 -0.487456902  1  1.766435482  0.61418635 #> 46     46   0   1 -1.134452698  0  0.606900625  0.32159808 #> 47     47   0   1  0.469598395  1  0.639385009  1.59935176 #> 48     48   0   1 -0.468973799  0  0.181310656  0.62564398 #> 49     49   0   1 -0.765461854  0  0.823409836  0.46511906 #> 50     50   0   1  2.633746732  1 -0.766785234 13.92584871 #> 51     51   0   1  0.628823745  0 -0.734548492  1.87540333 #> 52     52   0   1 -0.369918296  1  1.529509633  0.69079077 #> 53     53   0   1  0.901743556  1  0.730065275  2.46389531 #> 54     54   0   1  0.126297016  0  0.441635324  1.13461912 #> 55     55   0   1  1.378822290  1  0.408695231  3.97022310 #> 56     56   0   1  0.377778794  0 -0.601337781  1.45904016 #> 57     57   0   1 -0.887792345  0 -0.825865990  0.41156334 #> 58     58   0   1 -1.871244116  0 -1.125836483  0.15393203 #> 59     59   0   1  2.045342648  1  0.382720763  7.73180737 #> 60     60   0   1  0.135302217  0 -1.126785165  1.14488274 #> 61     61   0   1 -0.372261612  0 -1.270055708  0.68917392 #> 62     62   0   1  1.174496010  1 -0.047740748  3.23651136 #> 63     63   0   1 -1.226402135  0 -0.567741452  0.29334610 #> 64     64   0   1 -0.472652225  0 -2.361630409  0.62334682 #> 65     65   0   1 -0.868645569  0 -1.047419901  0.41951937 #> 66     66   0   1  1.233935396  1  0.214443128  3.43471996 #> 67     67   0   1  0.348283104  0  0.111620373  1.41663325 #> 68     68   0   1 -1.303714843  0  0.069169525  0.27152126 #> 69     69   0   1 -0.920760433  0  0.117721905  0.39821611 #> 70     70   0   1 -1.397639750  0 -1.951174109  0.24717968 #> 71     71   0   1  0.229687379  0 -0.158634639  1.25820661 #> 72     72   0   1 -0.665051310  0 -1.045501863  0.51424714 #> 73     73   0   1 -0.733861568  0  1.368616387  0.48005165 #> 74     74   0   1 -2.359780214  0 -0.403428551  0.09444098 #> 75     75   0   1  0.833388983  1  0.005750480  2.30110394 #> 76     76   0   1  1.645904713  0 -0.980917760  5.18569936 #> 77     77   0   1  0.754262614  0 -0.698045165  2.12604323 #> 78     78   0   1 -0.027214258  0  0.007567889  0.97315271 #> 79     79   0   1 -0.483052155  0 -0.114469641  0.61689765 #> 80     80   0   1  0.518923439  1  1.270901277  1.68021782 #> 81     81   0   1  0.439874871  1  0.471135391  1.55251294 #> 82     82   0   1 -0.242853741  1  1.192710675  0.78438623 #> 83     83   0   1 -1.368377592  0 -1.823003188  0.25451956 #> 84     84   0   1  0.938799199  0 -0.524843514  2.55690923 #> 85     85   0   1 -0.867727037  0 -1.147549290  0.41990489 #> 86     86   0   1  0.353043532  0  0.258822712  1.42339310 #> 87     87   0   1 -0.363434221  0 -0.602571596  0.69528446 #> 88     88   0   1  1.132058240  1  0.950918506  3.10203467 #> 89     89   0   1  0.167980386  0 -0.446294979  1.18291341 #> 90     90   0   1 -0.365350450  0  0.105600030  0.69395341 #> 91     91   0   1 -0.569306983  0  0.382656151  0.56591749 #> 92     92   0   1 -0.409619202  0  0.339403403  0.66390302 #> 93     93   0   1 -0.003165505  0 -0.605673364  0.99683950 #> 94     94   0   1  0.418366490  0 -0.679469805  1.51947745 #> 95     95   0   1 -1.232872929  0 -2.622654678  0.29145405 #> 96     96   0   1  1.578448218  1  0.361342468  4.84742782 #> 97     97   0   1 -0.054937507  0 -1.823869819  0.94654430 #> 98     98   0   1  0.325199690  0  0.583295450  1.38430705 #> 99     99   0   1 -0.057720490  0 -0.653284623  0.94391374 #> 100   100   0   1  1.164843095  1  1.626715499  3.20541990 #> 101   101   0   0 -0.033776133  0  0.192230630  0.96678791 #> 102   102   0   0 -0.041200070  0 -0.873959678  0.95963712 #> 103   103   0   0  0.815209135  1  0.963570712  2.25964819 #> 104   104   0   0  0.525261307  1  0.951151129  1.69090063 #> 105   105   0   0 -0.037706586  0  0.365018596  0.96299546 #> 106   106   0   0 -0.824395171  0 -0.092562368  0.43850013 #> 107   107   0   0  1.314943661  0 -0.515095872  3.72454114 #> 108   108   0   0 -0.144191906  1  1.133805483  0.86572160 #> 109   109   0   0 -1.498376846  0 -1.284421285  0.22349263 #> 110   110   0   0  0.541781248  1  0.930101728  1.71906622 #> 111   111   0   0  2.034383115  0 -1.723407466  7.64753302 #> 112   112   0   0  0.011845918  0  0.605368381  1.01191636 #> 113   113   0   0 -2.598505311  0  0.450530518  0.07438468 #> 114   114   0   0  0.267370565  1  0.722187949  1.30652451 #> 115   115   0   0 -2.768022958  0 -0.560348787  0.06278601 #> 116   116   0   0 -0.930624333  0 -2.267348629  0.39430745 #> 117   117   0   0  0.452655368  1  0.169010735  1.57248217 #> 118   118   0   0 -0.357142908  0  0.456160343  0.69967250 #> 119   119   0   0  1.362473784  0 -0.644626648  3.90584357 #> 120   120   0   0 -1.508140494  0  0.947043571  0.22132114 #> 121   121   0   0 -1.172520420  0  0.659844525  0.30958567 #> 122   122   0   0 -0.047017997  0 -1.026386538  0.95407023 #> 123   123   0   0 -0.523467894  1  1.428157880  0.59246238 #> 124   124   0   0 -1.698299325  0 -0.649898085  0.18299447 #> 125   125   0   0  0.976613792  1  0.337935992  2.65544910 #> 126   126   0   0 -0.000954515  0  0.111564603  0.99904594 #> 127   127   0   0 -0.601902949  0 -0.082678752  0.54776827 #> 128   128   0   0 -0.859710313  0 -0.562038200  0.42328468 #> 129   129   0   0 -0.651946328  0  0.466187205  0.52103069 #> 130   130   0   0  0.382936696  1  0.613917149  1.46658519 #> 131   131   0   0  0.089324992  1  0.906262634  1.09343596 #> 132   132   0   0 -0.332933880  0 -0.318240474  0.71681759 #> 133   133   0   0 -0.213173389  0 -2.113071023  0.80801602 #> 134   134   0   0  0.297133904  0  0.467252983  1.34599552 #> 135   135   0   0 -2.159050135  0 -0.766052116  0.11543472 #> 136   136   0   0 -1.162168294  0  0.814187484  0.31280719 #> 137   137   0   0  0.806316285  0 -1.047496042  2.23964257 #> 138   138   0   0  0.641035471  1  0.312423683  1.89844565 #> 139   139   0   0  0.539322558  1  0.169368267  1.71484476 #> 140   140   0   0 -0.951463124  0 -1.693664842  0.38617559 #> 141   141   0   0 -1.020698356  0 -0.603319012  0.36034320 #> 142   142   0   0  0.178224694  0  0.631138966  1.19509382 #> 143   143   0   0 -1.427804428  0 -1.135308474  0.23983492 #> 144   144   0   0  0.135098528  1  1.089426408  1.14464956 #> 145   145   0   0 -0.515417269  0 -1.223240668  0.59725133 #> 146   146   0   0  0.302516765  0 -2.653192277  1.35326036 #> 147   147   0   0  0.145870094  0 -1.868939893  1.15704587 #> 148   148   0   0 -0.184096059  0 -0.517199799  0.83185589 #> 149   149   0   0  0.407305268  0 -1.595697778  1.50276278 #> 150   150   0   0  0.925305855  0  0.004240427  2.52263970 #> 151   151   1   0  0.489580930  1  1.014677322  1.63163231 #> 152   152   1   0 -0.713282204  0 -0.933871271  0.49003317 #> 153   153   1   0  0.866580913  1 -0.543910041  2.37876373 #> 154   154   1   0 -3.420693512  0 -2.015363078  0.03268976 #> 155   155   1   0 -0.157959960  0 -0.080785733  0.85388397 #> 156   156   1   0  0.520416451  1  1.010574951  1.68272828 #> 157   157   1   0  0.560283610  1  0.191538945  1.75116908 #> 158   158   1   0  0.315394287  1  0.964945656  1.37079969 #> 159   159   1   0 -0.886961903  0 -0.243082644  0.41190526 #> 160   160   1   0  0.687865125  0 -0.722823532  1.98946374 #> 161   161   1   0  0.689630067  1  0.054348170  1.99297813 #> 162   162   1   0  0.764559660  1 -0.195457278  2.14804830 #> 163   163   1   0 -0.707092207  0 -1.463271120  0.49307588 #> 164   164   1   0 -0.457203077  1  1.101768300  0.63305177 #> 165   165   1   0 -1.798294910  0 -0.181229845  0.16558098 #> 166   166   1   0  0.684471383  1  1.564954416  1.98272346 #> 167   167   1   0  0.530940649  1  1.051792345  1.70053116 #> 168   168   1   0 -0.553754731  0  0.338208196  0.57478758 #> 169   169   1   0  1.301122155  1  0.357205899  3.67341650 #> 170   170   1   0  1.276045396  1  2.027296400  3.58244453 #> 171   171   1   0  1.399317945  1 -0.550112333  4.05243504 #> 172   172   1   0  1.239724758  1  1.203348207  3.45466246 #> 173   173   1   0  0.104903421  0 -1.239767998  1.11060334 #> 174   174   1   0 -1.983675208  0 -2.436882757  0.13756274 #> 175   175   1   0 -0.355403769  0 -0.189905175  0.70089039 #> 176   176   1   0  1.136012779  1  0.866023197  3.11432607 #> 177   177   1   0  1.823534111  1  0.415785506  6.19370907 #> 178   178   1   0  0.238605178  1  0.492470877  1.26947722 #> 179   179   1   0 -1.790531000  0  0.415152545  0.16687154 #> 180   180   1   0 -1.031816252  0  0.523368108  0.35635913 #> 181   181   1   0  0.649632967  1  0.895718282  1.91483789 #> 182   182   1   0 -2.049176809  0 -0.142812131  0.12884092 #> 183   183   1   0 -0.231287385  0 -2.307823186  0.79351139 #> 184   184   1   0 -0.867172527  0 -0.887304534  0.42013780 #> 185   185   1   0 -0.165294339  0 -0.522203534  0.84764417 #> 186   186   1   0  0.588126160  1  0.451532312  1.80061119 #> 187   187   1   0 -0.676737971  0 -1.581347351  0.50827229 #> 188   188   1   0  0.722004645  1  0.381700452  2.05855575 #> 189   189   1   0 -0.601284356  0 -1.240825228  0.54810722 #> 190   190   1   0 -0.436140465  0  0.262075194  0.64652691 #> 191   191   1   0 -0.172683423  0 -1.824292266  0.84140394 #> 192   192   1   0  0.237948010  1 -0.187816340  1.26864323 #> 193   193   1   0  0.432141993  1  0.117045489  1.54055385 #> 194   194   1   0  0.045823946  0 -0.284152027  1.04689009 #> 195   195   1   0  0.047887157  0 -2.644317223  1.04905227 #> 196   196   1   0 -0.078709732  0 -0.759914255  0.92430818 #> 197   197   1   0 -0.122460450  0 -0.410249973  0.88474090 #> 198   198   1   0  0.288894705  1 -0.014752159  1.33495116 #> 199   199   1   0  1.103251006  1  1.066762634  3.01394848 #> 200   200   1   0 -0.496318894  0 -1.168030501  0.60876748 #> 201   201   1   0  0.268912960  1  1.048361674  1.30854124 #> 202   202   1   0 -1.417808463  0 -0.067606323  0.24224432 #> 203   203   1   0  1.279433162  1  0.311761609  3.59460159 #> 204   204   1   0  0.462550664  1  0.209037725  1.58811958 #> 205   205   1   0  1.956423338  1  0.065580979  7.07398053 #> 206   206   1   0  0.664969356  1 -0.339890224  1.94443093 #> 207   207   1   0  0.748344946  1  0.454553435  2.11349917 #> 208   208   1   0 -0.532540312  0 -0.484137778  0.58711163 #> 209   209   1   0 -0.593450765  0 -0.282127749  0.55241773 #> 210   210   1   0 -1.051524100  0  0.827497466  0.34940482 #> 211   211   1   0 -0.116852057  1  0.536310272  0.88971681 #> 212   212   1   0 -1.115487895  0 -1.436546843  0.32775533 #> 213   213   1   0  0.622310475  1  0.578637307  1.86322801 #> 214   214   1   0  1.052361418  1  0.564056136  2.86440720 #> 215   215   1   0  1.342801157  1 -1.249626623  3.82975624 #> 216   216   1   0 -0.322657090  0 -1.715102981  0.72422215 #> 217   217   1   0 -1.000576694  0 -1.355867774  0.36766735 #> 218   218   1   0 -0.018047437  1  0.319185508  0.98211444 #> 219   219   1   0  1.239870895  1  1.907927315  3.45516736 #> 220   220   1   0 -0.705693114  0  0.469713769  0.49376622 #> 221   221   1   0 -1.660704277  0 -0.491733920  0.19000512 #> 222   222   1   0 -2.168489385  0 -1.133715054  0.11435023 #> 223   223   1   0 -1.114558373  0 -0.400733945  0.32806013 #> 224   224   1   0 -0.934503873  0 -0.255542041  0.39278069 #> 225   225   1   0  1.329783087  1  1.064348224  3.78022332 #> 226   226   1   0 -0.166220328  1  0.579266340  0.84685963 #> 227   227   1   0 -0.493614982  0 -1.330526713  0.61041576 #> 228   228   1   0  0.492707297  0 -0.358125864  1.63674137 #> 229   229   1   0 -0.585125440  0  0.790039721  0.55703598 #> 230   230   1   0  0.379949428  1  0.177517487  1.46221064 #> 231   231   1   0 -0.589674653  0  0.440424395  0.55450766 #> 232   232   1   0 -0.269583918  1  0.904183817  0.76369719 #> 233   233   1   0  0.844992789  1  2.802317907  2.32796103 #> 234   234   1   0  1.383618858  1  0.225823730  3.98931229 #> 235   235   1   0  0.566129604  1 -0.019520770  1.76143638 #> 236   236   1   0 -0.843644601  0 -1.539187513  0.43013997 #> 237   237   1   0 -0.127766319  1  0.440043541  0.88005901 #> 238   238   1   0 -0.549486467  1  1.009029373  0.57724617 #> 239   239   1   0  0.391140916  0 -0.740018539  1.47866687 #> 240   240   1   0  1.331310915  1 -1.095805979  3.78600327 #> 241   241   1   0 -1.110626296  0 -0.922277788  0.32935262 #> 242   242   1   0  0.628815305  1  2.233891181  1.87538750 #> 243   243   1   0 -0.662257541  0 -0.809511024  0.51568584 #> 244   244   1   0 -1.403903388  0  0.339708358  0.24563628 #> 245   245   1   0  0.385654125  1 -0.528936391  1.47057595 #> 246   246   1   0 -0.033219347  0 -0.303169902  0.96732636 #> 247   247   1   0  0.308879759  1  0.300272793  1.36189861 #> 248   248   1   0 -0.067617773  1  0.146681582  0.93461764 #> 249   249   1   0  2.322293448  1  0.975729042 10.19903847 #> 250   250   1   0  0.016868549  0 -1.497035232  1.01701163"},{"path":"https://genentech.github.io/psborrow2/reference/generate.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate Data from Object — generate","title":"Generate Data from Object — generate","text":"Generate Data Object","code":""},{"path":"https://genentech.github.io/psborrow2/reference/generate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate Data from Object — generate","text":"","code":"generate(x, ...)"},{"path":"https://genentech.github.io/psborrow2/reference/generate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate Data from Object — generate","text":"x object ... arguments passed methods","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_cmd_stan_models.html","id":null,"dir":"Reference","previous_headings":"","what":"Get CmdStanModel objects for MCMCSimulationResults — get_cmd_stan_models","title":"Get CmdStanModel objects for MCMCSimulationResults — get_cmd_stan_models","text":"Show CmdStanModel objects MCMCSimulationResults objects.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_cmd_stan_models.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get CmdStanModel objects for MCMCSimulationResults — get_cmd_stan_models","text":"","code":"get_cmd_stan_models(object)  # S4 method for MCMCSimulationResult get_cmd_stan_models(object)"},{"path":"https://genentech.github.io/psborrow2/reference/get_cmd_stan_models.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get CmdStanModel objects for MCMCSimulationResults — get_cmd_stan_models","text":"object MCMCSimulationResults object","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_covariate_constraints.html","id":null,"dir":"Reference","previous_headings":"","what":"Get constraints from a list of Priors — get_covariate_constraints","title":"Get constraints from a list of Priors — get_covariate_constraints","text":"Get constraints list Priors","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_covariate_constraints.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get constraints from a list of Priors — get_covariate_constraints","text":"","code":"get_covariate_constraints(cov_obj)"},{"path":"https://genentech.github.io/psborrow2/reference/get_covariate_constraints.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get constraints from a list of Priors — get_covariate_constraints","text":"cov_obj Covariates object.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_covariate_constraints.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get constraints from a list of Priors — get_covariate_constraints","text":"matrix columns \"lower\" \"upper\" rows Prior.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_covariate_constraints.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get constraints from a list of Priors — get_covariate_constraints","text":"","code":"psborrow2:::get_covariate_constraints(   add_covariates(     c(\"cov1\", \"cov2\", \"cov3\"),     list(       normal_prior(0, 10),       beta_prior(0.3, 0.3),       gamma_prior(30, 1)     )   ) ) #>      lower upper #> [1,]  -Inf   Inf #> [2,]     0     1 #> [3,]     0   Inf"},{"path":"https://genentech.github.io/psborrow2/reference/get_prior_string.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Stan code for a Prior — get_prior_string","title":"Get Stan code for a Prior — get_prior_string","text":"Get Stan code Prior","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_prior_string.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Stan code for a Prior — get_prior_string","text":"","code":"get_prior_string(object)"},{"path":"https://genentech.github.io/psborrow2/reference/get_prior_string.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Stan code for a Prior — get_prior_string","text":"object Prior list Prior objects.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_prior_string.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Stan code for a Prior — get_prior_string","text":"string containing Stan code sampling specified distribution.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_prior_string.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Stan code for a Prior — get_prior_string","text":"","code":"psborrow2:::get_prior_string(normal_prior(0, 100)) #> normal(0, 100)"},{"path":"https://genentech.github.io/psborrow2/reference/get_quantiles.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Quantiles of Random Data — get_quantiles","title":"Get Quantiles of Random Data — get_quantiles","text":"Helper use within transformation functions create_baseline_object().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_quantiles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Quantiles of Random Data — get_quantiles","text":"","code":"get_quantiles(object, var)"},{"path":"https://genentech.github.io/psborrow2/reference/get_quantiles.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Quantiles of Random Data — get_quantiles","text":"object BaselineDataFrame var character string name variable","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_quantiles.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Quantiles of Random Data — get_quantiles","text":"numeric vector containing quantiles based data generating distribution.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_results.html","id":null,"dir":"Reference","previous_headings":"","what":"Get results for MCMCSimulationResults objects — get_results","title":"Get results for MCMCSimulationResults objects — get_results","text":"Get results data.frame MCMCSimulationResults objects.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_results.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get results for MCMCSimulationResults objects — get_results","text":"","code":"get_results(object)  # S4 method for MCMCSimulationResult get_results(object)"},{"path":"https://genentech.github.io/psborrow2/reference/get_results.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get results for MCMCSimulationResults objects — get_results","text":"object MCMCSimulationResults object","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_vars.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Variables — get_vars","title":"Get Variables — get_vars","text":"Gets data variable names object.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_vars.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Variables — get_vars","text":"","code":"get_vars(object)  # S4 method for Covariates get_vars(object)  # S4 method for Treatment get_vars(object)  # S4 method for Borrowing get_vars(object)  # S4 method for TimeToEvent get_vars(object)  # S4 method for BinaryOutcome get_vars(object)  # S4 method for Analysis get_vars(object)  # S4 method for NULL get_vars(object)  # S4 method for SimTreatmentList get_vars(object)  # S4 method for SimOutcomeList get_vars(object)  # S4 method for SimBorrowingList get_vars(object)  # S4 method for SimCovariateList get_vars(object)  # S4 method for Simulation get_vars(object)"},{"path":"https://genentech.github.io/psborrow2/reference/get_vars.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Variables — get_vars","text":"object Object","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_vars.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Variables — get_vars","text":"character vector containing variable names","code":""},{"path":"https://genentech.github.io/psborrow2/reference/get_vars.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Variables — get_vars","text":"","code":"get_vars(treatment_details(   trt_flag_col = \"treat_fl\",   trt_prior = normal_prior(0, 1000) )) #> trt_flag_col  #>   \"treat_fl\""},{"path":"https://genentech.github.io/psborrow2/reference/half_cauchy_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior half-cauchy distribution — half_cauchy_prior","title":"Prior half-cauchy distribution — half_cauchy_prior","text":"Prior half-cauchy distribution","code":""},{"path":"https://genentech.github.io/psborrow2/reference/half_cauchy_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior half-cauchy distribution — half_cauchy_prior","text":"","code":"half_cauchy_prior(mu, sigma)"},{"path":"https://genentech.github.io/psborrow2/reference/half_cauchy_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior half-cauchy distribution — half_cauchy_prior","text":"mu numeric. Location. sigma numeric. Scale (>0).","code":""},{"path":"https://genentech.github.io/psborrow2/reference/half_cauchy_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior half-cauchy distribution — half_cauchy_prior","text":"Object class HalfCauchyPrior.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/half_cauchy_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior half-cauchy distribution — half_cauchy_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/cauchy-distribution.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/half_cauchy_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior half-cauchy distribution — half_cauchy_prior","text":"","code":"hcp <- half_cauchy_prior(1, 1)"},{"path":"https://genentech.github.io/psborrow2/reference/half_normal_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior half-normal distribution — half_normal_prior","title":"Prior half-normal distribution — half_normal_prior","text":"Prior half-normal distribution","code":""},{"path":"https://genentech.github.io/psborrow2/reference/half_normal_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior half-normal distribution — half_normal_prior","text":"","code":"half_normal_prior(mu, sigma)"},{"path":"https://genentech.github.io/psborrow2/reference/half_normal_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior half-normal distribution — half_normal_prior","text":"mu numeric. Location. sigma numeric. Scale (>0).","code":""},{"path":"https://genentech.github.io/psborrow2/reference/half_normal_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior half-normal distribution — half_normal_prior","text":"Object class HalfNormalPrior.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/half_normal_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior half-normal distribution — half_normal_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/normal-distribution.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/half_normal_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior half-normal distribution — half_normal_prior","text":"","code":"hcp <- half_normal_prior(1, 1)"},{"path":"https://genentech.github.io/psborrow2/reference/logistic_bin_outcome.html","id":null,"dir":"Reference","previous_headings":"","what":"Bernoulli distribution with logit parametrization — logistic_bin_outcome","title":"Bernoulli distribution with logit parametrization — logistic_bin_outcome","text":"Bernoulli distribution logit parametrization","code":""},{"path":"https://genentech.github.io/psborrow2/reference/logistic_bin_outcome.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Bernoulli distribution with logit parametrization — logistic_bin_outcome","text":"","code":"logistic_bin_outcome(binary_var, baseline_prior, weight_var = \"\")"},{"path":"https://genentech.github.io/psborrow2/reference/logistic_bin_outcome.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Bernoulli distribution with logit parametrization — logistic_bin_outcome","text":"binary_var character. Name binary (1/0 TRUE/FALSE) outcome variable model matrix baseline_prior Prior. Object class Prior specifying prior distribution baseline outcome. See Details information. weight_var character. Optional name variable model matrix weighting log likelihood.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/logistic_bin_outcome.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Bernoulli distribution with logit parametrization — logistic_bin_outcome","text":"Object class LogisticBinaryOutcome.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/logistic_bin_outcome.html","id":"baseline-prior","dir":"Reference","previous_headings":"","what":"Baseline Prior","title":"Bernoulli distribution with logit parametrization — logistic_bin_outcome","text":"baseline_prior argument specifies prior distribution baseline log odds. interpretation baseline_prior differs slightly methods selected borrowing_details(): 'BDB': baseline_prior Bayesian Dynamic Borrowing refers log odds external control arm. 'Full borrowing' 'borrowing': baseline_prior borrowing methods refers log odds internal control arm.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/logistic_bin_outcome.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Bernoulli distribution with logit parametrization — logistic_bin_outcome","text":"","code":"lg <- logistic_bin_outcome(   binary_var = \"response\",   baseline_prior = normal_prior(0, 1000) )"},{"path":"https://genentech.github.io/psborrow2/reference/make_analysis_object_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Make list of analysis objects for class Simulation — make_analysis_object_list","title":"Make list of analysis objects for class Simulation — make_analysis_object_list","text":"Make list analysis objects class Simulation","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_analysis_object_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make list of analysis objects for class Simulation — make_analysis_object_list","text":"","code":"make_analysis_object_list(simulation_obj, quiet = TRUE)"},{"path":"https://genentech.github.io/psborrow2/reference/make_analysis_object_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make list of analysis objects for class Simulation — make_analysis_object_list","text":"simulation_obj Simulation. Object class Simulation created psborrow2:::.simulation_obj(). quiet logical. Whether print messages (quiet = FALSE) (quiet = TRUE, default)","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_analysis_object_list.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make list of analysis objects for class Simulation — make_analysis_object_list","text":"list lists Analysis objects","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_analysis_object_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make list of analysis objects for class Simulation — make_analysis_object_list","text":"","code":"base_mat <- matrix(   c(     rep(0, 200), rep(0, 200), rep(1, 200),     rep(1, 200), rep(0, 200), rep(0, 200),     rep(0, 600)   ),   ncol = 3,   dimnames = list(NULL, c(\"ext\", \"trt\", \"driftOR\")) )  add_binary_endpoint <- function(odds_ratio,                                 base_matrix = base_mat) {   linear_predictor <- base_matrix[, \"trt\"] * log(odds_ratio)   prob <- 1 / (1 + exp(-linear_predictor))    bin_endpoint <- rbinom(     NROW(base_matrix),     1,     prob   )    cbind(base_matrix, matrix(bin_endpoint, ncol = 1, dimnames = list(NULL, \"ep\"))) }  data_list <- list(   list(add_binary_endpoint(1.5), add_binary_endpoint(1.5)),   list(add_binary_endpoint(2.5), add_binary_endpoint(2.5)) )  guide <- data.frame(   trueOR = c(1.5, 2.5),   driftOR = c(1.0, 1.0),   index = 1:2 )  sdl <- sim_data_list(   data_list = data_list,   guide = guide,   effect = \"trueOR\",   drift = \"driftOR\",   index = \"index\" )  sim_object <- psborrow2:::.simulation_obj(   data_matrix_list = sdl,   outcome = sim_outcome_list(list(default = logistic_bin_outcome(\"ep\", normal_prior(0, 1000)))),   covariate = sim_covariate_list(covariate_list = list(`No adjustment` = NULL)),   borrowing = sim_borrowing_list(list(     full_borrowing = borrowing_details(\"Full borrowing\", \"ext\"),     bdb = borrowing_details(\"BDB\", \"ext\", exponential_prior(0.0001))   )),   treatment = sim_treatment_list(list(default = treatment_details(\"trt\", normal_prior(0, 1000)))) )  sim_object@guide <- Reduce(   merge,   init = sim_object@data_matrix_list@guide,   x = list(     sim_object@outcome@guide,     sim_object@borrowing@guide,     sim_object@covariate@guide,     sim_object@treatment@guide   ) )  sim_object@n_combos <- NROW(sim_object@guide) sim_object@n_analyses <- sum(sim_object@guide$n_datasets_per_param)  psborrow2:::make_analysis_object_list(sim_object) #> [[1]] #> [[1]][[1]] #> Analysis Object #>  #> Outcome model: LogisticBinaryOutcome  #> Outcome variable: ep  #>  #> Borrowing method: Full borrowing  #> External flag: ext  #>  #> Treatment variable: trt  #>  #> Data: Matrix with 600 observations  #>     -  200  internal controls #>     -  200  external controls  #>     -  200  internal experimental #>  #> Stan model compiled and ready to sample. #>  Call mcmc_sample() next. #> [[1]][[2]] #> Analysis Object #>  #> Outcome model: LogisticBinaryOutcome  #> Outcome variable: ep  #>  #> Borrowing method: Full borrowing  #> External flag: ext  #>  #> Treatment variable: trt  #>  #> Data: Matrix with 600 observations  #>     -  200  internal controls #>     -  200  external controls  #>     -  200  internal experimental #>  #> Stan model compiled and ready to sample. #>  Call mcmc_sample() next. #>  #> [[2]] #> [[2]][[1]] #> Analysis Object #>  #> Outcome model: LogisticBinaryOutcome  #> Outcome variable: ep  #>  #> Borrowing method: Full borrowing  #> External flag: ext  #>  #> Treatment variable: trt  #>  #> Data: Matrix with 600 observations  #>     -  200  internal controls #>     -  200  external controls  #>     -  200  internal experimental #>  #> Stan model compiled and ready to sample. #>  Call mcmc_sample() next. #> [[2]][[2]] #> Analysis Object #>  #> Outcome model: LogisticBinaryOutcome  #> Outcome variable: ep  #>  #> Borrowing method: Full borrowing  #> External flag: ext  #>  #> Treatment variable: trt  #>  #> Data: Matrix with 600 observations  #>     -  200  internal controls #>     -  200  external controls  #>     -  200  internal experimental #>  #> Stan model compiled and ready to sample. #>  Call mcmc_sample() next. #>  #> [[3]] #> [[3]][[1]] #> Analysis Object #>  #> Outcome model: LogisticBinaryOutcome  #> Outcome variable: ep  #>  #> Borrowing method: BDB  #> External flag: ext  #>  #> Treatment variable: trt  #>  #> Data: Matrix with 600 observations  #>     -  200  internal controls #>     -  200  external controls  #>     -  200  internal experimental #>  #> Stan model compiled and ready to sample. #>  Call mcmc_sample() next. #> [[3]][[2]] #> Analysis Object #>  #> Outcome model: LogisticBinaryOutcome  #> Outcome variable: ep  #>  #> Borrowing method: BDB  #> External flag: ext  #>  #> Treatment variable: trt  #>  #> Data: Matrix with 600 observations  #>     -  200  internal controls #>     -  200  external controls  #>     -  200  internal experimental #>  #> Stan model compiled and ready to sample. #>  Call mcmc_sample() next. #>  #> [[4]] #> [[4]][[1]] #> Analysis Object #>  #> Outcome model: LogisticBinaryOutcome  #> Outcome variable: ep  #>  #> Borrowing method: BDB  #> External flag: ext  #>  #> Treatment variable: trt  #>  #> Data: Matrix with 600 observations  #>     -  200  internal controls #>     -  200  external controls  #>     -  200  internal experimental #>  #> Stan model compiled and ready to sample. #>  Call mcmc_sample() next. #> [[4]][[2]] #> Analysis Object #>  #> Outcome model: LogisticBinaryOutcome  #> Outcome variable: ep  #>  #> Borrowing method: BDB  #> External flag: ext  #>  #> Treatment variable: trt  #>  #> Data: Matrix with 600 observations  #>     -  200  internal controls #>     -  200  external controls  #>     -  200  internal experimental #>  #> Stan model compiled and ready to sample. #>  Call mcmc_sample() next. #>"},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Make model string of Stan's data block — make_model_string_data","title":"Make model string of Stan's data block — make_model_string_data","text":"Create Stan string encompassed data {}","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make model string of Stan's data block — make_model_string_data","text":"","code":"make_model_string_data(analysis_obj)"},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make model string of Stan's data block — make_model_string_data","text":"analysis_obj Analysis. Object class Analysis created psborrow2:::.analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make model string of Stan's data block — make_model_string_data","text":"glue  character containing text data block.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make model string of Stan's data block — make_model_string_data","text":"","code":"anls_obj <- psborrow2:::.analysis_obj(   data_matrix = example_matrix,   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 100)),   borrowing = borrowing_details(     \"Full borrowing\",     \"ext\"   ),   treatment = treatment_details(\"trt\", normal_prior(0, 100)) )  psborrow2:::make_model_string_data(anls_obj) #> data { #>   int<lower=0> N; #>   vector[N] trt; #>   vector[N] time; #> vector[N] cens; #>  #>    #>    #> }"},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_functions.html","id":null,"dir":"Reference","previous_headings":"","what":"Make model string of Stan's functions model bloc — make_model_string_functions","title":"Make model string of Stan's functions model bloc — make_model_string_functions","text":"Create Stan string encompassed functions {}","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_functions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make model string of Stan's functions model bloc — make_model_string_functions","text":"","code":"make_model_string_functions(analysis_obj)"},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_functions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make model string of Stan's functions model bloc — make_model_string_functions","text":"analysis_obj Analysis. Object class Analysis created psborrow2:::.analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_functions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make model string of Stan's functions model bloc — make_model_string_functions","text":"glue  character containing text functions block.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_functions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make model string of Stan's functions model bloc — make_model_string_functions","text":"","code":"anls_obj <- psborrow2:::.analysis_obj(   data_matrix = example_matrix,   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 100)),   borrowing = borrowing_details(     \"Full borrowing\",     \"ext\"   ),   treatment = treatment_details(\"trt\", normal_prior(0, 100)) )  psborrow2:::make_model_string_functions(anls_obj) #> functions { #>    #> }"},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Make model string of Stan's model block — make_model_string_model","title":"Make model string of Stan's model block — make_model_string_model","text":"Create Stan string encompassed model {}","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make model string of Stan's model block — make_model_string_model","text":"","code":"make_model_string_model(analysis_obj)"},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make model string of Stan's model block — make_model_string_model","text":"analysis_obj Analysis. Object class Analysis created psborrow2:::.analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make model string of Stan's model block — make_model_string_model","text":"glue  character containing Stan code data block.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make model string of Stan's model block — make_model_string_model","text":"","code":"anls_obj <- psborrow2:::.analysis_obj(   data_matrix = example_matrix,   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 100)),   borrowing = borrowing_details(     \"Full borrowing\",     \"ext\"   ),   treatment = treatment_details(\"trt\", normal_prior(0, 100)) )  psborrow2:::make_model_string_model(anls_obj) #> model { #>   vector[N] lp; #>   vector[N] elp; #>   beta_trt ~ normal(0, 100); #>   lp = alpha + trt * beta_trt ; #> elp = exp(lp); #>    #>    #>   alpha ~ normal(0, 100) ; #>   for (i in 1:N) { #>    if (cens[i] == 1) { #>       target += exponential_lccdf(time[i] | elp[i] ); #>    } else { #>       target += exponential_lpdf(time[i] | elp[i] ); #>    } #> } #> }"},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_parameters.html","id":null,"dir":"Reference","previous_headings":"","what":"Make model string of Stan's parameters model block — make_model_string_parameters","title":"Make model string of Stan's parameters model block — make_model_string_parameters","text":"Create Stan string encompassed parameters {}","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_parameters.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make model string of Stan's parameters model block — make_model_string_parameters","text":"","code":"make_model_string_parameters(analysis_obj)"},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_parameters.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make model string of Stan's parameters model block — make_model_string_parameters","text":"analysis_obj Analysis. Object class Analysis created psborrow2:::.analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_parameters.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make model string of Stan's parameters model block — make_model_string_parameters","text":"glue  character containing Stan code functions block.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_parameters.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make model string of Stan's parameters model block — make_model_string_parameters","text":"","code":"anls_obj <- psborrow2:::.analysis_obj(   data_matrix = example_matrix,   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 100)),   borrowing = borrowing_details(     \"Full borrowing\",     \"ext\"   ),   treatment = treatment_details(\"trt\", normal_prior(0, 100)) )  psborrow2:::make_model_string_parameters(anls_obj) #> parameters { #> real beta_trt; #>  #>  #> real alpha; #>  #> }"},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_transf_param.html","id":null,"dir":"Reference","previous_headings":"","what":"Make model string of Stan's transformed parameters model block — make_model_string_transf_param","title":"Make model string of Stan's transformed parameters model block — make_model_string_transf_param","text":"Create Stan string encompassed transformed parameters {}","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_transf_param.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Make model string of Stan's transformed parameters model block — make_model_string_transf_param","text":"","code":"make_model_string_transf_param(analysis_obj)"},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_transf_param.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Make model string of Stan's transformed parameters model block — make_model_string_transf_param","text":"analysis_obj Analysis. Object class Analysis created psborrow2:::.analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_transf_param.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Make model string of Stan's transformed parameters model block — make_model_string_transf_param","text":"glue  character containing Stan code functions block.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/make_model_string_transf_param.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Make model string of Stan's transformed parameters model block — make_model_string_transf_param","text":"","code":"anls_obj <- psborrow2:::.analysis_obj(   data_matrix = example_matrix,   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 100)),   borrowing = borrowing_details(     \"Full borrowing\",     \"ext\"   ),   treatment = treatment_details(\"trt\", normal_prior(0, 100)) )  psborrow2:::make_model_string_transf_param(anls_obj) #> transformed parameters { #>   real HR_trt = exp(beta_trt); #> }"},{"path":"https://genentech.github.io/psborrow2/reference/mcmc_sample.html","id":null,"dir":"Reference","previous_headings":"","what":"Sample from Stan model — mcmc_sample","title":"Sample from Stan model — mcmc_sample","text":"Method sample compiled Stan model return CmdStanMCMC object draws.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/mcmc_sample.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sample from Stan model — mcmc_sample","text":"","code":"mcmc_sample(x, ...)  # S4 method for ANY mcmc_sample(x, ...)  # S4 method for Analysis mcmc_sample(   x,   iter_warmup = 1000L,   iter_sampling = 10000L,   chains = 4L,   verbose = FALSE,   ... )  # S4 method for Simulation mcmc_sample(   x,   posterior_quantiles = c(0.025, 0.975),   iter_warmup = 1000L,   iter_sampling = 10000L,   chains = 4L,   verbose = FALSE,   keep_cmd_stan_models = FALSE,   ... )"},{"path":"https://genentech.github.io/psborrow2/reference/mcmc_sample.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sample from Stan model — mcmc_sample","text":"x object sample, Analysis (created create_analysis_obj()) Simulation. ... additional arguments passed $sample() method cmdstanr Stan model. See https://mc-stan.org/cmdstanr/reference/model-method-sample.html iter_warmup integer. number warm iterations run per chain. default 1000. iter_sampling integer. number post-warm iterations run per chain. default 10000. chains integer. number Markov chains run. default 4. verbose logical. Whether print sampler updates (TRUE) (FALSE) posterior_quantiles numeric vector length two. posterior quantiles used summarizing simulation results. default c(0.025, 0.975) See details. keep_cmd_stan_models logical. Whether keep CmdStanModel objects mcmc_sampler (TRUE, discouraged scenarios) (FALSE). default FALSE.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/mcmc_sample.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sample from Stan model — mcmc_sample","text":"object class CmdStanMCMC object class MCMCSimulationResult","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/mcmc_sample.html","id":"simulation-objects","dir":"Reference","previous_headings":"","what":"Simulation objects","title":"Sample from Stan model — mcmc_sample","text":"function takes draws MCMC sampler summarizes results. Several metrics summarized: \"Type 1 error\" probability posterior treatment effect distribution excludes true value.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/mcmc_sample.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Sample from Stan model — mcmc_sample","text":"","code":"## Analysis objects anls <- create_analysis_obj(   data_matrix = example_matrix,   covariates = add_covariates(     covariates = c(\"cov1\", \"cov2\"),     priors = normal_prior(0, 1000)   ),   outcome = weib_ph_surv_dist(     \"time\",     \"cnsr\",     shape_prior = normal_prior(0, 1000),     baseline_prior = normal_prior(0, 1000)   ),   borrowing = borrowing_details(     \"BDB\",     \"ext\",     exponential_prior(.001)   ),   treatment = treatment_details(\"trt\", normal_prior(0, 1000)) ) #> Inputs look good. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`.  mcmc_results <- mcmc_sample(anls) #> Running MCMC with 4 sequential chains... #>  #> Chain 1 finished in 24.7 seconds. #> Chain 2 finished in 21.4 seconds. #> Chain 3 finished in 18.4 seconds. #> Chain 4 finished in 19.1 seconds. #>  #> All 4 chains finished successfully. #> Mean chain execution time: 20.9 seconds. #> Total execution time: 84.0 seconds. #>   ## Simulation objects base_mat <- matrix(   c(     rep(0, 200), rep(0, 200), rep(1, 200),     rep(1, 200), rep(0, 200), rep(0, 200),     rep(0, 600)   ),   ncol = 3,   dimnames = list(NULL, c(\"ext\", \"trt\", \"driftOR\")) )  add_binary_endpoint <- function(odds_ratio,                                 base_matrix = base_mat) {   linear_predictor <- base_matrix[, \"trt\"] * log(odds_ratio)   prob <- 1 / (1 + exp(-linear_predictor))    bin_endpoint <- rbinom(     NROW(base_matrix),     1,     prob   )    cbind(base_matrix, matrix(bin_endpoint, ncol = 1, dimnames = list(NULL, \"ep\"))) }  data_list <- list(   list(add_binary_endpoint(1.5), add_binary_endpoint(1.5)),   list(add_binary_endpoint(2.5), add_binary_endpoint(2.5)) )  guide <- data.frame(   trueOR = c(1.5, 2.5),   driftOR = c(1.0, 1.0),   index = 1:2 )  sdl <- sim_data_list(   data_list = data_list,   guide = guide,   effect = \"trueOR\",   drift = \"driftOR\",   index = \"index\" )  sim_object <- create_simulation_obj(   data_matrix_list = sdl,   outcome = logistic_bin_outcome(\"ep\", normal_prior(0, 1000)),   borrowing = sim_borrowing_list(list(     full_borrowing = borrowing_details(\"Full borrowing\", \"ext\"),     bdb = borrowing_details(\"BDB\", \"ext\", exponential_prior(0.0001))   )),   treatment = treatment_details(\"trt\", normal_prior(0, 1000)) )  mcmc_sample(sim_object, chains = 1, iter_warmup = 500L, iter_sampling = 1000L) #> Running MCMC with 1 chain... #>  #> Chain 1 finished in 0.6 seconds. #> Running MCMC with 1 chain... #>  #> Chain 1 finished in 0.6 seconds. #> Running MCMC with 1 chain... #>  #> Chain 1 finished in 0.6 seconds. #> Running MCMC with 1 chain... #>  #> Chain 1 finished in 0.6 seconds. #> Running MCMC with 1 chain... #>  #> Chain 1 finished in 3.6 seconds. #> Running MCMC with 1 chain... #>  #> Chain 1 finished in 4.9 seconds. #> Running MCMC with 1 chain... #>  #> Chain 1 finished in 5.0 seconds. #> Running MCMC with 1 chain... #>  #> Chain 1 finished in 4.7 seconds. #> `MCMCSimulationResult` object.  Call `get_results()` to save outputs as a data.frame"},{"path":"https://genentech.github.io/psborrow2/reference/normal_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior normal distribution — normal_prior","title":"Prior normal distribution — normal_prior","text":"Prior normal distribution","code":""},{"path":"https://genentech.github.io/psborrow2/reference/normal_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior normal distribution — normal_prior","text":"","code":"normal_prior(mu, sigma)"},{"path":"https://genentech.github.io/psborrow2/reference/normal_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior normal distribution — normal_prior","text":"mu numeric. Location. sigma numeric. Scale (>0).","code":""},{"path":"https://genentech.github.io/psborrow2/reference/normal_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior normal distribution — normal_prior","text":"Object class NormalPrior.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/normal_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior normal distribution — normal_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/normal-distribution.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/normal_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior normal distribution — normal_prior","text":"","code":"np <- normal_prior(1, 1)"},{"path":"https://genentech.github.io/psborrow2/reference/parse_constraint.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Upper and Lower Bounds from a Prior object — parse_constraint","title":"Extract Upper and Lower Bounds from a Prior object — parse_constraint","text":"Extract Upper Lower Bounds Prior object","code":""},{"path":"https://genentech.github.io/psborrow2/reference/parse_constraint.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Upper and Lower Bounds from a Prior object — parse_constraint","text":"","code":"parse_constraint(object)"},{"path":"https://genentech.github.io/psborrow2/reference/parse_constraint.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Upper and Lower Bounds from a Prior object — parse_constraint","text":"object Prior Object class Prior","code":""},{"path":"https://genentech.github.io/psborrow2/reference/parse_constraint.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Upper and Lower Bounds from a Prior object — parse_constraint","text":"list upper lower bounds. unspecified bounds set -Inf Inf.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/parse_constraint.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract Upper and Lower Bounds from a Prior object — parse_constraint","text":"","code":"np <- normal_prior(0, 100) psborrow2:::parse_constraint(np) #> lower upper  #>  -Inf   Inf"},{"path":"https://genentech.github.io/psborrow2/reference/plot.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Prior Objects — plot","title":"Plot Prior Objects — plot","text":"Plot prior distributions densities. Continuous distributions plotted curves discrete distributions bar plots.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/plot.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Prior Objects — plot","text":"","code":"# S4 method for Prior,missing plot(   x,   y,   default_limits,   dist_type = c(\"continuous\", \"discrete\"),   density_fun,   add,   ... )  # S4 method for NormalPrior,missing plot(x, y, add = FALSE, ...)  # S4 method for BernoulliPrior,missing plot(x, y, add = FALSE, ...)  # S4 method for BetaPrior,missing plot(x, y, add = FALSE, ...)  # S4 method for CauchyPrior,missing plot(x, y, add = FALSE, ...)  # S4 method for ExponentialPrior,missing plot(x, y, add = FALSE, ...)  # S4 method for GammaPrior,missing plot(x, y, add = FALSE, ...)  # S4 method for HalfCauchyPrior,missing plot(x, y, add = FALSE, ...)  # S4 method for HalfNormalPrior,missing plot(x, y, add = FALSE, ...)  # S4 method for PoissonPrior,missing plot(x, y, add = FALSE, ...)  # S4 method for UniformPrior,missing plot(x, y, add = FALSE, ...)"},{"path":"https://genentech.github.io/psborrow2/reference/plot.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Prior Objects — plot","text":"x Object inheriting Prior y used. default_limits Numeric range plot distribution . dist_type Plot continuous discrete distribution. density_fun Function takes vector values returns vector density values. add logical. Add density existing plot. ... Optional arguments plotting.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/plot.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot Prior Objects — plot","text":"Plot ranges selected default show 99% density unbounded distributions. limits can changed specifying xlim = c(lower, upper). Colors, line types, typical par() parameters can used.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/plot.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Prior Objects — plot","text":"","code":"plot(normal_prior(1, 2))  plot(bernoulli_prior(0.4), xlim = c(0, 15))  plot(beta_prior(2, 2))  plot(cauchy_prior(0, 1), xlim = c(-20, 20)) plot(cauchy_prior(0, 2), xlim = c(-20, 20), col = 2, add = TRUE)  plot(exponential_prior(0.1))  plot(gamma_prior(0.1, 0.1))  plot(half_cauchy_prior(0, 1), xlim = c(-20, 20)) plot(half_cauchy_prior(0, 2), xlim = c(-20, 20), col = 2, add = TRUE)  plot(half_normal_prior(0, 1), xlim = c(-20, 20)) plot(half_normal_prior(0, 2), xlim = c(-20, 20), col = 2, add = TRUE)  plot(poisson_prior(5), xlim = c(0, 15))  plot(uniform_prior(1, 2), xlim = c(0, 3))"},{"path":"https://genentech.github.io/psborrow2/reference/plot_pdf.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Probability Density Function Values — plot_pdf","title":"Plot Probability Density Function Values — plot_pdf","text":"Plot Probability Density Function Values","code":""},{"path":"https://genentech.github.io/psborrow2/reference/plot_pdf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Probability Density Function Values — plot_pdf","text":"","code":"plot_pdf(x, y, ...)"},{"path":"https://genentech.github.io/psborrow2/reference/plot_pdf.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Probability Density Function Values — plot_pdf","text":"x values y probability density values y = f(x) ... passed plot() Plots density values curve lower vertical limit set 0.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/plot_pdf.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Probability Density Function Values — plot_pdf","text":"","code":"x <- seq(-2, 2, len = 100) y <- dnorm(x) plot_pdf(x, y)"},{"path":"https://genentech.github.io/psborrow2/reference/plot_pmf.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot Probability Mass Function Values — plot_pmf","title":"Plot Probability Mass Function Values — plot_pmf","text":"Plot Probability Mass Function Values","code":""},{"path":"https://genentech.github.io/psborrow2/reference/plot_pmf.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot Probability Mass Function Values — plot_pmf","text":"","code":"plot_pmf(x, y, ..., col = \"grey\", add = FALSE)"},{"path":"https://genentech.github.io/psborrow2/reference/plot_pmf.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot Probability Mass Function Values — plot_pmf","text":"x values y probability mass values y = f(x) ... passed plot() rect() col Fill color bars. add Add bars existing plot. Plots probability values barplot.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/plot_pmf.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot Probability Mass Function Values — plot_pmf","text":"","code":"x <- seq(0, 5) y <- dpois(x, lambda = 2) plot_pmf(x, y)"},{"path":"https://genentech.github.io/psborrow2/reference/poisson_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior poisson distribution — poisson_prior","title":"Prior poisson distribution — poisson_prior","text":"Prior poisson distribution","code":""},{"path":"https://genentech.github.io/psborrow2/reference/poisson_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior poisson distribution — poisson_prior","text":"","code":"poisson_prior(lambda)"},{"path":"https://genentech.github.io/psborrow2/reference/poisson_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior poisson distribution — poisson_prior","text":"lambda numeric. Rate (>0).","code":""},{"path":"https://genentech.github.io/psborrow2/reference/poisson_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior poisson distribution — poisson_prior","text":"Object class PoissonPrior.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/poisson_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior poisson distribution — poisson_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/poisson.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/poisson_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior poisson distribution — poisson_prior","text":"","code":"pp <- poisson_prior(100)"},{"path":"https://genentech.github.io/psborrow2/reference/prepare_stan_data_inputs.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare Stan data inputs — prepare_stan_data_inputs","title":"Prepare Stan data inputs — prepare_stan_data_inputs","text":"Create list data correct format Stan","code":""},{"path":"https://genentech.github.io/psborrow2/reference/prepare_stan_data_inputs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare Stan data inputs — prepare_stan_data_inputs","text":"","code":"prepare_stan_data_inputs(analysis_obj)"},{"path":"https://genentech.github.io/psborrow2/reference/prepare_stan_data_inputs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare Stan data inputs — prepare_stan_data_inputs","text":"analysis_obj Analysis. Object class Analysis created create_analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/prepare_stan_data_inputs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare Stan data inputs — prepare_stan_data_inputs","text":"Named list data inputs correspond items Stan data  block.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/prepare_stan_data_inputs.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prepare Stan data inputs — prepare_stan_data_inputs","text":"","code":"anls_obj <- create_analysis_obj(   data_matrix = example_matrix,   outcome = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 100)),   borrowing = borrowing_details(     \"BDB\",     \"ext\",     exponential_prior(0.001)   ),   treatment = treatment_details(\"trt\", normal_prior(0, 100)) ) #> Inputs look good. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`.  data_in <- psborrow2:::prepare_stan_data_inputs(anls_obj)"},{"path":"https://genentech.github.io/psborrow2/reference/rename_draws_covariates.html","id":null,"dir":"Reference","previous_headings":"","what":"Rename Covariates in draws Object — rename_draws_covariates","title":"Rename Covariates in draws Object — rename_draws_covariates","text":"Rename Covariates draws Object","code":""},{"path":"https://genentech.github.io/psborrow2/reference/rename_draws_covariates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Rename Covariates in draws Object — rename_draws_covariates","text":"","code":"rename_draws_covariates(draws, analysis)"},{"path":"https://genentech.github.io/psborrow2/reference/rename_draws_covariates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Rename Covariates in draws Object — rename_draws_covariates","text":"draws draws created sampled analysis object. See example. analysis Analysis created create_analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/rename_draws_covariates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Rename Covariates in draws Object — rename_draws_covariates","text":"draws[posterior::draws] object covariate names.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/rename_draws_covariates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Rename Covariates in draws Object — rename_draws_covariates","text":"","code":"analysis_object <- create_analysis_obj(   data_matrix = example_matrix,   covariates = add_covariates(     covariates = c(\"cov1\", \"cov2\"),     priors = normal_prior(0, 1000)   ),   outcome = exp_surv_dist(     \"time\",     \"cnsr\",     baseline_prior = normal_prior(0, 1000)   ),   borrowing = borrowing_details(     \"BDB\",     \"ext\",     exponential_prior(.001)   ),   treatment = treatment_details(     \"trt\",     normal_prior(0, 1000)   ) ) #> Inputs look good. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`. samples <- mcmc_sample(analysis_object) #> Running MCMC with 4 sequential chains... #>  #> Chain 1 finished in 6.8 seconds. #> Chain 2 finished in 8.4 seconds. #> Chain 3 finished in 7.2 seconds. #> Chain 4 finished in 7.1 seconds. #>  #> All 4 chains finished successfully. #> Mean chain execution time: 7.4 seconds. #> Total execution time: 29.7 seconds. #>  draws <- samples$draws() renamed_draws <- rename_draws_covariates(draws, analysis_object) summary(renamed_draws) #> # A tibble: 8 × 10 #>   variable         mean   median      sd    mad       q5      q95  rhat ess_bulk #>   <chr>           <num>    <num>   <num>  <num>    <num>    <num> <num>    <num> #> 1 lp__         -1.57e+3 -1.57e+3 1.75e+0 1.57   -1.57e+3 -1.56e+3  1.00   14488. #> 2 treatment l… -5.61e-1 -5.55e-1 2.30e-1 0.227  -9.52e-1 -1.92e-1  1.00   12963. #> 3 commensurab…  5.19e+1  8.98e+0 2.14e+2 9.28    1.05e+0  1.76e+2  1.00   10005. #> 4 baseline lo… -3.73e+0 -3.73e+0 1.97e-1 0.194  -4.05e+0 -3.39e+0  1.00   13316. #> 5 baseline lo… -3.21e+0 -3.21e+0 1.14e-1 0.114  -3.40e+0 -3.03e+0  1.00   17548. #> 6 cov1          8.16e-1  8.14e-1 1.10e-1 0.111   6.38e-1  9.98e-1  1.00   22348. #> 7 cov2          5.74e-1  5.74e-1 9.98e-2 0.0993  4.11e-1  7.40e-1  1.00   22417. #> 8 treatment HR  5.86e-1  5.74e-1 1.35e-1 0.130   3.86e-1  8.25e-1  1.00   12963. #> # ℹ 1 more variable: ess_tail <num>"},{"path":"https://genentech.github.io/psborrow2/reference/show_guide.html","id":null,"dir":"Reference","previous_headings":"","what":"Show guide for objects with guides — show_guide","title":"Show guide for objects with guides — show_guide","text":"Show guide Simulation objects.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/show_guide.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Show guide for objects with guides — show_guide","text":"","code":"show_guide(object)  # S4 method for Simulation show_guide(object)"},{"path":"https://genentech.github.io/psborrow2/reference/show_guide.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Show guide for objects with guides — show_guide","text":"object Simulation object","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_borrowing_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Input borrowing details for a simulation study — sim_borrowing_list","title":"Input borrowing details for a simulation study — sim_borrowing_list","text":"function defining borrowing scenarios evaluated part simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_borrowing_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Input borrowing details for a simulation study — sim_borrowing_list","text":"","code":"sim_borrowing_list(borrowing_list)"},{"path":"https://genentech.github.io/psborrow2/reference/sim_borrowing_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Input borrowing details for a simulation study — sim_borrowing_list","text":"borrowing_list named list objects class Borrowing created borrowing_details().","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/sim_borrowing_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Input borrowing details for a simulation study — sim_borrowing_list","text":"","code":"borrow_scenarios <- sim_borrowing_list(   list(     \"No borrowing\" = borrowing_details(\"No borrowing\", \"ext\"),     \"Full borrowing\" = borrowing_details(\"Full borrowing\", \"ext\"),     \"BDB, uninformative prior\" = borrowing_details(\"BDB\", \"ext\", gamma_prior(0.001, 0.001)),     \"BDB, informative prior\" = borrowing_details(\"BDB\", \"ext\", gamma_prior(1, 0.001))   ) )"},{"path":"https://genentech.github.io/psborrow2/reference/sim_covariate_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Input covariate adjustment details for a simulation study — sim_covariate_list","title":"Input covariate adjustment details for a simulation study — sim_covariate_list","text":"function defining covariate adjustment scenarios evaluated part simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_covariate_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Input covariate adjustment details for a simulation study — sim_covariate_list","text":"","code":"sim_covariate_list(covariate_list)"},{"path":"https://genentech.github.io/psborrow2/reference/sim_covariate_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Input covariate adjustment details for a simulation study — sim_covariate_list","text":"covariate_list named list objects class Covariate created add_covariates().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_covariate_list.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Input covariate adjustment details for a simulation study — sim_covariate_list","text":"function allows user specify covariate adjustment details included part simulation study. often interest compare several adjustment methods adjustment. specify adjustment, pass NULL list item covariate_list.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/sim_covariate_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Input covariate adjustment details for a simulation study — sim_covariate_list","text":"","code":"covariates <- sim_covariate_list(   list(     \"No adjustment\" = NULL,     \"Covariates 1 and 2\" = add_covariates(c(\"cov1\", \"cov2\"), normal_prior(0, 1000))   ) )"},{"path":"https://genentech.github.io/psborrow2/reference/sim_covariates.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify covariates for simulation study — sim_covariates","title":"Specify covariates for simulation study — sim_covariates","text":"Provide details desired covariate distributions covariance simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_covariates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify covariates for simulation study — sim_covariates","text":"","code":"sim_covariates(   covariates,   covariance_internal,   covariance_external = covariance_internal )"},{"path":"https://genentech.github.io/psborrow2/reference/sim_covariates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify covariates for simulation study — sim_covariates","text":"covariates list. Named list covariate mean values probabilities generated bin_var() (class SimVarBin cont_var() (class SimVarCont). See details information. covariance_internal matrix. Covariance matrix binarization internal patients. covariance_external matrix. Covariance matrix binarization external patients. Defaults internal covariance.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_covariates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify covariates for simulation study — sim_covariates","text":"Object class SimCovariates","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_covariates.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Specify covariates for simulation study — sim_covariates","text":"function intended specify number covariates relationships purposes designing simulation study psborrow2. outcome model necessarily need adjust covariates, function necessary create_simulation_obj(). relationship treatment outcome specified elsewhere (.e, sim_survival() sim_binary_event()). need things ","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/sim_covariates.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Specify covariates for simulation study — sim_covariates","text":"","code":"set.seed(123) covmat <- matrix(rWishart(1, 2, diag(2)), ncol = 2)  covset1 <- sim_covariates(   covariates = list(     cov1 = bin_var(0.5, 0.5),     cov2 = cont_var(100, 130)   ),   covariance_internal = covmat )"},{"path":"https://genentech.github.io/psborrow2/reference/sim_covariates_summ.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarize the number of continuous and binary covariates\nin a SimCovariates object created by sim_covariates() — sim_covariates_summ","title":"Summarize the number of continuous and binary covariates\nin a SimCovariates object created by sim_covariates() — sim_covariates_summ","text":"Summarize number continuous binary covariates SimCovariates object created sim_covariates()","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_covariates_summ.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarize the number of continuous and binary covariates\nin a SimCovariates object created by sim_covariates() — sim_covariates_summ","text":"","code":"sim_covariates_summ(sim_covariates_obj)"},{"path":"https://genentech.github.io/psborrow2/reference/sim_covariates_summ.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarize the number of continuous and binary covariates\nin a SimCovariates object created by sim_covariates() — sim_covariates_summ","text":"sim_covariates_obj SimCovariates. Object returned sim_covariates().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_covariates_summ.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarize the number of continuous and binary covariates\nin a SimCovariates object created by sim_covariates() — sim_covariates_summ","text":"data.frame showing covariate names types well counts binary continuous covariates.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_data_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Input generated data for a simulation study — sim_data_list","title":"Input generated data for a simulation study — sim_data_list","text":"function defining generated data use part simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_data_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Input generated data for a simulation study — sim_data_list","text":"","code":"sim_data_list(data_list, guide, effect, drift, index)"},{"path":"https://genentech.github.io/psborrow2/reference/sim_data_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Input generated data for a simulation study — sim_data_list","text":"data_list list lists matrices. lists highest level differ parameters used generate data. matrices lowest level different iterations data generation parameters. See details. guide data.frame. guide contains information parameters differ highest level data_list. See details. effect character. column guide corresponds true treatment effect estimate (hazard ratio odds ratio). drift character. column guide corresponds true drift effect estimate (hazard ratio odds ratio). drift >1 means external arm experiences greater effects. index character. column guide corresponds index column.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_data_list.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Input generated data for a simulation study — sim_data_list","text":"function, providing generated data analysis simulation study psborrow2. Note function data generation behalf; assumes generated data already. full working example, refer relevant vignette: vignette('simulation_study', package = 'psborrow2'). information inputs provided .","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_data_list.html","id":"matrix-requirements-in-data-list","dir":"Reference","previous_headings":"","what":"Matrix requirements in data_list","title":"Input generated data for a simulation study — sim_data_list","text":"matrix embedded data_list must : flag whether patient external control flag whether patient experimental treatment arm outcome information (time censorship survival, flag outcome binary endpoints) Optionally, matrices may also contain covariates. See examples.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_data_list.html","id":"data-list","dir":"Reference","previous_headings":"","what":"data_list","title":"Input generated data for a simulation study — sim_data_list","text":"set distinct data generation parameters represented single list matrices. multiple scenarios may want compared, list list matrices preferred. See examples.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_data_list.html","id":"guide","dir":"Reference","previous_headings":"","what":"guide","title":"Input generated data for a simulation study — sim_data_list","text":"guide data.frame one row per scenario. consquence , length list equal number rows guide. See examples.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/sim_data_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Input generated data for a simulation study — sim_data_list","text":"","code":"base_mat <- matrix(   c(     rep(0, 200), rep(0, 200), rep(1, 200),     rep(1, 200), rep(0, 200), rep(0, 200),     rep(0, 600)   ),   ncol = 3,   dimnames = list(NULL, c(\"ext\", \"trt\", \"driftOR\")) )  add_binary_endpoint <- function(odds_ratio,                                 base_matrix = base_mat) {   linear_predictor <- base_matrix[, \"trt\"] * log(odds_ratio)   prob <- 1 / (1 + exp(-linear_predictor))    bin_endpoint <- rbinom(     NROW(base_matrix),     1,     prob   )    cbind(base_matrix, matrix(bin_endpoint, ncol = 1, dimnames = list(NULL, \"ep\"))) }  data_list <- list(   list(add_binary_endpoint(1.5), add_binary_endpoint(1.5)),   list(add_binary_endpoint(2.5), add_binary_endpoint(2.5)) )  guide <- data.frame(   trueOR = c(1.5, 2.5),   driftOR = c(1.0, 1.0),   ind = c(1, 2) )  sdl <- sim_data_list(   data_list = data_list,   guide = guide,   effect = \"trueOR\",   drift = \"driftOR\",   index = \"ind\" )"},{"path":"https://genentech.github.io/psborrow2/reference/sim_estimate_bias.html","id":null,"dir":"Reference","previous_headings":"","what":"What is the bias for a given model — sim_estimate_bias","title":"What is the bias for a given model — sim_estimate_bias","text":"bias given model","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_estimate_bias.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"What is the bias for a given model — sim_estimate_bias","text":"","code":"sim_estimate_bias(draws, true_effect)"},{"path":"https://genentech.github.io/psborrow2/reference/sim_estimate_bias.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"What is the bias for a given model — sim_estimate_bias","text":"draws draws_array Object class draws CmdStanMCMC$draws(). true_effect numeric. true treatment effect.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_estimate_bias.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"What is the bias for a given model — sim_estimate_bias","text":"bias sample","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_estimate_bias.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"What is the bias for a given model — sim_estimate_bias","text":"Bias calculated (true_effect - median_estimated_effect)","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_estimate_bias.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"What is the bias for a given model — sim_estimate_bias","text":"","code":"base_mat <- matrix(   c(     rep(0, 200), rep(0, 200), rep(1, 200),     rep(1, 200), rep(0, 200), rep(0, 200),     rep(0, 600)   ),   ncol = 3,   dimnames = list(NULL, c(\"ext\", \"trt\", \"driftOR\")) )  add_binary_endpoint <- function(odds_ratio,                                 base_matrix = base_mat) {   linear_predictor <- base_matrix[, \"trt\"] * log(odds_ratio)   prob <- 1 / (1 + exp(-linear_predictor))    bin_endpoint <- rbinom(     NROW(base_matrix),     1,     prob   )    cbind(base_matrix, matrix(bin_endpoint, ncol = 1, dimnames = list(NULL, \"ep\"))) }  data_list <- list(   list(add_binary_endpoint(1.5), add_binary_endpoint(1.5)),   list(add_binary_endpoint(2.5), add_binary_endpoint(2.5)) )  guide <- data.frame(   trueOR = c(1.5, 2.5),   driftOR = c(1.0, 1.0),   index = 1:2 )  sdl <- sim_data_list(   data_list = data_list,   guide = guide,   effect = \"trueOR\",   drift = \"driftOR\",   index = \"index\" )  x <- create_simulation_obj(   data_matrix_list = sdl,   outcome = logistic_bin_outcome(\"ep\", normal_prior(0, 1000)),   borrowing = sim_borrowing_list(list(     full_borrowing = borrowing_details(\"Full borrowing\", \"ext\"),     bdb = borrowing_details(\"BDB\", \"ext\", exponential_prior(0.0001))   )),   treatment = treatment_details(\"trt\", normal_prior(0, 1000)) )  i <- 1 j <- 1 true_effect <- x@guide[i, x@data_matrix_list@effect] anls_obj <- x@analysis_obj_list[[i]][[j]] res <- mcmc_sample(anls_obj, iter_sampling = 500) #> Running MCMC with 4 sequential chains... #>  #> Chain 1 finished in 0.5 seconds. #> Chain 2 finished in 0.5 seconds. #> Chain 3 finished in 0.5 seconds. #> Chain 4 finished in 0.6 seconds. #>  #> All 4 chains finished successfully. #> Mean chain execution time: 0.5 seconds. #> Total execution time: 2.6 seconds. #>  draws <- res$draws()  psborrow2:::sim_estimate_bias(   draws,   true_effect ) #> [1] 0.1086686"},{"path":"https://genentech.github.io/psborrow2/reference/sim_estimate_mse.html","id":null,"dir":"Reference","previous_headings":"","what":"What is the MSE for a given model — sim_estimate_mse","title":"What is the MSE for a given model — sim_estimate_mse","text":"MSE given model","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_estimate_mse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"What is the MSE for a given model — sim_estimate_mse","text":"","code":"sim_estimate_mse(draws, true_effect)"},{"path":"https://genentech.github.io/psborrow2/reference/sim_estimate_mse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"What is the MSE for a given model — sim_estimate_mse","text":"draws draws_array Object class draws CmdStanMCMC$draws(). true_effect numeric. true treatment effect.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_estimate_mse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"What is the MSE for a given model — sim_estimate_mse","text":"mean squared error (MSE) sample","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_estimate_mse.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"What is the MSE for a given model — sim_estimate_mse","text":"MSE calculated (true_effect - median_estimated_effect) ^ 2","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_estimate_mse.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"What is the MSE for a given model — sim_estimate_mse","text":"","code":"base_mat <- matrix(   c(     rep(0, 200), rep(0, 200), rep(1, 200),     rep(1, 200), rep(0, 200), rep(0, 200),     rep(0, 600)   ),   ncol = 3,   dimnames = list(NULL, c(\"ext\", \"trt\", \"driftOR\")) )  add_binary_endpoint <- function(odds_ratio,                                 base_matrix = base_mat) {   linear_predictor <- base_matrix[, \"trt\"] * log(odds_ratio)   prob <- 1 / (1 + exp(-linear_predictor))    bin_endpoint <- rbinom(     NROW(base_matrix),     1,     prob   )    cbind(base_matrix, matrix(bin_endpoint, ncol = 1, dimnames = list(NULL, \"ep\"))) }  data_list <- list(   list(add_binary_endpoint(1.5), add_binary_endpoint(1.5)),   list(add_binary_endpoint(2.5), add_binary_endpoint(2.5)) )  guide <- data.frame(   trueOR = c(1.5, 2.5),   driftOR = c(1.0, 1.0),   index = 1:2 )  sdl <- sim_data_list(   data_list = data_list,   guide = guide,   effect = \"trueOR\",   drift = \"driftOR\",   index = \"index\" )  x <- create_simulation_obj(   data_matrix_list = sdl,   outcome = logistic_bin_outcome(\"ep\", normal_prior(0, 1000)),   borrowing = sim_borrowing_list(list(     full_borrowing = borrowing_details(\"Full borrowing\", \"ext\"),     bdb = borrowing_details(\"BDB\", \"ext\", exponential_prior(0.0001))   )),   treatment = treatment_details(\"trt\", normal_prior(0, 1000)) )  i <- 1 j <- 1 true_effect <- x@guide[i, x@data_matrix_list@effect] anls_obj <- x@analysis_obj_list[[i]][[j]] res <- mcmc_sample(anls_obj, iter_sampling = 500) #> Running MCMC with 4 sequential chains... #>  #> Chain 1 finished in 0.5 seconds. #> Chain 2 finished in 0.5 seconds. #> Chain 3 finished in 0.5 seconds. #> Chain 4 finished in 0.5 seconds. #>  #> All 4 chains finished successfully. #> Mean chain execution time: 0.5 seconds. #> Total execution time: 2.5 seconds. #>  draws <- res$draws()  psborrow2:::sim_estimate_mse(   draws,   true_effect ) #> [1] 0.07627277"},{"path":"https://genentech.github.io/psborrow2/reference/sim_is_null_effect_covered.html","id":null,"dir":"Reference","previous_headings":"","what":"Do the posterior quantiles contain a value of 1.0? — sim_is_null_effect_covered","title":"Do the posterior quantiles contain a value of 1.0? — sim_is_null_effect_covered","text":"posterior quantiles contain value 1.0?","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_is_null_effect_covered.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Do the posterior quantiles contain a value of 1.0? — sim_is_null_effect_covered","text":"","code":"sim_is_null_effect_covered(draws, posterior_quantiles)"},{"path":"https://genentech.github.io/psborrow2/reference/sim_is_null_effect_covered.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Do the posterior quantiles contain a value of 1.0? — sim_is_null_effect_covered","text":"draws draws_array Object class draws CmdStanMCMC$draws(). posterior_quantiles numeric. Vector length two specifying quantiles posterior treatment effect distribution search null effect.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_is_null_effect_covered.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Do the posterior quantiles contain a value of 1.0? — sim_is_null_effect_covered","text":"1L null effect (1.0) contained within quantiles, else 0L","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_is_null_effect_covered.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Do the posterior quantiles contain a value of 1.0? — sim_is_null_effect_covered","text":"","code":"base_mat <- matrix(   c(     rep(0, 200), rep(0, 200), rep(1, 200),     rep(1, 200), rep(0, 200), rep(0, 200),     rep(0, 600)   ),   ncol = 3,   dimnames = list(NULL, c(\"ext\", \"trt\", \"driftOR\")) )  add_binary_endpoint <- function(odds_ratio,                                 base_matrix = base_mat) {   linear_predictor <- base_matrix[, \"trt\"] * log(odds_ratio)   prob <- 1 / (1 + exp(-linear_predictor))    bin_endpoint <- rbinom(     NROW(base_matrix),     1,     prob   )    cbind(base_matrix, matrix(bin_endpoint, ncol = 1, dimnames = list(NULL, \"ep\"))) }  data_list <- list(   list(add_binary_endpoint(1.5), add_binary_endpoint(1.5)),   list(add_binary_endpoint(2.5), add_binary_endpoint(2.5)) )  guide <- data.frame(   trueOR = c(1.5, 2.5),   driftOR = c(1.0, 1.0),   index = 1:2 )  sdl <- sim_data_list(   data_list = data_list,   guide = guide,   effect = \"trueOR\",   drift = \"driftOR\",   index = \"index\" )  x <- create_simulation_obj(   data_matrix_list = sdl,   outcome = logistic_bin_outcome(\"ep\", normal_prior(0, 1000)),   borrowing = sim_borrowing_list(list(     full_borrowing = borrowing_details(\"Full borrowing\", \"ext\"),     bdb = borrowing_details(\"BDB\", \"ext\", exponential_prior(0.0001))   )),   treatment = treatment_details(\"trt\", normal_prior(0, 1000)) )  if (FALSE) { i <- 1 j <- 1 anls_obj <- x@analysis_obj_list[[i]][[j]] res <- mcmc_sample(anls_obj, iter_sampling = 500) draws <- res$draws()  psborrow2:::sim_is_null_effect_covered(   draws,   c(0.025, 0.975) ) }"},{"path":"https://genentech.github.io/psborrow2/reference/sim_is_true_effect_covered.html","id":null,"dir":"Reference","previous_headings":"","what":"Do the posterior quantiles contain the true treatment effect? — sim_is_true_effect_covered","title":"Do the posterior quantiles contain the true treatment effect? — sim_is_true_effect_covered","text":"posterior quantiles contain true treatment effect?","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_is_true_effect_covered.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Do the posterior quantiles contain the true treatment effect? — sim_is_true_effect_covered","text":"","code":"sim_is_true_effect_covered(draws, true_effect, posterior_quantiles)"},{"path":"https://genentech.github.io/psborrow2/reference/sim_is_true_effect_covered.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Do the posterior quantiles contain the true treatment effect? — sim_is_true_effect_covered","text":"draws draws_array Object class draws CmdStanMCMC$draws(). true_effect numeric. true treatment effect. posterior_quantiles numeric. Vector length two specifying quantiles posterior treatment effect distribution search true effect.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_is_true_effect_covered.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Do the posterior quantiles contain the true treatment effect? — sim_is_true_effect_covered","text":"1L effect contained within quantiles, else 0L","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_is_true_effect_covered.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Do the posterior quantiles contain the true treatment effect? — sim_is_true_effect_covered","text":"","code":"base_mat <- matrix(   c(     rep(0, 200), rep(0, 200), rep(1, 200),     rep(1, 200), rep(0, 200), rep(0, 200),     rep(0, 600)   ),   ncol = 3,   dimnames = list(NULL, c(\"ext\", \"trt\", \"driftOR\")) )  add_binary_endpoint <- function(odds_ratio,                                 base_matrix = base_mat) {   linear_predictor <- base_matrix[, \"trt\"] * log(odds_ratio)   prob <- 1 / (1 + exp(-linear_predictor))    bin_endpoint <- rbinom(     NROW(base_matrix),     1,     prob   )    cbind(base_matrix, matrix(bin_endpoint, ncol = 1, dimnames = list(NULL, \"ep\"))) }  data_list <- list(   list(add_binary_endpoint(1.5), add_binary_endpoint(1.5)),   list(add_binary_endpoint(2.5), add_binary_endpoint(2.5)) )  guide <- data.frame(   trueOR = c(1.5, 2.5),   driftOR = c(1.0, 1.0),   index = 1:2 )  sdl <- sim_data_list(   data_list = data_list,   guide = guide,   effect = \"trueOR\",   drift = \"driftOR\",   index = \"index\" )  x <- create_simulation_obj(   data_matrix_list = sdl,   outcome = logistic_bin_outcome(\"ep\", normal_prior(0, 1000)),   borrowing = sim_borrowing_list(list(     full_borrowing = borrowing_details(\"Full borrowing\", \"ext\"),     bdb = borrowing_details(\"BDB\", \"ext\", exponential_prior(0.0001))   )),   treatment = treatment_details(\"trt\", normal_prior(0, 1000)) )  if (FALSE) { i <- 1 j <- 1 true_effect <- x@guide[i, x@data_matrix_list@effect] anls_obj <- x@analysis_obj_list[[i]][[j]] res <- mcmc_sample(anls_obj, iter_sampling = 500) draws <- res$draws()  psborrow2:::sim_is_true_effect_covered(   draws,   true_effect,   c(0.025, 0.975) ) }"},{"path":"https://genentech.github.io/psborrow2/reference/sim_outcome_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Input outcome details for a simulation study — sim_outcome_list","title":"Input outcome details for a simulation study — sim_outcome_list","text":"function defining outcome scenarios evaluated part simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_outcome_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Input outcome details for a simulation study — sim_outcome_list","text":"","code":"sim_outcome_list(outcome_list)"},{"path":"https://genentech.github.io/psborrow2/reference/sim_outcome_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Input outcome details for a simulation study — sim_outcome_list","text":"outcome_list named list objects class Outcome created outcome_details().","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/sim_outcome_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Input outcome details for a simulation study — sim_outcome_list","text":"","code":"outcome_scenarios <- sim_outcome_list(   list(     \"Exponential\" = exp_surv_dist(\"time\", \"cnsr\", normal_prior(0, 10000))   ) )"},{"path":"https://genentech.github.io/psborrow2/reference/sim_samplesize.html","id":null,"dir":"Reference","previous_headings":"","what":"Set simulation study parameters for sample size — sim_samplesize","title":"Set simulation study parameters for sample size — sim_samplesize","text":"Set simulation study parameters sample size","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_samplesize.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set simulation study parameters for sample size — sim_samplesize","text":"","code":"sim_samplesize(n_internal_control, n_external_control, n_internal_experimental)"},{"path":"https://genentech.github.io/psborrow2/reference/sim_samplesize.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set simulation study parameters for sample size — sim_samplesize","text":"n_internal_control integer. Number patients simulated internal control arm. n_external_control integer. Number patients simulated external control arm. n_internal_experimental integer. Number patients simulated internal experimental arm.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_samplesize.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set simulation study parameters for sample size — sim_samplesize","text":"Object class SimSampleSize","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/sim_samplesize.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Set simulation study parameters for sample size — sim_samplesize","text":"","code":"ss <- sim_samplesize(200, 200, 500)"},{"path":"https://genentech.github.io/psborrow2/reference/sim_treatment_list.html","id":null,"dir":"Reference","previous_headings":"","what":"Input treatment details for a simulation study — sim_treatment_list","title":"Input treatment details for a simulation study — sim_treatment_list","text":"function defining treatment scenarios evaluated part simulation study.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/sim_treatment_list.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Input treatment details for a simulation study — sim_treatment_list","text":"","code":"sim_treatment_list(treatment_list)"},{"path":"https://genentech.github.io/psborrow2/reference/sim_treatment_list.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Input treatment details for a simulation study — sim_treatment_list","text":"treatment_list named list objects class Treatment created treatment_details().","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/sim_treatment_list.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Input treatment details for a simulation study — sim_treatment_list","text":"","code":"treatment_scenarios <- sim_treatment_list(   list(     \"Standard\" = treatment_details(\"trt\", normal_prior(0, 1000))   ) )"},{"path":"https://genentech.github.io/psborrow2/reference/treatment_details.html","id":null,"dir":"Reference","previous_headings":"","what":"Specify Treatment Details — treatment_details","title":"Specify Treatment Details — treatment_details","text":"Specify treatment arm column name model matrix set prior distribution treatment effect (log hazard ratio log odds ratio)","code":""},{"path":"https://genentech.github.io/psborrow2/reference/treatment_details.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Specify Treatment Details — treatment_details","text":"","code":"treatment_details(trt_flag_col, trt_prior)"},{"path":"https://genentech.github.io/psborrow2/reference/treatment_details.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Specify Treatment Details — treatment_details","text":"trt_flag_col character. name column model matrix corresponds treatment flag (1/0 TRUE/FALSE). identifies patients belonging experimental treatment arm. trt_prior Object class Prior specifying prior distribution log effect estimate (log hazard ratio time event endpoints log odds ratio binary endpoints).","code":""},{"path":"https://genentech.github.io/psborrow2/reference/treatment_details.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Specify Treatment Details — treatment_details","text":"Object class Treatment.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/treatment_details.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Specify Treatment Details — treatment_details","text":"","code":"sta <- treatment_details(   trt_flag_col = \"trt\",   trt_prior = normal_prior(0, 1000) )"},{"path":"https://genentech.github.io/psborrow2/reference/trim_data_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Trim model matrix to just include relevant columns — trim_data_matrix","title":"Trim model matrix to just include relevant columns — trim_data_matrix","text":"Take Analysis object's data_matrix remove everything unnecessary preparation making input data Stan","code":""},{"path":"https://genentech.github.io/psborrow2/reference/trim_data_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Trim model matrix to just include relevant columns — trim_data_matrix","text":"","code":"trim_data_matrix(analysis_obj)"},{"path":"https://genentech.github.io/psborrow2/reference/trim_data_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Trim model matrix to just include relevant columns — trim_data_matrix","text":"analysis_obj Analysis. object class Analysis created .create_analysis_obj().","code":""},{"path":"https://genentech.github.io/psborrow2/reference/trim_data_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Trim model matrix to just include relevant columns — trim_data_matrix","text":"Trimmed data matrix","code":""},{"path":"https://genentech.github.io/psborrow2/reference/trim_data_matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Trim model matrix to just include relevant columns — trim_data_matrix","text":"","code":"anls <- create_analysis_obj(   data_matrix = example_matrix,   covariates = add_covariates(     covariates = c(\"cov1\", \"cov2\"),     priors = normal_prior(0, 1000)   ),   outcome = exp_surv_dist(     \"time\",     \"cnsr\",     baseline_prior = normal_prior(0, 1000)   ),   borrowing = borrowing_details(     \"BDB\",     \"ext\",     exponential_prior(.001)   ),   treatment = treatment_details(     \"trt\",     normal_prior(0, 1000)   ) ) #> Inputs look good. #> Stan program compiled successfully! #> Ready to go! Now call `mcmc_sample()`.  trimmed_mat <- psborrow2:::trim_data_matrix(anls)"},{"path":"https://genentech.github.io/psborrow2/reference/uniform_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior uniform distribution — uniform_prior","title":"Prior uniform distribution — uniform_prior","text":"Prior uniform distribution","code":""},{"path":"https://genentech.github.io/psborrow2/reference/uniform_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior uniform distribution — uniform_prior","text":"","code":"uniform_prior(alpha, beta)"},{"path":"https://genentech.github.io/psborrow2/reference/uniform_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior uniform distribution — uniform_prior","text":"alpha numeric. Lower bound. beta numeric. Upper bound (>alpha).","code":""},{"path":"https://genentech.github.io/psborrow2/reference/uniform_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior uniform distribution — uniform_prior","text":"Object class UniformPrior.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/uniform_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Prior uniform distribution — uniform_prior","text":"Stan reference https://mc-stan.org/docs/functions-reference/uniform-distribution.html","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/uniform_prior.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prior uniform distribution — uniform_prior","text":"","code":"up <- uniform_prior(0, 1)"},{"path":"https://genentech.github.io/psborrow2/reference/variable_dictionary.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Variable Dictionary — variable_dictionary","title":"Create Variable Dictionary — variable_dictionary","text":"Create Variable Dictionary","code":""},{"path":"https://genentech.github.io/psborrow2/reference/variable_dictionary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Variable Dictionary — variable_dictionary","text":"","code":"variable_dictionary(analysis_obj)"},{"path":"https://genentech.github.io/psborrow2/reference/variable_dictionary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Variable Dictionary — variable_dictionary","text":"analysis_obj Analysis. Object describe variable names.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/variable_dictionary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Variable Dictionary — variable_dictionary","text":"data.frame names Stan variables descriptions.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/weib_ph_surv_dist.html","id":null,"dir":"Reference","previous_headings":"","what":"Weibull survival distribution (proportional hazards formulation) — weib_ph_surv_dist","title":"Weibull survival distribution (proportional hazards formulation) — weib_ph_surv_dist","text":"Weibull survival distribution (proportional hazards formulation)","code":""},{"path":"https://genentech.github.io/psborrow2/reference/weib_ph_surv_dist.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Weibull survival distribution (proportional hazards formulation) — weib_ph_surv_dist","text":"","code":"weib_ph_surv_dist(   time_var,   cens_var,   shape_prior,   baseline_prior,   weight_var = \"\" )"},{"path":"https://genentech.github.io/psborrow2/reference/weib_ph_surv_dist.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Weibull survival distribution (proportional hazards formulation) — weib_ph_surv_dist","text":"time_var character. Name time variable column model matrix cens_var character. Name censorship variable flag model matrix shape_prior Prior class object Weibull shape parameter. Default exponential_prior(beta = 0.0001). baseline_prior Prior. Object class Prior specifying prior distribution baseline outcome. See Details information. weight_var character. Optional name variable model matrix weighting log likelihood.","code":""},{"path":"https://genentech.github.io/psborrow2/reference/weib_ph_surv_dist.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Weibull survival distribution (proportional hazards formulation) — weib_ph_surv_dist","text":"Object class WeibullPHSurvDist.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/weib_ph_surv_dist.html","id":"baseline-prior","dir":"Reference","previous_headings":"","what":"Baseline Prior","title":"Weibull survival distribution (proportional hazards formulation) — weib_ph_surv_dist","text":"baseline_prior argument specifies prior distribution baseline log hazard rate. interpretation baseline_prior differs slightly methods selected borrowing_details(): 'BDB': baseline_prior Bayesian Dynamic Borrowing refers log hazard rate external control arm. 'Full borrowing' 'borrowing': baseline_prior borrowing methods refers log hazard rate internal control arm.","code":""},{"path":[]},{"path":"https://genentech.github.io/psborrow2/reference/weib_ph_surv_dist.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Weibull survival distribution (proportional hazards formulation) — weib_ph_surv_dist","text":"","code":"ws <- weib_ph_surv_dist(   time_var = \"time\",   cens_var = \"cens\",   shape_prior = exponential_prior(1),   baseline_prior = normal_prior(0, 1000) )"},{"path":"https://genentech.github.io/psborrow2/news/index.html","id":"psborrow2-0020","dir":"Changelog","previous_headings":"","what":"psborrow2 0.0.2.0","title":"psborrow2 0.0.2.0","text":"First public demonstration psborrow2 Propensity score weighting (weighting) Fixed power priors","code":""},{"path":"https://genentech.github.io/psborrow2/news/index.html","id":"psborrow2-0010","dir":"Changelog","previous_headings":"","what":"psborrow2 0.0.1.0","title":"psborrow2 0.0.1.0","text":"First private functional application psborrow2 Logistic, exponential survival Weibull proportional hazards survival outcome models Dynamic borrowing commensurate priors Full borrowing borrowing Covariate adjustment Prior specification treatment effect, baseline hazard covariate coefficients Uses CmdStan MCMC","code":""},{"path":"https://genentech.github.io/psborrow2/news/index.html","id":"psborrow2-0009000","dir":"Changelog","previous_headings":"","what":"psborrow2 0.0.0.9000","title":"psborrow2 0.0.0.9000","text":"Start psborrow2","code":""}]
